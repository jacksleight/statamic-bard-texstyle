var x=Object.defineProperty;var w=(s,t,e)=>t in s?x(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var b=(s,t,e)=>(w(s,typeof t!="symbol"?t+"":t,e),e);const{Mark:y}=Statamic.$bard.tiptap.core,_=y.create({name:"btsSpan",parseHTML(){return[{tag:"span[data-bts]"}]},renderHTML({HTMLAttributes:s}){return["span",s,0]},addCommands(){return{btsToggleSpan:s=>({commands:t})=>t.toggleMark(this.name,s)}}}),{Node:L}=Statamic.$bard.tiptap.core,$=L.create({name:"btsDiv",content:"block+",group:"root",defining:!1,parseHTML(){return[{tag:"div[data-bts]"}]},renderHTML({HTMLAttributes:s}){return["div",s,0]},addCommands(){return{btsToggleDiv:s=>({editor:t,commands:e})=>t.isActive(this.name,s)?e.lift(this.name):t.isActive(this.name)?e.updateAttributes(this.name,s):e.wrapIn(this.name,s)}}}),{Extension:k}=Statamic.$bard.tiptap.core,S=k.create({name:"btsCore",addOptions(){return{bard:{},attr:null,styleTypes:[]}},addGlobalAttributes(){const{attr:s,styleTypes:t}=this.options;return[{types:t,attributes:{[s]:{parseHTML:e=>e.getAttribute("data-bts"),renderHTML:e=>({["data-bts"]:e[s]})}}}]},addCommands(){return{btsToggleHeading:s=>({commands:t})=>t.toggleNode("heading","paragraph",s),btsToggleParagraph:s=>({commands:t})=>t.toggleNode("paragraph","paragraph",s),btsToggleLink:s=>({commands:t,editor:e})=>e.isActive("link",s)?t.resetAttributes("link","class"):t.updateAttributes("link",s),btsToggleList:(s,t)=>({commands:e,editor:i,chain:r})=>i.isActive(t,s)?e.toggleList(t,"listItem"):i.isActive(t)?e.updateAttributes(t,s):r().toggleList(t,"listItem").updateAttributes(t,s).run(),btsToggleBulletList:s=>({commands:t})=>t.btsToggleList(s,"bulletList"),btsToggleOrderedList:s=>({commands:t})=>t.btsToggleList(s,"orderedList")}},onUpdate(){this.options.bard.$emit("bts-update")},onSelectionUpdate(){this.options.bard.$emit("bts-update")}}),{Extension:T}=Statamic.$bard.tiptap.core,M=T.create({name:"btsOverrides",addOptions(){return{bard:{},styleTypes:[],styleOptions:{}}},onCreate(){const{bard:s,styleTypes:t,styleOptions:e}=this.options,i=[...t.includes("heading")?["h1","h2","h3","h4","h5","h6"]:[],...t.includes("bulletList")?["unorderedlist"]:[],...t.includes("orderedList")?["orderedlist"]:[]];if(s.buttons.forEach(r=>{i.includes(r.name)&&(r.args={...r.args||{},class:null}),r.name==="unorderedlist"&&t.includes("bulletList")&&(r.command=(o,n)=>o.chain().focus().btsToggleBulletList(n).run()),r.name==="orderedlist"&&t.includes("orderedList")&&(r.command=(o,n)=>o.chain().focus().btsToggleOrderedList(n).run())}),s.buttons.find(r=>r.name==="bts_styles")){const r=(s.config.bts_styles||[]).filter(o=>Object.keys(e).includes(o));s.buttons.forEach(o=>{r.includes(o.name)&&(o.visible=()=>!1)})}}}),{Extension:A,getNodeAttributes:lt}=Statamic.$bard.tiptap.core,O=A.create({name:"btsAttributes",addOptions(){return{attributes:{},attributeTypes:{}}},addGlobalAttributes(){const{attributes:s}=this.options;return Object.entries(s).map(([t,e])=>({types:[t],attributes:Object.fromEntries(Object.entries(e).filter(([i,r])=>r.extra).map(([i,r])=>[i,{default:typeof r.default<"u"?r.default:null,rendered:typeof r.rendered<"u"?r.rendered:!0}]))}))},addCommands(){const{attributeTypes:s}=this.options;return{btsAttributesFetch:()=>({state:t})=>{const{from:e,to:i}=t.selection,r=[];return t.doc.nodesBetween(e,e+1,o=>{s.includes(o.type.name)?r.push({kind:"node",type:o.type.name,attrs:{...o.attrs}}):o.type.name==="text"&&o.marks.forEach(n=>{s.includes(n.type.name)&&r.push({kind:"mark",type:n.type.name,attrs:{...n.attrs}})})}),{info:{from:e,to:i},items:r.reverse()}},btsAttributesApply:({info:t,items:e})=>({state:i,chain:r})=>{const{from:o,to:n}=i.selection;if(o!==t.from||n!==t.to)return;let a=r().focus();return e.forEach(l=>{l.kind==="mark"&&(a=a.extendMarkRange(l.type)),a=a.updateAttributes(l.type,l.attrs)}),a.setTextSelection({from:o,to:n}).run()}}}});function p(s,t,e,i,r,o,n,a){var l=typeof s=="function"?s.options:s;t&&(l.render=t,l.staticRenderFns=e,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o);var c;if(n?(c=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),r&&r.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(n)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(v,g){return c.call(g),u(v,g)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:s,options:l}}const B={props:{item:Object,config:{},bard:{},editor:{},btsOptions:{}},computed:{active(){if(this.item.hasOwnProperty("active"))return this.item.active(this.editor,this.item.args);const s=this.item.hasOwnProperty("activeName")?"activeName":"name",t=this.item[s];return this.editor.isActive(t,this.item.args)},visible(){return this.item.hasOwnProperty("btsMenuVisible")?this.item.btsMenuVisible(this.editor,this.item.args):!0},previewMatch(){return(this.item.btsStyle?[this.item.name,this.item.btsStyle.type,this.item.btsStyle.level?`h${this.item.btsStyle.level}`:null]:[this.item.name]).join(" ")}},methods:{click(){this.item.command(this.editor,this.item.args),this.$emit("picked")}}};var j=function(){var t=this,e=t._self._c;return t.visible?e("button",{staticClass:"bts-styles-item",class:{active:t.active},on:{click:t.click}},[e("div",{staticClass:"bts-styles-preview",attrs:{"data-bts-match":t.previewMatch}},[t._v(" "+t._s(t.item.text)+" ")])]):t._e()},Z=[],P=p(B,j,Z,!1,null,null,null,null);const z=P.exports,E={components:{StylesItem:z},props:{config:{},bard:{},editor:{},btsOptions:{}},created(){this.bard.$on("bts-update",()=>this.$emit("close"))},beforeDestroy(){this.bard.$off("bts-update")},computed:{items(){const s=this.bard.buttons,t=(this.config.bts_styles||[]).filter(e=>Object.keys(this.btsOptions.styleOptions).includes(e));return s.filter(e=>typeof e=="object"&&t.includes(e.name))}}};var H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bts-panel bts-styles"},[t.items.length?e("div",{staticClass:"bts-styles-items"},t._l(t.items,function(i){return e("StylesItem",{key:i.name,attrs:{item:i,config:t.config,bard:t.bard,editor:t.editor,btsOptions:t.btsOptions},on:{picked:function(r){return t.$emit("picked")}}})}),1):e("div",{staticClass:"jstw-p-8 w-40 text-center jstw-text-gray-400"},[e("svg",{staticClass:"w-12 h-12",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{staticStyle:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},attrs:{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",stroke:"currentColor"}})])])])},I=[],R=p(E,H,I,!1,null,null,null,null);const N=R.exports,V={mixins:[BardToolbarButton],components:{StylesMenu:N},data(){return{panelActive:!1}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&this.togglePanel()}}};var D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"inline-block relative"},[e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.button.text,expression:"button.text"}],staticClass:"bard-toolbar-button",attrs:{"aria-label":t.button.text},domProps:{innerHTML:t._s(t.button.html)},on:{click:t.togglePanel}}),t.panelActive?e("StylesMenu",{attrs:{config:t.config,bard:t.bard,editor:t.editor,btsOptions:t.button.btsOptions},on:{close:t.closePanel,picked:t.closePanel}}):t._e()],1)},F=[],q=p(V,D,F,!1,null,null,null,null);const U=q.exports,G={props:{config:{},bard:{},editor:{},btsOptions:{}},data(){const{info:s,items:t}=this.editor.commands.btsAttributesFetch();return{activeItem:0,info:s,items:t,titles:{blockquote:__("Blockquote"),bold:__("Bold"),bulletList:__("Unordered List"),code:__("Code"),codeBlock:__("Code Block"),heading:__("Heading"),horizontalRule:__("Horizontal Rule"),image:__("Image"),italic:__("Italic"),link:__("Link"),listItem:__("List Item"),orderedList:__("Ordered List"),paragraph:__("Paragraph"),strike:__("Strike"),subscript:__("Subscript"),superscript:__("Superscript"),table:__("Table"),tableCell:__("Table Cell"),tableHeader:__("Table Header"),tableRow:__("Table Row"),underline:__("Underline")}}},created(){this.bard.$on("bts-update",()=>this.$emit("close"))},beforeDestroy(){this.bard.$off("bts-update")},methods:{fields(s){return this.btsOptions.attributes[s]},apply(){this.editor.commands.btsAttributesApply({info:this.info,items:this.items}),this.$emit("applied")}}};var W=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bts-panel"},[t.items.length?e("div",[t._l(t.items,function(i,r){return e("div",[e("div",{staticClass:"font-bold jstw-px-4 jstw-py-2.5 jstw-bg-gray-100 title-case border-b flex items-center cursor-pointer",on:{click:function(o){t.activeItem=r}}},[e("svg",{staticClass:"w-4 h-4 bts-arrow jstw-text-gray-700",class:{"rotate-90":t.activeItem===r},attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}})]),t._v(" "+t._s(t.titles[i.type])+" ")]),t.activeItem===r?e("div",{staticClass:"jstw-p-4 jstw-pt-1 border-b"},t._l(t.fields(i.type),function(o,n){return e("div",{staticClass:"jstw-mt-3"},[o.type==="toggle"?e("label",{staticClass:"flex items-baseline jstw-gap-1 font-normal"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.attrs[n],expression:"item.attrs[name]"}],attrs:{type:"checkbox","true-value":!0,"false-value":null},domProps:{checked:Array.isArray(i.attrs[n])?t._i(i.attrs[n],null)>-1:i.attrs[n]},on:{change:function(a){var l=i.attrs[n],c=a.target,u=c.checked?!0:null;if(Array.isArray(l)){var h=null,d=t._i(l,h);c.checked?d<0&&t.$set(i.attrs,n,l.concat([h])):d>-1&&t.$set(i.attrs,n,l.slice(0,d).concat(l.slice(d+1)))}else t.$set(i.attrs,n,u)}}}),e("div",{staticClass:"text-sm"},[t._v(t._s(o.display||n))])]):e("label",{staticClass:"font-normal"},[e("div",{staticClass:"text-sm leading-none"},[t._v(t._s(o.display||n))]),e("input",{directives:[{name:"model",rawName:"v-model",value:i.attrs[n],expression:"item.attrs[name]"}],staticClass:"input h-8 jstw-p-2 border text-sm jstw-border-gray-500 rounded jstw-mt-2",attrs:{type:"text"},domProps:{value:i.attrs[n]},on:{input:function(a){a.target.composing||t.$set(i.attrs,n,a.target.value)}}})])])}),0):t._e()])}),e("div",{staticClass:"flex items-center justify-end font-normal jstw-px-4 jstw-py-3"},[e("button",{staticClass:"btn btn-sm",on:{click:t.apply}},[t._v(" "+t._s(t.__("OK"))+" ")])])],2):e("div",{staticClass:"jstw-p-8 w-40 text-center jstw-text-gray-400"},[e("svg",{staticClass:"w-12 h-12",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{staticStyle:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},attrs:{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",stroke:"currentColor"}})])])])},X=[],K=p(G,W,X,!1,null,null,null,null);const J=K.exports,Q={mixins:[BardToolbarButton],components:{AttributesPanel:J},data(){return{panelActive:!1}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&this.togglePanel()}}};var Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"inline-block relative"},[e("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.button.text,expression:"button.text"}],staticClass:"bard-toolbar-button",attrs:{"aria-label":t.button.text},domProps:{innerHTML:t._s(t.button.html)},on:{click:t.togglePanel}}),t.panelActive?e("AttributesPanel",{attrs:{config:t.config,bard:t.bard,editor:t.editor,btsOptions:t.button.btsOptions},on:{close:t.closePanel,applied:t.closePanel}}):t._e()],1)},tt=[],et=p(Q,Y,tt,!1,null,null,null,null);const st=et.exports;let m=0;const C={classic:{letter:s=>{const t={heading:"H",paragraph:"P",btsSpan:"T"}[s.type]??"S",e=s.ident;return`
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16" fill="currentColor" style="width: 24px;">
                    <text text-anchor="middle" x="8.3" y="15" style="font-family: Times, Times New Roman, serif; font-size: 21px;">${t}</text>
                    <text text-anchor="middle" x="20" y="12.5" style="font-size: 12px;">${e}</text>
                </svg>
            `},square:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <rect width="15" height="15" x="0.5" y="0.5" rx="2" stroke-width="1" stroke="currentColor" fill="none" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,"square-solid":s=>{const t=s.ident,e=`bts-mask-${m++}`;return`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <mask id="${e}">
                        <rect width="16" height="16" fill="white" />
                        <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${t}</text>
                    </mask>
                    <rect width="15" height="15" x="0.5" y="0.5" rx="2" stroke-width="1" stroke="currentColor" mask="url(#${e})" />
                </svg>
            `},circle:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" fill="none" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,"circle-solid":s=>{const t=s.ident,e=`bts-mask-${m++}`;return`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <mask id="${e}">
                        <rect width="16" height="16" fill="white" />
                        <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${t}</text>
                    </mask>
                    <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" mask="url(#${e})" />
                </svg>
            `},"bullet-list":s=>`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M384 1408c0 53.33-18.667 98.67-56 136s-82.667 56-136 56-98.667-18.67-136-56-56-82.67-56-136 18.667-98.67 56-136 82.667-56 136-56 98.667 18.67 136 56 56 82.67 56 136Zm0-512c0 53.333-18.667 98.667-56 136-37.333 37.33-82.667 56-136 56s-98.667-18.67-136-56C18.667 994.667 0 949.333 0 896s18.667-98.667 56-136 82.667-56 136-56 98.667 18.667 136 56 56 82.667 56 136Zm0-512c0 53.333-18.667 98.667-56 136s-82.667 56-136 56-98.667-18.667-136-56S0 437.333 0 384s18.667-98.667 56-136 82.667-56 136-56 98.667 18.667 136 56 56 82.667 56 136Z" transform="scale(.00893)"/>
                    <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,"ordered-list":s=>`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M381 1620c0 53.33-18.167 95.33-54.5 126s-81.5 46-135.5 46c-70.667 0-128-22-172-66l57-88c32.667 30 68 45 106 45 19.333 0 36.167-4.83 50.5-14.5 14.333-9.67 21.5-23.83 21.5-42.5 0-42.67-35-61.33-105-56l-26-56c5.333-6.67 16.167-21.17 32.5-43.5s30.5-40.33 42.5-54c12-13.67 24.333-26.5 37-38.5v-1c-10.667 0-26.833.33-48.5 1-21.667.67-37.833 1-48.5 1v53H32v-152h333v88l-95 115c34 8 61 24.33 81 49s30 54 30 88Zm2-627v159H21c-4-24-6-42-6-54 0-34 7.833-65 23.5-93S73 954.333 95 937s44-33.167 66-47.5c22-14.333 40.833-28.833 56.5-43.5 15.667-14.667 23.5-29.667 23.5-45 0-16.667-4.833-29.5-14.5-38.5S203.667 749 187 749c-30.667 0-57.667 19.333-81 58l-85-59c16-34 39.833-60.5 71.5-79.5S159.333 640 198 640c48.667 0 89.667 13.833 123 41.5s50 65.167 50 112.5c0 33.333-11.333 63.833-34 91.5s-47.667 49.167-75 64.5c-27.333 15.333-52.5 32.167-75.5 50.5-23 18.33-34.833 35.83-35.5 52.5h127v-60h105Zm1-580v99H49v-99h107c0-27.333.167-67.833.5-121.5.333-53.667.5-94.167.5-121.5v-12h-2c-5.333 11.333-22 29.333-50 54l-71-76L170 9h106v404h108Z" transform="scale(.00893)"/>
                    <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,link:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M1520 1216c0-26.67-9.33-49.33-28-68l-208-208c-18.67-18.667-41.33-28-68-28-28 0-52 10.667-72 32 2 2 8.33 8.167 19 18.5s17.83 17.5 21.5 21.5c3.67 4 8.67 10.333 15 19 6.33 8.67 10.67 17.17 13 25.5 2.33 8.33 3.5 17.5 3.5 27.5 0 26.67-9.33 49.33-28 68s-41.33 28-68 28c-10 0-19.17-1.17-27.5-3.5-8.33-2.33-16.83-6.67-25.5-13-8.67-6.33-15-11.33-19-15s-11.17-10.83-21.5-21.5-16.5-17-18.5-19c-22 20.67-33 45-33 73 0 26.67 9.333 49.33 28 68l206 207c18 18 40.67 27 68 27 26.67 0 49.33-8.67 68-26l147-146c18.67-18.67 28-41 28-67ZM817 511c0-26.667-9.333-49.333-28-68L583 236c-18.667-18.667-41.333-28-68-28-26 0-48.667 9-68 27L300 381c-18.667 18.667-28 41-28 67 0 26.667 9.333 49.333 28 68l208 208c18 18 40.667 27 68 27 28 0 52-10.333 72-31-2-2-8.333-8.167-19-18.5S611.167 684 607.5 680c-3.667-4-8.667-10.333-15-19s-10.667-17.167-13-25.5c-2.333-8.333-3.5-17.5-3.5-27.5 0-26.667 9.333-49.333 28-68s41.333-28 68-28c10 0 19.167 1.167 27.5 3.5 8.333 2.333 16.833 6.667 25.5 13 8.667 6.333 15 11.333 19 15s11.167 10.833 21.5 21.5 16.5 17 18.5 19c22-20.667 33-45 33-73Zm895 705c0 80-28.33 147.67-85 203l-147 146c-55.33 55.33-123 83-203 83-80.67 0-148.67-28.33-204-85l-206-207c-55.333-55.33-83-123-83-203 0-82 29.333-151.67 88-209l-88-88c-57.333 58.667-126.667 88-208 88-80 0-148-28-204-84L164 652c-56-56-84-124-84-204s28.333-147.667 85-203L312 99c55.333-55.333 123-83 203-83 80.667 0 148.667 28.333 204 85l206 207c55.333 55.333 83 123 83 203 0 82-29.333 151.667-88 209l88 88c57.33-58.667 126.67-88 208-88 80 0 148 28 204 84l208 208c56 56 84 124 84 204Z" transform="matrix(.00702 0 0 .00702 -.562 3.86)"/>
                    <text text-anchor="middle" x="11" y="8" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,symbol:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <text text-anchor="middle" x="8" y="16" style="font-size: 23px;">${s.ident}</text>
                </svg>
            `},modern:{letter:s=>{const t={heading:"H",paragraph:"P",btsSpan:"T"}[s.type]??"S",e={H:'<path d="M1.714,6.88L7.143,6.88L7.143,1.429C7.143,1.113 7.399,0.857 7.714,0.857C8.03,0.857 8.286,1.113 8.286,1.429L8.286,14.571C8.286,14.887 8.03,15.143 7.714,15.143C7.399,15.143 7.143,14.887 7.143,14.571L7.143,8.023L1.714,8.023L1.714,14.571C1.714,14.887 1.458,15.143 1.143,15.143C0.827,15.143 0.571,14.887 0.571,14.571L0.571,1.429C0.571,1.113 0.827,0.857 1.143,0.857C1.458,0.857 1.714,1.113 1.714,1.429L1.714,6.88Z"/>',P:'<path d="M1.156,0.899L1.158,0.899C2.45,0.878 2.908,0.857 3.606,0.857C5.45,0.857 6.78,1.234 7.603,2.048C8.394,2.853 8.785,3.876 8.785,5.112C8.785,6.309 8.35,7.329 7.5,8.173C6.619,9.026 5.374,9.43 3.754,9.43C2.939,9.43 2.744,9.41 2.096,9.348L1.762,9.316L1.762,14.563C1.762,14.881 1.497,15.143 1.177,15.143C0.841,15.143 0.571,14.883 0.571,14.563L0.571,1.479C0.571,1.161 0.836,0.899 1.156,0.899ZM2.06,1.975L1.762,1.981L1.762,8.227L2.042,8.249C2.856,8.313 3.048,8.355 3.69,8.355C4.867,8.355 5.805,8.044 6.454,7.495C7.119,6.931 7.489,6.114 7.489,5.091C7.489,4.1 7.167,3.311 6.538,2.766C5.926,2.236 5.01,1.932 3.775,1.932C3.202,1.932 2.994,1.953 2.06,1.975Z" />',T:'<path d="M9.558,1.936L5.916,1.936L5.916,14.561C5.916,14.88 5.653,15.143 5.335,15.143C5,15.143 4.732,14.882 4.732,14.561L4.732,1.936L1.09,1.936C0.808,1.936 0.571,1.678 0.571,1.396C0.571,1.115 0.808,0.857 1.09,0.857L9.558,0.857C9.84,0.857 10.077,1.115 10.077,1.396C10.077,1.678 9.84,1.936 9.558,1.936Z" />',S:'<path d="M4.27,15.143C3.057,15.143 1.865,14.604 0.707,13.562C0.614,13.474 0.571,13.359 0.571,13.208C0.571,13.092 0.606,12.976 0.678,12.885L0.681,12.881C0.783,12.746 0.906,12.679 1.066,12.679C1.174,12.679 1.259,12.702 1.344,12.765C2.468,13.662 3.453,14.085 4.289,14.085C5.947,14.085 7.211,13.102 7.211,11.534C7.211,10.542 6.757,9.873 6.062,9.35C5.429,8.874 4.586,8.524 3.742,8.137C2.191,7.426 0.61,6.595 0.61,4.342C0.61,3.354 0.947,2.518 1.621,1.853C2.307,1.176 3.231,0.857 4.405,0.857C5.508,0.857 6.52,1.172 7.421,1.782C7.552,1.871 7.601,2.015 7.601,2.192C7.601,2.286 7.596,2.364 7.548,2.416L7.53,2.435L7.516,2.457C7.403,2.631 7.27,2.721 7.107,2.721C7.027,2.721 6.921,2.687 6.801,2.616C6.082,2.155 5.302,1.915 4.501,1.915C2.83,1.915 1.791,2.877 1.791,4.342C1.791,5.9 2.904,6.638 4.285,7.262C5.035,7.602 5.861,7.915 6.582,8.357C7.595,8.979 8.393,9.868 8.393,11.514C8.393,12.595 8.003,13.449 7.242,14.113C6.44,14.796 5.454,15.143 4.27,15.143Z" />'}[t],i=s.ident;return`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    ${e}
                    <text text-anchor="middle" x="13" y="15" style="font-size: 10px;">${i}</text>
                </svg>
            `},square:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <rect width="15" height="15" x="0.5" y="0.5" rx="2" stroke-width="1" stroke="currentColor" fill="none" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,"square-solid":s=>{const t=s.ident,e=`bts-mask-${m++}`;return`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <mask id="${e}">
                        <rect width="16" height="16" fill="white" />
                        <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${t}</text>
                    </mask>
                    <rect width="15" height="15" x="0.5" y="0.5" rx="2" stroke-width="1" stroke="currentColor" mask="url(#${e})" />
                </svg>
            `},circle:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" fill="none" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,"circle-solid":s=>{const t=s.ident,e=`bts-mask-${m++}`;return`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <mask id="${e}">
                        <rect width="16" height="16" fill="white" />
                        <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${t}</text>
                    </mask>
                    <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" mask="url(#${e})" />
                </svg>
            `},"bullet-list":s=>`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M2.333,1C2.882,1 3.333,1.451 3.333,2L3.333,3.333C3.333,3.882 2.882,4.333 2.333,4.333L1,4.333C0.451,4.333 0,3.882 0,3.333L0,2C-0,1.451 0.451,1 1,1L2.333,1ZM2.333,6.333C2.882,6.333 3.333,6.785 3.333,7.333L3.333,8.667C3.333,9.215 2.882,9.667 2.333,9.667L1,9.667C0.451,9.667 0,9.215 0,8.667L0,7.333C-0,6.785 0.451,6.333 1,6.333L2.333,6.333ZM2.333,11.667C2.882,11.667 3.333,12.118 3.333,12.667L3.333,14C3.333,14.549 2.882,15 2.333,15L1,15C0.451,15 0,14.549 0,14L0,12.667C-0,12.118 0.451,11.667 1,11.667L2.333,11.667Z" />
                    <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,"ordered-list":s=>`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M1.473,11.5C0.873,11.5 0.343,11.907 0.187,12.487C0.175,12.529 0.169,12.573 0.169,12.617C0.169,12.891 0.395,13.117 0.67,13.117C0.896,13.117 1.095,12.965 1.153,12.747C1.192,12.602 1.324,12.501 1.473,12.5C1.656,12.5 1.807,12.65 1.807,12.833C1.807,13.016 1.656,13.167 1.473,13.167C1.199,13.167 0.973,13.392 0.973,13.667C0.973,13.941 1.199,14.167 1.473,14.167C1.656,14.167 1.807,14.317 1.807,14.5C1.809,14.514 1.809,14.529 1.809,14.543C1.809,14.728 1.658,14.879 1.473,14.879C1.305,14.879 1.162,14.753 1.14,14.587C1.09,14.358 0.886,14.194 0.652,14.194C0.377,14.194 0.152,14.42 0.152,14.694C0.152,14.751 0.161,14.807 0.18,14.86C0.345,15.427 0.869,15.82 1.46,15.82C2.187,15.82 2.786,15.226 2.793,14.5C2.795,14.236 2.716,13.978 2.567,13.76C2.533,13.702 2.533,13.631 2.567,13.573C2.716,13.356 2.795,13.097 2.793,12.833C2.793,12.107 2.2,11.507 1.473,11.5ZM2.833,7.167C2.833,6.435 2.231,5.833 1.5,5.833C0.769,5.833 0.167,6.435 0.167,7.167C0.17,7.44 0.394,7.663 0.667,7.667C0.94,7.663 1.163,7.44 1.167,7.167C1.167,6.984 1.317,6.833 1.5,6.833C1.683,6.833 1.833,6.984 1.833,7.167C1.834,7.322 1.779,7.473 1.68,7.593L0.273,9.333C0.156,9.483 0.133,9.687 0.213,9.86C0.297,10.034 0.474,10.145 0.667,10.147L2.333,10.147C2.608,10.147 2.833,9.921 2.833,9.647C2.833,9.372 2.608,9.147 2.333,9.147L2.053,9.147C1.991,9.146 1.934,9.109 1.907,9.053C1.87,8.999 1.87,8.928 1.907,8.873L2.447,8.207C2.686,7.912 2.822,7.546 2.833,7.167ZM2.667,3.5L2.5,3.5C2.409,3.5 2.333,3.425 2.333,3.333L2.333,1.08C2.33,0.578 1.916,0.167 1.413,0.167L1,0.167C0.726,0.167 0.5,0.392 0.5,0.667C0.5,0.941 0.726,1.167 1,1.167L1.167,1.167C1.258,1.167 1.333,1.242 1.333,1.333L1.333,3.333C1.333,3.425 1.258,3.5 1.167,3.5L1,3.5C0.726,3.5 0.5,3.726 0.5,4C0.5,4.274 0.726,4.5 1,4.5L2.667,4.5C2.941,4.5 3.167,4.274 3.167,4C3.167,3.726 2.941,3.5 2.667,3.5Z" />
                    <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,link:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M10.031,7.51C9.534,8.211 9.615,9.178 10.223,9.786L10.562,10.125L10.126,10.562L9.786,10.222C9.178,9.614 8.211,9.533 7.51,10.031L7.3,10.18C6.802,10.534 6.365,10.967 6.007,11.463C5.419,12.28 5.51,13.413 6.222,14.125L7.351,15.254C8.063,15.966 9.196,16.057 10.013,15.469C10.509,15.111 10.943,14.674 11.298,14.175L11.461,13.945C11.951,13.256 11.87,12.305 11.272,11.707L10.915,11.35L11.351,10.914L11.709,11.271C12.306,11.869 13.257,11.949 13.947,11.46L14.177,11.296C14.675,10.942 15.112,10.508 15.47,10.012C16.058,9.195 15.967,8.062 15.255,7.35L14.126,6.221C13.414,5.51 12.281,5.419 11.464,6.007C10.968,6.364 10.534,6.801 10.179,7.3L10.031,7.51L10.031,7.51ZM12.141,10.125L12.499,10.483C12.713,10.696 13.053,10.725 13.3,10.55L13.53,10.386C13.929,10.103 14.278,9.756 14.564,9.359C14.833,8.985 14.791,8.466 14.466,8.141L13.336,7.011C13.01,6.686 12.491,6.644 12.117,6.913C11.721,7.199 11.373,7.548 11.09,7.947L10.941,8.156C10.757,8.415 10.787,8.772 11.012,8.996L11.351,9.335L11.729,8.957C11.835,8.848 11.98,8.787 12.131,8.787C12.438,8.787 12.69,9.039 12.69,9.345C12.69,9.496 12.628,9.641 12.519,9.746L12.141,10.125ZM9.336,11.351L8.964,11.723C8.859,11.828 8.8,11.97 8.8,12.118C8.8,12.424 9.053,12.676 9.359,12.676C9.507,12.676 9.65,12.617 9.754,12.512L10.126,12.141L10.483,12.498C10.697,12.712 10.725,13.053 10.55,13.299L10.386,13.53C10.103,13.929 9.756,14.278 9.36,14.563C8.986,14.833 8.467,14.791 8.141,14.465L7.012,13.336C6.686,13.011 6.644,12.492 6.913,12.118C7.199,11.721 7.548,11.373 7.947,11.09L8.157,10.941C8.415,10.758 8.772,10.788 8.996,11.013L9.336,11.352L9.336,11.351Z" style="fill-rule:evenodd" />
                    <text text-anchor="middle" x="5" y="8" style="font-size: 11px;">${s.ident}</text>
                </svg>
            `,symbol:s=>`
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <text text-anchor="middle" x="8" y="16" style="font-size: 23px;">${s.ident}</text>
                </svg>
            `}},rt=(s,t)=>{let e;return s.icon?e=s.icon:s.type==="link"?e="link":s.type==="bulletList"?e="bullet-list":s.type==="orderedList"?e="ordered-list":s.type==="btsDiv"?e="square":e="letter",C[t][e]?C[t][e](s):e},it={classic:{styles:`
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16" fill="currentColor" style="width: 24px;">
                <text text-anchor="middle" x="12" y="15" style="font-family: Times, Times New Roman, serif; font-size: 21px; letter-spacing: -1px;">Aa</text>
            </svg>
        `,attributes:`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="m491 1536 91-91-235-235-91 91v107h128v128h107Zm523-928c0-14.667-7.33-22-22-22-6.667 0-12.333 2.333-17 7l-542 542c-4.667 4.67-7 10.33-7 17 0 14.67 7.333 22 22 22 6.667 0 12.333-2.33 17-7l542-542c4.67-4.667 7-10.333 7-17Zm-54-192 416 416-832 832H128v-416l832-832Zm683 96c0 35.333-12.33 65.333-37 90l-166 166-416-416 166-165c24-25.333 54-38 90-38 35.33 0 65.67 12.667 91 38l235 234c24.67 26 37 56.333 37 91Z" transform="scale(.00893)"/>
            </svg>
        `},modern:{styles:`
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="16" viewBox="0 0 22 16" fill="currentColor" style="width: 22px;">
                <path d="M11.755,14.91C11.924,15.311 12.198,15.5 12.598,15.5C13.125,15.5 13.462,15.079 13.462,14.594C13.462,14.488 13.441,14.363 13.399,14.236L7.774,1.216C7.584,0.732 7.247,0.5 6.762,0.5C6.278,0.5 5.941,0.732 5.73,1.216L0.084,14.299C0.021,14.468 0,14.594 0,14.679C0,15.121 0.316,15.5 0.843,15.5C1.222,15.5 1.496,15.311 1.643,14.91L3.329,10.887L10.049,10.887L11.755,14.91ZM4.045,9.201L6.699,2.902L9.354,9.201L4.045,9.201ZM13.883,12.571C13.883,14.363 15.042,15.5 16.791,15.5C18.076,15.5 19.088,15.037 19.824,14.13L19.824,14.762C19.824,15.162 20.183,15.5 20.625,15.5C21.068,15.5 21.426,15.163 21.426,14.762L21.426,9.538C21.426,6.946 20.393,5.662 17.781,5.662C16.959,5.662 16.074,5.851 15.169,6.23C14.895,6.336 14.747,6.567 14.747,6.904C14.747,7.01 14.768,7.094 14.811,7.199C14.937,7.473 15.147,7.621 15.463,7.621C15.572,7.621 15.679,7.599 15.779,7.557C16.432,7.304 17.064,7.179 17.676,7.179C19.424,7.179 19.824,8.147 19.824,10.17C19.255,9.77 18.476,9.559 17.465,9.559C15.358,9.559 13.883,10.696 13.883,12.571ZM19.824,12.762C19.129,13.583 18.329,13.983 17.38,13.983C16.306,13.983 15.674,13.414 15.674,12.488C15.674,11.476 16.58,10.929 17.696,10.929C18.518,10.929 19.235,11.139 19.824,11.561L19.824,12.762Z" />
            </svg>
        `,attributes:`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M5.611,14.098L15.267,4.442C15.416,4.29 15.5,4.085 15.5,3.872C15.5,3.664 15.416,3.465 15.267,3.32L12.671,0.733C12.522,0.585 12.321,0.501 12.111,0.501C11.901,0.501 11.7,0.585 11.551,0.733L1.879,10.372C1.421,11.781 0.969,13.193 0.524,14.606C0.508,14.667 0.5,14.73 0.5,14.793C0.5,15.176 0.791,15.499 1.138,15.499C1.563,15.499 1.963,15.341 5.611,14.098ZM2.887,11.314L4.667,13.094L2.027,13.966L2.887,11.314ZM3.683,10.342L12.111,1.943L14.056,3.881L5.641,12.299L3.683,10.342Z" />
            </svg>
        `}},f=(s,t)=>it[t][s];class nt{constructor(t){b(this,"types",{heading:{tag:"h",command:"btsToggleHeading",toggleVisibility:!1},paragraph:{tag:"p",command:"btsToggleParagraph",toggleVisibility:!1},btsSpan:{tag:"span",command:"btsToggleSpan",toggleVisibility:!1},link:{tag:"a",command:"btsToggleLink",toggleVisibility:!0},bulletList:{tag:"ul",command:"btsToggleBulletList",toggleVisibility:!1},orderedList:{tag:"ol",command:"btsToggleOrderedList",toggleVisibility:!1},btsDiv:{tag:"div",command:"btsToggleDiv",toggleVisibility:!1}});t={...t,types:this.mergeTypeData(t.types)},this.bootExtensions(t).bootStyleButtons(t).bootStylesButton(t).bootAttributesButton(t).bootCss(t)}mergeTypeData(t){return Object.fromEntries(Object.entries(t).map(([e,i])=>[e,{...i,...this.types[e]}]))}bootExtensions(t){return Statamic.$bard.addExtension(({bard:e})=>S.configure({...t,bard:e})),Statamic.$bard.addExtension(({bard:e})=>M.configure({...t,bard:e})),Statamic.$bard.addExtension(()=>_),t.pro&&(Statamic.$bard.addExtension(()=>O.configure(t)),Statamic.$bard.addExtension(()=>$)),this}bootStyleButtons(t){return Statamic.$bard.buttons((e,i)=>{Object.entries(t.styles).forEach(([r,o])=>{const n=t.types[o.type],a=rt(o,t.major>=4?"modern":"classic"),l=o.type==="heading"?{[t.attr]:o[t.store],level:o.level}:{[t.attr]:o[t.store]},c={name:r,text:o.name,args:l,html:a,active:(u,h)=>u.isActive(n.key,h),visible:n.toggleVisibility?u=>u.isActive(n.key):()=>!0,btsMenuVisible:n.toggleVisibility?u=>u.isActive(n.key):()=>!0,command:(u,h)=>u.chain().focus()[n.command](h).run(),btsStyle:o};e.splice(e.indexOf(r),0,i(c))})}),this}bootStylesButton(t){return t.pro?(Statamic.$bard.buttons((e,i)=>{e.splice(e.indexOf("bts_styles"),0,i({name:"bts_styles",text:__("Style"),component:U,html:f("styles",t.major>=4?"modern":"classic"),btsOptions:t}))}),this):this}bootAttributesButton(t){return t.pro?(Statamic.$bard.buttons((e,i)=>{e.splice(e.indexOf("bts_attributes"),0,i({name:"bts_attributes",text:__("Attributes"),component:st,html:f("attributes",t.major>=4?"modern":"classic"),btsOptions:t}))}),this):this}bootCss(t){const e=[...this.gatherStyleCss(t),...t.pro?this.gatherDivCss(t):[]],i=document.createElement("style");return i.appendChild(document.createTextNode(e.join(" "))),document.head.appendChild(i),this}gatherStyleCss(t){const e=[];return Object.entries(t.styles).forEach(([i,r])=>{const o=t.types[r.type],n=r.type==="heading"?`${o.tag}${r.level}`:`${o.tag}`,a=`.bard-fieldtype-wrapper .ProseMirror ${n}[data-bts="${r[t.store]}"]`,l=`.bard-fieldtype-wrapper .ProseMirror ${n}[data-bts="${r[t.store]}"]::before`,c=`.bard-fieldtype-wrapper .bts-styles-preview[data-bts-match~="${i}"]`;e.push(...this.parseCss(a,r.cp_css||"")),e.push(...this.parseMenuCss(c,r.cp_css||"")),r.cp_badge&&e.push(`${l} { content: "${r.name}"; }`)}),e}gatherDivCss(t){const e=[],i=[".bard-fieldtype .ProseMirror >",".bard-fieldtype .ProseMirror div[data-bts] >"],r=t.major>=4?"statamic/cp/build/assets/tailwind":"statamic/cp/css/cp",o=Array.from(document.styleSheets).find(n=>n.href&&n.href.includes(r));return o&&Array.from(o.cssRules).filter(n=>n.selectorText&&n.selectorText.startsWith(i[0])).forEach(n=>e.push(n.cssText.replaceAll(i[0],i[1]))),e}parseCss(t,e){return typeof e=="string"?[`${t} { ${e} }`]:Object.entries(e).map(([i,r])=>{const o=i.includes("&")?i.replace("&",t):`${t} ${i}`,n=typeof r=="object"?Object.entries(r).map(([a,l])=>`${a}: ${l};`).join(""):r;return`${o} { ${n} }`})}parseMenuCss(t,e){return this.parseCss(t,typeof e=="string"?e:e["&"]||"")}}Statamic.booting(()=>{new nt(Statamic.$config.get("bard-texstyle"))});
