var Z=Object.defineProperty;var X=(n,e,t)=>e in n?Z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var K=(n,e,t)=>(X(n,typeof e!="symbol"?e+"":e,t),t);const addon="",{Mark:Mark$1}=Statamic.$bard.tiptap.core,Span=Mark$1.create({name:"btsSpan",parseHTML(){return[{tag:"span[data-bts-style]"}]},renderHTML({HTMLAttributes:n}){return["span",n,0]},addCommands(){return{btsToggleSpan:n=>({commands:e})=>e.toggleMark(this.name,n)}}}),{Node:Node$1}=Statamic.$bard.tiptap.core,Div=Node$1.create({name:"btsDiv",content:"block+",group:"root",defining:!1,parseHTML(){return[{tag:"div[data-bts-style]"}]},renderHTML({HTMLAttributes:n}){return["div",{class:"bard-content",...n},0]},addCommands(){return{btsToggleDiv:n=>({editor:e,commands:t})=>e.isActive(this.name,n)?t.lift(this.name):e.isActive(this.name)?t.updateAttributes(this.name,n):t.wrapIn(this.name,n)}}});function findDiffStart(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let a=0;s.text[a]==o.text[a];a++)t++;return t}if(s.content.size||o.content.size){let a=findDiffStart(s.content,o.content,t+1);if(a!=null)return a}t+=s.nodeSize}}function findDiffEnd(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let a=n.child(--s),l=e.child(--o),c=a.nodeSize;if(a==l){t-=c,r-=c;continue}if(!a.sameMarkup(l))return{a:t,b:r};if(a.isText&&a.text!=l.text){let u=0,f=Math.min(a.text.length,l.text.length);for(;u<f&&a.text[a.text.length-u-1]==l.text[l.text.length-u-1];)u++,t--,r--;return{a:t,b:r}}if(a.content.size||l.content.size){let u=findDiffEnd(a.content,l.content,t-1,r-1);if(u)return u}t-=c,r-=c}}class Fragment{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let a=0,l=0;l<t;a++){let c=this.content[a],u=l+c.nodeSize;if(u>e&&r(c,s+l,o||null,a)!==!1&&c.content.size){let f=l+1;c.nodesBetween(Math.max(0,e-f),Math.min(c.content.size,t-f),r,s+f)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",a=!0;return this.nodesBetween(e,t,(l,c)=>{l.isText?(o+=l.text.slice(Math.max(e,c)-c,t-c),a=!r):l.isLeaf?(s?o+=typeof s=="function"?s(l):s:l.type.spec.leafText&&(o+=l.type.spec.leafText(l)),a=!r):!a&&l.isBlock&&(o+=r,a=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new Fragment(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;c>e&&((a<e||c>t)&&(l.isText?l=l.cut(Math.max(0,e-a),Math.min(l.text.length,t-a)):l=l.cut(Math.max(0,e-a-1),Math.min(l.content.size,t-a-1))),r.push(l),s+=l.nodeSize),a=c}return new Fragment(r,s)}cutByIndex(e,t){return e==t?Fragment.empty:e==0&&t==this.content.length?this:new Fragment(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new Fragment(s,o)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return findDiffStart(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return findDiffEnd(this,e,t,r)}findIndex(e,t=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let o=this.child(r),a=s+o.nodeSize;if(a>=e)return a==e||t>0?retIndex(r+1,a):retIndex(r,s);s=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Fragment.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new Fragment(t||e,r)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(n,e){return found.index=n,found.offset=e,found}function compareDeep(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!compareDeep(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!compareDeep(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class Mark{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mark.none;if(e instanceof Mark)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}}Mark.none=[];class ReplaceError extends Error{}class Slice{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=insertInto(this.content,e+this.openStart,t);return r&&new Slice(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Slice(removeRange(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Slice.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new Slice(e,r,s)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:a,offset:l}=n.findIndex(t);if(s==e||o.isText){if(l!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(removeRange(o.content,e-s-1,t-s-1)))}function insertInto(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),a=n.maybeChild(s);if(o==e||a.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=insertInto(a.content,e-o-1,t);return l&&n.replaceChild(s,a.copy(l))}class NodeRange{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}class DOMParser{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let s=e.nodes[r.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new ParseContext(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ParseContext(this,t,!0);return r.addAll(e,t.from,t.to),Slice.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(matches$1(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let a=this.styles[o],l=a.style;if(!(l.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,a=0;for(;a<t.length;a++){let l=t[a];if((l.priority==null?50:l.priority)<o)break}t.splice(a,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(a=>{r(a=copy(a)),a.mark||a.ignore||a.clearMark||(a.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(a=>{r(a=copy(a)),a.node||a.ignore||a.mark||(a.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new DOMParser(e,DOMParser.schemaRules(e)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(n,e,t){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):n&&n.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:t&~OPT_OPEN_LEFT}class NodeContext{constructor(e,t,r,s,o,a,l){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=s,this.solid=o,this.options=l,this.content=[],this.activeMarks=Mark.none,this.stashMarks=[],this.match=a||(l&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Fragment.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=Fragment.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let s=r[t];(this.type?this.type.allowsMarkType(s.type):markMayApply(s.type,e))&&!s.isInSet(this.activeMarks)&&(this.activeMarks=s.addToSet(this.activeMarks),this.pendingMarks=s.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let s=t.topNode,o,a=wsOptionsFor(null,t.preserveWhitespace,0)|(r?OPT_OPEN_LEFT:0);s?o=new NodeContext(s.type,s.attrs,Mark.none,Mark.none,!0,t.topMatch||s.type.contentMatch,a):r?o=new NodeContext(null,null,Mark.none,Mark.none,!0,null,a):o=new NodeContext(e.schema.topNodeType,null,Mark.none,Mark.none,!0,null,a),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style");if(!t)this.addElement(e);else{let r=this.readStyles(parseStyles(t));if(!r)return;let[s,o]=r,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);this.addElement(e);for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&OPT_PRESERVE_WS_FULL||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&OPT_PRESERVE_WS)r.options&OPT_PRESERVE_WS_FULL?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let s=r.content[r.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),s;listTags.hasOwnProperty(r)&&this.parser.normalizeLists&&normalizeList(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,t));if(o?o.ignore:ignoreTags.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,l=this.top,c=this.needsBlock;if(blockTags.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),a&&this.sync(l),this.needsBlock=c}else this.addElementByRule(e,o,o.consuming===!1?s:void 0)}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=Mark.none,r=Mark.none;for(let s=0;s<e.length;s+=2)for(let o=void 0;;){let a=this.parser.matchStyle(e[s],e[s+1],this,o);if(!a)break;if(a.ignore)return null;if(a.clearMark?this.top.pendingMarks.forEach(l=>{a.clearMark(l)&&(r=l.addToSet(r))}):t=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(t),a.consuming===!1)o=a;else break}return[t,r]}addElementByRule(e,t,r){let s,o,a;t.node?(o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):s=this.enter(o,t.attrs||null,t.preserveWhitespace)):(a=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(a));let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c)}s&&this.sync(l)&&this.open--,a&&this.removePendingMark(a,l)}addAll(e,t,r){let s=t||0;for(let o=t?e.childNodes[t]:e.firstChild,a=r==null?null:e.childNodes[r];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o);this.findAtPoint(e,s)}findPlace(e){let t,r;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,r=o,!a.length)||o.solid)break}if(!t)return!1;this.sync(r);for(let s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let s=0;s<e.marks.length;s++)(!t.type||t.type.allowsMarkType(e.marks[s].type))&&(r=e.marks[s].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let s=this.findPlace(e.create(t));return s&&this.enterInner(e,t,!0,r),s}enterInner(e,t=null,r=!1,s){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let a=wsOptionsFor(e,s,o.options);o.options&OPT_OPEN_LEFT&&o.content.length==0&&(a|=OPT_OPEN_LEFT),this.nodes.push(new NodeContext(e,t,o.activeMarks,o.pendingMarks,r,null,a)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),a=(l,c)=>{for(;l>=0;l--){let u=t[l];if(u==""){if(l==t.length-1||l==0)continue;for(;c>=o;c--)if(a(l-1,c))return!0;return!1}else{let f=c>0||c==0&&s?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!f||f.name!=u&&f.groups.indexOf(u)==-1)return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=findSameMarkInSet(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let s=this.nodes[r];if(s.pendingMarks.lastIndexOf(e)>-1)s.pendingMarks=e.removeFromSet(s.pendingMarks);else{s.activeMarks=e.removeFromSet(s.activeMarks);let a=s.popFromStashMark(e);a&&s.type&&s.type.allowsMarkType(a.type)&&(s.activeMarks=a.addToSet(s.activeMarks))}if(s==t)break}}}function normalizeList(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&listTags.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function matches$1(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function parseStyles(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function copy(n){let e={};for(let t in n)e[t]=n[t];return e}function markMayApply(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],a=l=>{o.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:f}=l.edge(c);if(u==e||o.indexOf(f)<0&&a(f))return!0}};if(a(s.contentMatch))return!0}}function findSameMarkInSet(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(n,e){return n+e*factor16}function recoverIndex(n){return n&lower16}function recoverOffset(n){return(n-(n&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let t=0,r=recoverIndex(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+recoverOffset(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?s:0);if(c>e)break;let u=this.ranges[l+o],f=this.ranges[l+a],p=c+u;if(e<=p){let d=u?e==c?-1:e==p?1:t:t,h=c+s+(d<0?0:f);if(r)return h;let y=e==(t<0?c:p)?null:makeRecover(l/3,e-c),b=e==c?DEL_AFTER:e==p?DEL_BEFORE:DEL_ACROSS;return(t<0?e!=c:e!=p)&&(b|=DEL_SIDE),new MapResult(h,b,y)}s+=f-u}return r?e+s:new MapResult(e+s,0,null)}touches(e,t){let r=0,s=recoverIndex(t),o=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[l+o],f=c+u;if(e<=f&&l==s*3)return!0;r+=this.ranges[l+a]-u}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let a=this.ranges[s],l=a-(this.inverted?o:0),c=a+(this.inverted?0:o),u=this.ranges[s+t],f=this.ranges[s+r];e(l,l+u,c,c+f),o+=f-u}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=stepsByID[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=t,t.prototype.jsonID=e,t}}class StepResult{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,t,r,s){try{return StepResult.ok(e.replace(t,r,s))}catch(o){if(o instanceof ReplaceError)return StepResult.fail(o.message);throw o}}}function mapFragment(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(mapFragment(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return Fragment.fromArray(r)}class AddMarkStep extends Step{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new Slice(mapFragment(t.content,(a,l)=>!a.isAtom||!l.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),s),t.openStart,t.openEnd);return StepResult.fromReplace(e,this.from,this.to,o)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new AddMarkStep(t.pos,r.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(t.from,t.to,e.markFromJSON(t.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Slice(mapFragment(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return StepResult.fromReplace(e,this.from,this.to,r)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new RemoveMarkStep(t.pos,r.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(t.from,t.to,e.markFromJSON(t.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return StepResult.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new AddNodeMarkStep(this.pos,t.marks[s]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new AddNodeMarkStep(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(t.pos,e.markFromJSON(t.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return StepResult.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new RemoveNodeMarkStep(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(t.pos,e.markFromJSON(t.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ReplaceStep(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(t.from,t.to,Slice.fromJSON(e,t.slice),!!t.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,t,r,s,o,a,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=a,this.structure=l}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return StepResult.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?StepResult.fromReplace(e,this.from,this.to,r):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new ReplaceAroundStep(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(t.from,t.to,t.gapFrom,t.gapTo,Slice.fromJSON(e,t.slice),t.insert,!!t.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,s--}}return!1}function canCut(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function liftTarget(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),o=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(o,a,t))return r;if(r==0||s.type.spec.isolating||!canCut(s,o,a))break}return null}function findWrapping(n,e,t=null,r=n){let s=findWrappingOutside(n,e),o=s&&findWrappingInside(r,e);return o?s.map(withAttrs).concat({type:e,attrs:t}).concat(o.map(withAttrs)):null}function withAttrs(n){return{type:n,attrs:null}}function findWrappingOutside(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return t.canReplaceWith(r,s,a)?o:null}function findWrappingInside(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let u=r;c&&u<s;u++)c=c.matchType(t.child(u).type);return!c||!c.validEnd?null:a}function canSplit(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,a=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,f=t-2;u>o;u--,f--){let p=s.node(u),d=s.index(u);if(p.type.spec.isolating)return!1;let h=p.content.cutByIndex(d,p.childCount),y=r&&r[f]||p;if(y!=p&&(h=h.replaceChild(0,y.type.create(y.attrs))),!p.canReplace(d+1,p.childCount)||!y.type.validContent(h))return!1}let l=s.indexAfter(o),c=r&&r[0];return s.node(o).canReplaceWith(l,l,c?c.type:s.node(o+1).type)}function canJoin(n,e){let t=n.resolve(e),r=t.index();return joinable(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function joinable(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function joinPoint(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,a,l=r.index(s);if(s==r.depth?(o=r.nodeBefore,a=r.nodeAfter):t>0?(o=r.node(s+1),l++,a=r.node(s).maybeChild(l)):(o=r.node(s).maybeChild(l-1),a=r.node(s+1)),o&&!o.isTextblock&&joinable(o,a)&&r.node(s).canReplace(l,l+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function replaceStep(n,e,t=e,r=Slice.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return fitsTrivially(s,o,r)?new ReplaceStep(e,t,r):new Fitter(s,o,r).fit()}function fitsTrivially(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Fitter{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Fragment.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Fragment.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,a=r.depth,l=s.depth;for(;a&&l&&o.childCount==1;)o=o.firstChild.content,a--,l--;let c=new Slice(o,a,l);return e>-1?new ReplaceAroundStep(r.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||r.pos!=this.$to.pos?new ReplaceStep(r.pos,s.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=contentAt(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let a=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],f,p=null;if(t==1&&(a?u.matchType(a.type)||(p=u.fillBefore(Fragment.from(a),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:p};if(t==2&&a&&(f=u.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:f};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=contentAt(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=contentAt(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new Slice(dropFromFragment(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new Slice(dropFromFragment(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let b=0;b<o.length;b++)this.openFrontierNode(o[b]);let a=this.unplaced,l=r?r.content:a.content,c=a.openStart-e,u=0,f=[],{match:p,type:d}=this.frontier[t];if(s){for(let b=0;b<s.childCount;b++)f.push(s.child(b));p=p.matchFragment(s)}let h=l.size+e-(a.content.size-a.openEnd);for(;u<l.childCount;){let b=l.child(u),S=p.matchType(b.type);if(!S)break;u++,(u>1||c==0||b.content.size)&&(p=S,f.push(closeNodeStart(b.mark(d.allowedMarks(b.marks)),u==1?c:0,u==l.childCount?h:-1)))}let y=u==l.childCount;y||(h=-1),this.placed=addToFragment(this.placed,t,Fragment.from(f)),this.frontier[t].match=p,y&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,S=l;b<h;b++){let k=S.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),S=k.content}this.unplaced=y?e==0?Slice.empty:new Slice(dropFromFragment(a.content,e-1,1),e-1,h<0?a.openEnd:e-1):new Slice(dropFromFragment(a.content,e,u),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=contentAfterFits(e,t,s,r,o);if(a){for(let l=t-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],f=contentAfterFits(e,l,u,c,!0);if(!f||f.childCount)continue e}return{depth:t,fit:a,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=addToFragment(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Fragment.empty,!0);t.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,t))}}function dropFromFragment(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(dropFromFragment(n.firstChild.content,e-1,t)))}function addToFragment(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(addToFragment(n.lastChild.content,e-1,t)))}function contentAt(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function closeNodeStart(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,closeNodeStart(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Fragment.empty,!0)))),n.copy(r)}function contentAfterFits(n,e,t,r,s){let o=n.node(e),a=s?n.indexAfter(e):n.index(e);if(a==o.childCount&&!t.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,a);return l&&!invalidMarks(t,o.content,a)?l:null}function invalidMarks(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}class AttrStep extends Step{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return StepResult.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(s),0,t.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new AttrStep(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(t.pos,t.attr,t.value)}}Step.jsonID("attr",AttrStep);let TransformError=class extends Error{};TransformError=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";const classesById=Object.create(null);class Selection{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new SelectionRange(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Slice.empty){let r=t.content.lastChild,s=null;for(let l=0;l<t.openEnd;l++)s=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:c,$to:u}=a[l],f=e.mapping.slice(o);e.replaceRange(f.map(c.pos),f.map(u.pos),l?Slice.empty:t),l==0&&selectionToInsertionEnd$1(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=e.mapping.slice(r),u=c.map(a.pos),f=c.map(l.pos);o?e.deleteRange(u,f):(e.replaceRangeWith(u,f,t),selectionToInsertionEnd$1(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let a=t<0?findSelectionIn(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):findSelectionIn(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=classesById[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=t,t.prototype.jsonID=e,t}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(e,t){this.$from=e,this.$to=t}}let warnedAboutTextSelection=!1;function checkTextSelection(n){!warnedAboutTextSelection&&!n.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,t=e){checkTextSelection(e),checkTextSelection(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Selection.near(r);let s=e.resolve(t.map(this.anchor));return new TextSelection(s.parent.inlineContent?s:r,r)}replace(e,t=Slice.empty){if(super.replace(e,t),t==Slice.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=Selection.findFrom(t,r,!0)||Selection.findFrom(t,-r,!0);if(o)t=o.$head;else return Selection.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Selection.findFrom(e,-r,!0)||Selection.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new TextSelection(e,t)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,t){this.anchor=e,this.head=t}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?Selection.near(o):new NodeSelection(o)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(t.anchor))}static create(e,t){return new NodeSelection(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new TextBookmark(r,r):new NodeBookmark(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&NodeSelection.isSelectable(r)?new NodeSelection(t):Selection.near(t)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Slice.empty){if(t==Slice.empty){e.delete(0,e.doc.content.size);let r=Selection.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(n){return new AllSelection(n)}};function findSelectionIn(n,e,t,r,s,o=!1){if(e.inlineContent)return TextSelection.create(n,t);for(let a=r-(s>0?0:1);s>0?a<e.childCount:a>=0;a+=s){let l=e.child(a);if(l.isAtom){if(!o&&NodeSelection.isSelectable(l))return NodeSelection.create(n,t-(s<0?l.nodeSize:0))}else{let c=findSelectionIn(n,l,t+s,s<0?l.childCount:0,s,o);if(c)return c}t+=l.nodeSize*s}return null}function selectionToInsertionEnd$1(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof ReplaceStep||s instanceof ReplaceAroundStep))return;let o=n.mapping.maps[r],a;o.forEach((l,c,u,f)=>{a==null&&(a=f)}),n.setSelection(Selection.near(n.doc.resolve(a),t))}function bind$1(n,e){return!e||!n?n:n.bind(e)}class FieldDesc{constructor(e,t,r){this.name=e,this.init=bind$1(t.init,r),this.apply=bind$1(t.apply,r)}}new FieldDesc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new FieldDesc("selection",{init(n,e){return n.selection||Selection.atStart(e.doc)},apply(n){return n.selection}}),new FieldDesc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}});function bindProps(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=bindProps(s,e,{})),t[r]=s}return t}let Plugin$1=class{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}};const keys$1=Object.create(null);function createKey(n){return n in keys$1?n+"$"+ ++keys$1[n]:(keys$1[n]=0,n+"$")}let PluginKey$1=class{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};const deleteSelection$1=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const joinBackward$1=(n,e,t)=>{let r=atBlockStart(n,t);if(!r)return!1;let s=findCutBefore(r);if(!s){let a=r.blockRange(),l=a&&liftTarget(a);return l==null?!1:(e&&e(n.tr.lift(a,l).scrollIntoView()),!0)}let o=s.nodeBefore;if(!o.type.spec.isolating&&deleteBarrier(n,s,e))return!0;if(r.parent.content.size==0&&(textblockAt(o,"end")||NodeSelection.isSelectable(o))){let a=replaceStep(n.doc,r.before(),r.after(),Slice.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(textblockAt(o,"end")?Selection.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):NodeSelection.create(l.doc,s.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1};function textblockAt(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const selectNodeBackward$1=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=findCutBefore(r)}let a=o&&o.nodeBefore;return!a||!NodeSelection.isSelectable(a)?!1:(e&&e(n.tr.setSelection(NodeSelection.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function findCutBefore(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function atBlockEnd(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const joinForward$1=(n,e,t)=>{let r=atBlockEnd(n,t);if(!r)return!1;let s=findCutAfter(r);if(!s)return!1;let o=s.nodeAfter;if(deleteBarrier(n,s,e))return!0;if(r.parent.content.size==0&&(textblockAt(o,"start")||NodeSelection.isSelectable(o))){let a=replaceStep(n.doc,r.before(),r.after(),Slice.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(textblockAt(o,"start")?Selection.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):NodeSelection.create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=findCutAfter(r)}let a=o&&o.nodeAfter;return!a||!NodeSelection.isSelectable(a)?!1:(e&&e(n.tr.setSelection(NodeSelection.create(n.doc,o.pos)).scrollIntoView()),!0)};function findCutAfter(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const joinUp$1=(n,e)=>{let t=n.selection,r=t instanceof NodeSelection,s;if(r){if(t.node.isTextblock||!canJoin(n.doc,t.from))return!1;s=t.from}else if(s=joinPoint(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(NodeSelection.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},joinDown$1=(n,e)=>{let t=n.selection,r;if(t instanceof NodeSelection){if(t.node.isTextblock||!canJoin(n.doc,t.to))return!1;r=t.to}else if(r=joinPoint(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},lift$1=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&liftTarget(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},newlineInCode$1=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const exitCode$1=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),a=defaultBlockAt$1(s.contentMatchAt(o));if(!a||!s.canReplaceWith(o,o,a))return!1;if(e){let l=t.after(),c=n.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Selection.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},createParagraphNear$1=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof AllSelection||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=defaultBlockAt$1(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,l=n.tr.insert(a,o.createAndFill());l.setSelection(TextSelection.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},liftEmptyBlock$1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(canSplit(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&liftTarget(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)},selectParentNode$1=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(NodeSelection.create(n.doc,s))),!0)};function joinMaybeClear(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||canJoin(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function deleteBarrier(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o,a;if(r.type.spec.isolating||s.type.spec.isolating)return!1;if(joinMaybeClear(n,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(a=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let p=e.pos+s.nodeSize,d=Fragment.empty;for(let b=o.length-1;b>=0;b--)d=Fragment.from(o[b].create(null,d));d=Fragment.from(r.copy(d));let h=n.tr.step(new ReplaceAroundStep(e.pos-1,p,e.pos,p,new Slice(d,1,0),o.length,!0)),y=p+2*o.length;canJoin(h.doc,y)&&h.join(y),t(h.scrollIntoView())}return!0}let c=Selection.findFrom(e,1),u=c&&c.$from.blockRange(c.$to),f=u&&liftTarget(u);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(u,f).scrollIntoView()),!0;if(l&&textblockAt(s,"start",!0)&&textblockAt(r,"end")){let p=r,d=[];for(;d.push(p),!p.isTextblock;)p=p.lastChild;let h=s,y=1;for(;!h.isTextblock;h=h.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,h.content)){if(t){let b=Fragment.empty;for(let k=d.length-1;k>=0;k--)b=Fragment.from(d[k].copy(b));let S=n.tr.step(new ReplaceAroundStep(e.pos-d.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new Slice(b,d.length,0),0,!0));t(S.scrollIntoView())}return!0}}return!1}function selectTextblockSide(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(TextSelection.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,a=s.blockRange(o),l=a&&findWrapping(a,n,e);return l?(r&&r(t.tr.wrap(a,l).scrollIntoView()),!0):!1}}function setBlockType(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];t.doc.nodesBetween(a,l,(c,u)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(n,e)))if(c.type==n)s=!0;else{let f=t.doc.resolve(u),p=f.index();s=f.parent.canReplaceWith(p,p+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:c}}=t.selection.ranges[a];o.setBlockType(l,c,n,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,a=s.blockRange(o),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&s.node(a.depth-1).type.compatibleContent(n)&&a.startIndex==0){if(s.index(a.depth-1)==0)return!1;let f=t.doc.resolve(a.start-2);c=new NodeRange(f,f,a.depth),a.endIndex<a.parent.childCount&&(a=new NodeRange(s,t.doc.resolve(o.end(a.depth)),a.depth)),l=!0}let u=findWrapping(c,n,e,a);return u?(r&&r(doWrapInList(t.tr,a,u,l,n).scrollIntoView()),!0):!1}}function doWrapInList(n,e,t,r,s){let o=Fragment.empty;for(let f=t.length-1;f>=0;f--)o=Fragment.from(t[f].type.create(t[f].attrs,o));n.step(new ReplaceAroundStep(e.start-(r?2:0),e.end,e.start,e.end,new Slice(o,0,0),t.length,!0));let a=0;for(let f=0;f<t.length;f++)t[f].type==s&&(a=f+1);let l=t.length-a,c=e.start+t.length-(r?2:0),u=e.parent;for(let f=e.startIndex,p=e.endIndex,d=!0;f<p;f++,d=!1)!d&&canSplit(n.doc,c,l)&&(n.split(c,l),c+=2*l),c+=u.child(f).nodeSize;return n}function liftListItem$1(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,a=>a.childCount>0&&a.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?liftToOuterList(e,t,n,o):liftOutOfList(e,t,o):!0:!1}}function liftToOuterList(n,e,t,r){let s=n.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(s.step(new ReplaceAroundStep(o-1,a,o,a,new Slice(Fragment.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new NodeRange(s.doc.resolve(r.$from.pos),s.doc.resolve(a),r.depth));const l=liftTarget(r);if(l==null)return!1;s.lift(r,l);let c=s.mapping.map(o,-1)-1;return canJoin(s.doc,c)&&s.join(c),e(s.scrollIntoView()),!0}function liftOutOfList(n,e,t){let r=n.tr,s=t.parent;for(let h=t.end,y=t.endIndex-1,b=t.startIndex;y>b;y--)h-=s.child(y).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(t.start),a=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,c=t.endIndex==s.childCount,u=o.node(-1),f=o.index(-1);if(!u.canReplace(f+(l?0:1),f+1,a.content.append(c?Fragment.empty:Fragment.from(s))))return!1;let p=o.pos,d=p+a.nodeSize;return r.step(new ReplaceAroundStep(p-(l?1:0),d+(c?1:0),p+1,d-1,new Slice((l?Fragment.empty:Fragment.from(s.copy(Fragment.empty))).append(c?Fragment.empty:Fragment.from(s.copy(Fragment.empty))),l?0:1,c?0:1),l?0:1)),e(r.scrollIntoView()),!0}function sinkListItem$1(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,u=>u.childCount>0&&u.firstChild.type==n);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let l=o.parent,c=l.child(a-1);if(c.type!=n)return!1;if(t){let u=c.lastChild&&c.lastChild.type==l.type,f=Fragment.from(u?n.create():null),p=new Slice(Fragment.from(n.create(null,Fragment.from(l.type.create(null,f)))),u?3:1,0),d=o.start,h=o.end;t(e.tr.step(new ReplaceAroundStep(d-(u?3:1),h,d,h,p,1,!0)).scrollIntoView())}return!0}}function createChainableState(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}class CommandManager{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:o}=r,a=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...f)=>{const p=c(...f)(a);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:a}=s,l=[],c=!!e,u=e||o.tr,f=()=>(!c&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(u),l.every(d=>d===!0)),p={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...b)=>{const S=this.buildProps(u,t),k=h(...b)(S);return l.push(k),p}])),run:f};return p}createCan(e){const{rawCommands:t,state:r}=this,s=!1,o=e||r.tr,a=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(t).map(([c,u])=>[c,(...f)=>u(...f)({...a,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:a}=s;o.storedMarks&&e.setStoredMarks(o.storedMarks);const l={tr:e,editor:s,view:a,state:createChainableState({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,u])=>[c,(...f)=>u(...f)(l)]))}};return l}}function getExtensionField(n,e,t){return n.config[e]===void 0&&n.parent?getExtensionField(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?getExtensionField(n.parent,e,t):null}):n.config[e]}function splitExtensions(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function getNodeType(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function isFunction$3(n){return typeof n=="function"}function callOrReturn(n,e=void 0,...t){return isFunction$3(n)?e?n.bind(e)(...t):n(...t):n}function isRegExp$1(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function getType$1(n){return Object.prototype.toString.call(n).slice(8,-1)}function isPlainObject$1(n){return getType$1(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function mergeDeep(n,e){const t={...n};return isPlainObject$1(n)&&isPlainObject$1(e)&&Object.keys(e).forEach(r=>{isPlainObject$1(e[r])?r in n?t[r]=mergeDeep(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}let Extension$4=class J{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new J(e)}configure(e={}){const t=this.extend();return t.options=mergeDeep(this.options,e),t.storage=callOrReturn(getExtensionField(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new J(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=callOrReturn(getExtensionField(t,"addOptions",{name:t.name})),t.storage=callOrReturn(getExtensionField(t,"addStorage",{name:t.name,options:t.options})),t}};function getTextBetween(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:a={}}=t||{};let l="",c=!0;return n.nodesBetween(r,s,(u,f,p,d)=>{var h;const y=a==null?void 0:a[u.type.name];y?(u.isBlock&&!c&&(l+=o,c=!0),p&&(l+=y({node:u,pos:f,parent:p,index:d,range:e}))):u.isText?(l+=(h=u==null?void 0:u.text)===null||h===void 0?void 0:h.slice(Math.max(r,f)-f,s-f),c=!1):u.isBlock&&!c&&(l+=o,c=!0)}),l}function getTextSerializersFromSchema(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}Extension$4.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Plugin$1({key:new PluginKey$1("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,a=Math.min(...o.map(f=>f.$from.pos)),l=Math.max(...o.map(f=>f.$to.pos)),c=getTextSerializersFromSchema(t);return getTextBetween(r,{from:a,to:l},{textSerializers:c})}}})]}});const blur=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),clearContent=(n=!1)=>({commands:e})=>e.setContent("",n),clearNodes=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:a})=>{n.doc.nodesBetween(o.pos,a.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:f}=e,p=u.resolve(f.map(c)),d=u.resolve(f.map(c+l.nodeSize)),h=p.blockRange(d);if(!h)return;const y=liftTarget(h);if(l.type.isTextblock){const{defaultType:b}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(h.start,b)}(y||y===0)&&e.lift(h,y)})}),!0},command=n=>e=>n(e),createParagraphNear=()=>({state:n,dispatch:e})=>createParagraphNear$1(n,e),deleteCurrentNode=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const l=s.before(o),c=s.after(o);n.delete(l,c).scrollIntoView()}return!0}return!1},deleteNode=n=>({tr:e,state:t,dispatch:r})=>{const s=getNodeType(n,t.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===s){if(r){const c=o.before(a),u=o.after(a);e.delete(c,u).scrollIntoView()}return!0}return!1},deleteRange=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},deleteSelection=()=>({state:n,dispatch:e})=>deleteSelection$1(n,e),enter$1=()=>({commands:n})=>n.keyboardShortcut("Enter"),exitCode=()=>({state:n,dispatch:e})=>exitCode$1(n,e);function objectIncludes(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:isRegExp$1(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function findMarkInSet(n,e,t={}){return n.find(r=>r.type===e&&objectIncludes(r.attrs,t))}function isMarkInSet(n,e,t={}){return!!findMarkInSet(n,e,t)}function getMarkRange(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;const s=findMarkInSet([...r.node.marks],e,t);if(!s)return;let o=r.index,a=n.start()+r.offset,l=o+1,c=a+r.node.nodeSize;for(findMarkInSet([...r.node.marks],e,t);o>0&&s.isInSet(n.parent.child(o-1).marks);)o-=1,a-=n.parent.child(o).nodeSize;for(;l<n.parent.childCount&&isMarkInSet([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function getMarkType(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const extendMarkRange=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=getMarkType(n,r.schema),{doc:a,selection:l}=t,{$from:c,from:u,to:f}=l;if(s){const p=getMarkRange(c,o,e);if(p&&p.from<=u&&p.to>=f){const d=TextSelection.create(a,p.from,p.to);t.setSelection(d)}}return!0},first$1=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function isTextSelection(n){return n instanceof TextSelection}function minMax(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function resolveFocusPosition(n,e=null){if(!e)return null;const t=Selection.atStart(n),r=Selection.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?TextSelection.create(n,minMax(0,s,o),minMax(n.content.size,s,o)):TextSelection.create(n,minMax(e,s,o),minMax(e,s,o))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{isiOS()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!isTextSelection(t.state.selection))return a(),!0;const l=resolveFocusPosition(s.doc,n)||t.state.selection,c=t.state.selection.eq(l);return o&&(c||s.setSelection(l),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),a()),!0},forEach=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),insertContent=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e);function elementFromString(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function createNodeFromContent(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?Fragment.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),createNodeFromContent("",e,t)}if(typeof n=="string"){const r=DOMParser.fromSchema(e);return t.slice?r.parseSlice(elementFromString(n),t.parseOptions).content:r.parse(elementFromString(n),t.parseOptions)}return createNodeFromContent("",e,t)}function selectionToInsertionEnd(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof ReplaceStep||s instanceof ReplaceAroundStep))return;const o=n.mapping.maps[r];let a=0;o.forEach((l,c,u,f)=>{a===0&&(a=f)}),n.setSelection(Selection.near(n.doc.resolve(a),t))}const isFragment=n=>n.toString().startsWith("<"),insertContentAt=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{if(s){t={parseOptions:{},updateSelection:!0,...t};const a=createNodeFromContent(e,o.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(a.toString()==="<>")return!0;let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:n,u=!0,f=!0;if((isFragment(a)?a:[a]).forEach(d=>{d.check(),u=u?d.isText&&d.marks.length===0:!1,f=f?d.isBlock:!1}),l===c&&f){const{parent:d}=r.doc.resolve(l);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(l-=1,c+=1)}u?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),l,c):typeof e=="object"&&e&&e.text?r.insertText(e.text,l,c):r.insertText(e,l,c):r.replaceWith(l,c,a),t.updateSelection&&selectionToInsertionEnd(r,r.steps.length-1,-1)}return!0},joinUp=()=>({state:n,dispatch:e})=>joinUp$1(n,e),joinDown=()=>({state:n,dispatch:e})=>joinDown$1(n,e),joinBackward=()=>({state:n,dispatch:e})=>joinBackward$1(n,e),joinForward=()=>({state:n,dispatch:e})=>joinForward$1(n,e);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,a;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))isiOS()||isMacOS()?a=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const keyboardShortcut=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=normalizeKeyName(n).split(/-(?!$)/),a=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,l))});return c==null||c.steps.forEach(u=>{const f=u.map(r.mapping);f&&s&&r.maybeStep(f)}),!0};function isNodeActive(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,a=e?getNodeType(e,n.schema):null,l=[];n.doc.nodesBetween(r,s,(p,d)=>{if(p.isText)return;const h=Math.max(r,d),y=Math.min(s,d+p.nodeSize);l.push({node:p,from:h,to:y})});const c=s-r,u=l.filter(p=>a?a.name===p.node.type.name:!0).filter(p=>objectIncludes(p.node.attrs,t,{strict:!1}));return o?!!u.length:u.reduce((p,d)=>p+d.to-d.from,0)>=c}const lift=(n,e={})=>({state:t,dispatch:r})=>{const s=getNodeType(n,t.schema);return isNodeActive(t,s,e)?lift$1(t,r):!1},liftEmptyBlock=()=>({state:n,dispatch:e})=>liftEmptyBlock$1(n,e),liftListItem=n=>({state:e,dispatch:t})=>{const r=getNodeType(n,e.schema);return liftListItem$1(r)(e,t)},newlineInCode=()=>({state:n,dispatch:e})=>newlineInCode$1(n,e);function getSchemaTypeNameByName(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function deleteProps(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const resetAttributes=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,a=null;const l=getSchemaTypeNameByName(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(o=getNodeType(n,r.schema)),l==="mark"&&(a=getMarkType(n,r.schema)),s&&t.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,f)=>{o&&o===u.type&&t.setNodeMarkup(f,void 0,deleteProps(u.attrs,e)),a&&u.marks.length&&u.marks.forEach(p=>{a===p.type&&t.addMark(f,f+u.nodeSize,a.create(deleteProps(p.attrs,e)))})})}),!0):!1},scrollIntoView=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),selectAll=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),selectNodeBackward=()=>({state:n,dispatch:e})=>selectNodeBackward$1(n,e),selectNodeForward=()=>({state:n,dispatch:e})=>selectNodeForward$1(n,e),selectParentNode=()=>({state:n,dispatch:e})=>selectParentNode$1(n,e),selectTextblockEnd=()=>({state:n,dispatch:e})=>selectTextblockEnd$1(n,e),selectTextblockStart=()=>({state:n,dispatch:e})=>selectTextblockStart$1(n,e);function createDocument(n,e,t={}){return createNodeFromContent(n,e,{slice:!1,parseOptions:t})}const setContent=(n,e=!1,t={})=>({tr:r,editor:s,dispatch:o})=>{const{doc:a}=r,l=createDocument(n,s.schema,t);return o&&r.replaceWith(0,a.content.size,l).setMeta("preventUpdate",!e),!0};function defaultBlockAt(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function findParentNodeClosestToPos(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function findParentNode(n){return e=>findParentNodeClosestToPos(e.$from,n)}function getMarkAttributes(n,e){const t=getMarkType(e,n.schema),{from:r,to:s,empty:o}=n.selection,a=[];o?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,c=>{a.push(...c.marks)});const l=a.find(c=>c.type.name===t.name);return l?{...l.attrs}:{}}function getSplittedAttributes(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function isMarkActive(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?getMarkType(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(p=>o?o.name===p.type.name:!0).find(p=>objectIncludes(p.attrs,t,{strict:!1}));let a=0;const l=[];if(s.forEach(({$from:p,$to:d})=>{const h=p.pos,y=d.pos;n.doc.nodesBetween(h,y,(b,S)=>{if(!b.isText&&!b.marks.length)return;const k=Math.max(h,S),$=Math.min(y,S+b.nodeSize),N=$-k;a+=N,l.push(...b.marks.map(R=>({mark:R,from:k,to:$})))})}),a===0)return!1;const c=l.filter(p=>o?o.name===p.mark.type.name:!0).filter(p=>objectIncludes(p.mark.attrs,t,{strict:!1})).reduce((p,d)=>p+d.to-d.from,0),u=l.filter(p=>o?p.mark.type!==o&&p.mark.type.excludes(o):!0).reduce((p,d)=>p+d.to-d.from,0);return(c>0?c+u:c)>=a}function isList(n,e){const{nodeExtensions:t}=splitExtensions(e),r=t.find(a=>a.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=callOrReturn(getExtensionField(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function canSetMark(n,e,t){var r;const{selection:s}=e;let o=null;if(isTextSelection(s)&&(o=s.$cursor),o){const l=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(l)||!l.some(c=>c.type.excludes(t))}const{ranges:a}=s;return a.some(({$from:l,$to:c})=>{let u=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,c.pos,(f,p,d)=>{if(u)return!1;if(f.isInline){const h=!d||d.type.allowsMarkType(t),y=!!t.isInSet(f.marks)||!f.marks.some(b=>b.type.excludes(t));u=h&&y}return!u}),u})}const setMark=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:a,ranges:l}=o,c=getMarkType(n,r.schema);if(s)if(a){const u=getMarkAttributes(r,c);t.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const f=u.$from.pos,p=u.$to.pos;r.doc.nodesBetween(f,p,(d,h)=>{const y=Math.max(h,f),b=Math.min(h+d.nodeSize,p);d.marks.find(k=>k.type===c)?d.marks.forEach(k=>{c===k.type&&t.addMark(y,b,c.create({...k.attrs,...e}))}):t.addMark(y,b,c.create(e))})});return canSetMark(r,t,c)},setMeta=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),setNode=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=getNodeType(n,t.schema);return o.isTextblock?s().command(({commands:a})=>setBlockType(o,e)(t)?!0:a.clearNodes()).command(({state:a})=>setBlockType(o,e)(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=minMax(n,0,r.content.size),o=NodeSelection.create(r,s);e.setSelection(o)}return!0},setTextSelection=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,a=TextSelection.atStart(r).from,l=TextSelection.atEnd(r).to,c=minMax(s,a,l),u=minMax(o,a,l),f=TextSelection.create(r,c,u);e.setSelection(f)}return!0},sinkListItem=n=>({state:e,dispatch:t})=>{const r=getNodeType(n,e.schema);return sinkListItem$1(r)(e,t)};function ensureMarks(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const splitBlock=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:a}=e,{$from:l,$to:c}=o,u=s.extensionManager.attributes,f=getSplittedAttributes(u,l.node().type.name,l.node().attrs);if(o instanceof NodeSelection&&o.node.isBlock)return!l.parentOffset||!canSplit(a,l.pos)?!1:(r&&(n&&ensureMarks(t,s.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(r){const p=c.parentOffset===c.parent.content.size;o instanceof TextSelection&&e.deleteSelection();const d=l.depth===0?void 0:defaultBlockAt(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=p&&d?[{type:d,attrs:f}]:void 0,y=canSplit(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!y&&canSplit(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(y=!0,h=d?[{type:d,attrs:f}]:void 0),y&&(e.split(e.mapping.map(l.pos),1,h),d&&!p&&!l.parentOffset&&l.parent.type!==d)){const b=e.mapping.map(l.before()),S=e.doc.resolve(b);l.node(-1).canReplaceWith(S.index(),S.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}n&&ensureMarks(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return!0},splitListItem=n=>({tr:e,state:t,dispatch:r,editor:s})=>{var o;const a=getNodeType(n,t.schema),{$from:l,$to:c}=t.selection,u=t.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const p=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(r){let S=Fragment.empty;const k=l.index(-1)?1:l.index(-2)?2:3;for(let D=l.depth-k;D>=l.depth-3;D-=1)S=Fragment.from(l.node(D).copy(S));const $=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,N=getSplittedAttributes(p,l.node().type.name,l.node().attrs),R=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(N))||void 0;S=S.append(Fragment.from(a.createAndFill(null,R)||void 0));const M=l.before(l.depth-(k-1));e.replace(M,l.after(-$),new Slice(S,4-k,0));let P=-1;e.doc.nodesBetween(M,e.doc.content.size,(D,L)=>{if(P>-1)return!1;D.isTextblock&&D.content.size===0&&(P=L+1)}),P>-1&&e.setSelection(TextSelection.near(e.doc.resolve(P))),e.scrollIntoView()}return!0}const d=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,h=getSplittedAttributes(p,f.type.name,f.attrs),y=getSplittedAttributes(p,l.node().type.name,l.node().attrs);e.delete(l.pos,c.pos);const b=d?[{type:a,attrs:h},{type:d,attrs:y}]:[{type:a,attrs:h}];if(!canSplit(e.doc,l.pos,2))return!1;if(r){const{selection:S,storedMarks:k}=t,{splittableMarks:$}=s.extensionManager,N=k||S.$to.parentOffset&&S.$from.marks();if(e.split(l.pos,2,b).scrollIntoView(),!N||!r)return!0;const R=N.filter(M=>$.includes(M.type.name));e.ensureMarks(R)}return!0},joinListBackwards=(n,e)=>{const t=findParentNode(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&canJoin(n.doc,t.pos)&&n.join(t.pos),!0},joinListForwards=(n,e)=>{const t=findParentNode(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&canJoin(n.doc,r)&&n.join(r),!0},toggleList=(n,e,t,r={})=>({editor:s,tr:o,state:a,dispatch:l,chain:c,commands:u,can:f})=>{const{extensions:p,splittableMarks:d}=s.extensionManager,h=getNodeType(n,a.schema),y=getNodeType(e,a.schema),{selection:b,storedMarks:S}=a,{$from:k,$to:$}=b,N=k.blockRange($),R=S||b.$to.parentOffset&&b.$from.marks();if(!N)return!1;const M=findParentNode(P=>isList(P.type.name,p))(b);if(N.depth>=1&&M&&N.depth-M.depth<=1){if(M.node.type===h)return u.liftListItem(y);if(isList(M.node.type.name,p)&&h.validContent(M.node.content)&&l)return c().command(()=>(o.setNodeMarkup(M.pos,h),!0)).command(()=>joinListBackwards(o,h)).command(()=>joinListForwards(o,h)).run()}return!t||!R||!l?c().command(()=>f().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>joinListBackwards(o,h)).command(()=>joinListForwards(o,h)).run():c().command(()=>{const P=f().wrapInList(h,r),D=R.filter(L=>d.includes(L.type.name));return o.ensureMarks(D),P?!0:u.clearNodes()}).wrapInList(h,r).command(()=>joinListBackwards(o,h)).command(()=>joinListForwards(o,h)).run()},toggleMark=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,a=getMarkType(n,r.schema);return isMarkActive(r,a,e)?s.unsetMark(a,{extendEmptyMarkRange:o}):s.setMark(a,e)},toggleNode=(n,e,t={})=>({state:r,commands:s})=>{const o=getNodeType(n,r.schema),a=getNodeType(e,r.schema);return isNodeActive(r,o,t)?s.setNode(a):s.setNode(o,t)},toggleWrap=(n,e={})=>({state:t,commands:r})=>{const s=getNodeType(n,t.schema);return isNodeActive(t,s,e)?r.lift(s):r.wrapIn(s,e)},undoInputRule=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const a=n.tr,l=o.transform;for(let c=l.steps.length-1;c>=0;c-=1)a.step(l.steps[c].invert(l.docs[c]));if(o.text){const c=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,n.schema.text(o.text,c))}else a.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},unsetMark=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:l}=t,c=getMarkType(n,r.schema),{$from:u,empty:f,ranges:p}=l;if(!s)return!0;if(f&&a){let{from:d,to:h}=l;const y=(o=u.marks().find(S=>S.type===c))===null||o===void 0?void 0:o.attrs,b=getMarkRange(u,c,y);b&&(d=b.from,h=b.to),t.removeMark(d,h,c)}else p.forEach(d=>{t.removeMark(d.$from.pos,d.$to.pos,c)});return t.removeStoredMark(c),!0},updateAttributes=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,a=null;const l=getSchemaTypeNameByName(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(o=getNodeType(n,r.schema)),l==="mark"&&(a=getMarkType(n,r.schema)),s&&t.selection.ranges.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(p,d)=>{o&&o===p.type&&t.setNodeMarkup(d,void 0,{...p.attrs,...e}),a&&p.marks.length&&p.marks.forEach(h=>{if(a===h.type){const y=Math.max(d,u),b=Math.min(d+p.nodeSize,f);t.addMark(y,b,a.create({...h.attrs,...e}))}})})}),!0):!1},wrapIn=(n,e={})=>({state:t,dispatch:r})=>{const s=getNodeType(n,t.schema);return wrapIn$1(s,e)(t,r)},wrapInList=(n,e={})=>({state:t,dispatch:r})=>{const s=getNodeType(n,t.schema);return wrapInList$1(s,e)(t,r)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter:enter$1,exitCode,extendMarkRange,first:first$1,focus,forEach,insertContent,insertContentAt,joinUp,joinDown,joinBackward,joinForward,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});Extension$4.create({name:"commands",addCommands(){return{...commands}}});Extension$4.create({name:"editable",addProseMirrorPlugins(){return[new Plugin$1({key:new PluginKey$1("editable"),props:{editable:()=>this.editor.options.editable}})]}});Extension$4.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Plugin$1({key:new PluginKey$1("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});Extension$4.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:f,$anchor:p}=c,{pos:d,parent:h}=p,y=Selection.atStart(u).from===d;return!f||!y||!h.type.isTextblock||h.textContent.length?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?o:s},addProseMirrorPlugins(){return[new Plugin$1({key:new PluginKey$1("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(y=>y.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:s,from:o,to:a}=e.selection,l=Selection.atStart(e.doc).from,c=Selection.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const p=t.tr,d=createChainableState({state:t,transaction:p}),{commands:h}=new CommandManager({editor:this.editor,state:d});if(h.clearNodes(),!!p.steps.length)return p}})]}});Extension$4.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin$1({key:new PluginKey$1("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodeView{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,s,o,a,l,c;const{view:u}=this.editor,f=e.target,p=f.nodeType===3?(t=f.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):f.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(f)||!p)return;let d=0,h=0;if(this.dom!==p){const S=this.dom.getBoundingClientRect(),k=p.getBoundingClientRect(),$=(s=e.offsetX)!==null&&s!==void 0?s:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,N=(a=e.offsetY)!==null&&a!==void 0?a:(l=e.nativeEvent)===null||l===void 0?void 0:l.offsetY;d=k.x-S.x+$,h=k.y-S.y+N}(c=e.dataTransfer)===null||c===void 0||c.setDragImage(this.dom,d,h);const y=NodeSelection.create(u.state.doc,this.getPos()),b=u.state.tr.setSelection(y);u.dispatch(b)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(r))))return!1;const o=e.type.startsWith("drag"),a=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!o)return!0;const{isEditable:c}=this.editor,{isDragging:u}=this,f=!!this.node.type.spec.draggable,p=NodeSelection.isSelectable(this.node),d=e.type==="copy",h=e.type==="paste",y=e.type==="cut",b=e.type==="mousedown";if(!f&&p&&o&&e.preventDefault(),f&&o&&!u)return e.preventDefault(),!1;if(f&&c&&!u&&b){const S=r.closest("[data-drag-handle]");S&&(this.dom===S||this.dom.contains(S))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(u||a||d||h||y||b&&p)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&isiOS()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0})}deleteNode(){const e=this.getPos(),t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */var emptyObject=Object.freeze({}),isArray$1=Array.isArray;function isUndef(n){return n==null}function isDef(n){return n!=null}function isTrue(n){return n===!0}function isFalse(n){return n===!1}function isPrimitive(n){return typeof n=="string"||typeof n=="number"||typeof n=="symbol"||typeof n=="boolean"}function isFunction$2(n){return typeof n=="function"}function isObject$1(n){return n!==null&&typeof n=="object"}var _toString=Object.prototype.toString;function toRawType(n){return _toString.call(n).slice(8,-1)}function isPlainObject(n){return _toString.call(n)==="[object Object]"}function isRegExp(n){return _toString.call(n)==="[object RegExp]"}function isValidArrayIndex(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function isPromise(n){return isDef(n)&&typeof n.then=="function"&&typeof n.catch=="function"}function toString$1(n){return n==null?"":Array.isArray(n)||isPlainObject(n)&&n.toString===_toString?JSON.stringify(n,null,2):String(n)}function toNumber(n){var e=parseFloat(n);return isNaN(e)?n:e}function makeMap(n,e){for(var t=Object.create(null),r=n.split(","),s=0;s<r.length;s++)t[r[s]]=!0;return e?function(o){return t[o.toLowerCase()]}:function(o){return t[o]}}makeMap("slot,component",!0);var isReservedAttribute=makeMap("key,ref,slot,slot-scope,is");function remove$2(n,e){var t=n.length;if(t){if(e===n[t-1]){n.length=t-1;return}var r=n.indexOf(e);if(r>-1)return n.splice(r,1)}}var hasOwnProperty$1=Object.prototype.hasOwnProperty;function hasOwn(n,e){return hasOwnProperty$1.call(n,e)}function cached(n){var e=Object.create(null);return function(r){var s=e[r];return s||(e[r]=n(r))}}var camelizeRE=/-(\w)/g,camelize=cached(function(n){return n.replace(camelizeRE,function(e,t){return t?t.toUpperCase():""})}),capitalize=cached(function(n){return n.charAt(0).toUpperCase()+n.slice(1)}),hyphenateRE=/\B([A-Z])/g,hyphenate=cached(function(n){return n.replace(hyphenateRE,"-$1").toLowerCase()});function polyfillBind(n,e){function t(r){var s=arguments.length;return s?s>1?n.apply(e,arguments):n.call(e,r):n.call(e)}return t._length=n.length,t}function nativeBind(n,e){return n.bind(e)}var bind=Function.prototype.bind?nativeBind:polyfillBind;function toArray(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function extend(n,e){for(var t in e)n[t]=e[t];return n}function toObject(n){for(var e={},t=0;t<n.length;t++)n[t]&&extend(e,n[t]);return e}function noop(n,e,t){}var no=function(n,e,t){return!1},identity$1=function(n){return n};function looseEqual(n,e){if(n===e)return!0;var t=isObject$1(n),r=isObject$1(e);if(t&&r)try{var s=Array.isArray(n),o=Array.isArray(e);if(s&&o)return n.length===e.length&&n.every(function(c,u){return looseEqual(c,e[u])});if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(!s&&!o){var a=Object.keys(n),l=Object.keys(e);return a.length===l.length&&a.every(function(c){return looseEqual(n[c],e[c])})}else return!1}catch{return!1}else return!t&&!r?String(n)===String(e):!1}function looseIndexOf(n,e){for(var t=0;t<n.length;t++)if(looseEqual(n[t],e))return t;return-1}function once(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function hasChanged(n,e){return n===e?n===0&&1/n!==1/e:n===n||e===e}var SSR_ATTR="data-server-rendered",ASSET_TYPES=["component","directive","filter"],LIFECYCLE_HOOKS=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],config={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:no,isReservedAttr:no,isUnknownElement:no,getTagNamespace:noop,parsePlatformTagName:identity$1,mustUseProp:no,async:!0,_lifecycleHooks:LIFECYCLE_HOOKS},unicodeRegExp=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function isReserved(n){var e=(n+"").charCodeAt(0);return e===36||e===95}function def(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var bailRE=new RegExp("[^".concat(unicodeRegExp.source,".$_\\d]"));function parsePath(n){if(!bailRE.test(n)){var e=n.split(".");return function(t){for(var r=0;r<e.length;r++){if(!t)return;t=t[e[r]]}return t}}}var hasProto="__proto__"in{},inBrowser=typeof window<"u",UA=inBrowser&&window.navigator.userAgent.toLowerCase(),isIE=UA&&/msie|trident/.test(UA),isIE9=UA&&UA.indexOf("msie 9.0")>0,isEdge=UA&&UA.indexOf("edge/")>0;UA&&UA.indexOf("android")>0;var isIOS=UA&&/iphone|ipad|ipod|ios/.test(UA),isFF=UA&&UA.match(/firefox\/(\d+)/),nativeWatch={}.watch,supportsPassive=!1;if(inBrowser)try{var opts={};Object.defineProperty(opts,"passive",{get:function(){supportsPassive=!0}}),window.addEventListener("test-passive",null,opts)}catch{}var _isServer,isServerRendering=function(){return _isServer===void 0&&(!inBrowser&&typeof global<"u"?_isServer=global.process&&global.process.env.VUE_ENV==="server":_isServer=!1),_isServer},devtools=inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function isNative(n){return typeof n=="function"&&/native code/.test(n.toString())}var hasSymbol=typeof Symbol<"u"&&isNative(Symbol)&&typeof Reflect<"u"&&isNative(Reflect.ownKeys),_Set;typeof Set<"u"&&isNative(Set)?_Set=Set:_Set=function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(e){return this.set[e]===!0},n.prototype.add=function(e){this.set[e]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var currentInstance=null;function setCurrentInstance(n){n===void 0&&(n=null),n||currentInstance&&currentInstance._scope.off(),currentInstance=n,n&&n._scope.on()}var VNode=function(){function n(e,t,r,s,o,a,l,c){this.tag=e,this.data=t,this.children=r,this.text=s,this.elm=o,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=l,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=c,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),createEmptyVNode=function(n){n===void 0&&(n="");var e=new VNode;return e.text=n,e.isComment=!0,e};function createTextVNode(n){return new VNode(void 0,void 0,void 0,String(n))}function cloneVNode(n){var e=new VNode(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var uid$2=0,pendingCleanupDeps=[],cleanupDeps=function(){for(var n=0;n<pendingCleanupDeps.length;n++){var e=pendingCleanupDeps[n];e.subs=e.subs.filter(function(t){return t}),e._pending=!1}pendingCleanupDeps.length=0},Dep=function(){function n(){this._pending=!1,this.id=uid$2++,this.subs=[]}return n.prototype.addSub=function(e){this.subs.push(e)},n.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,pendingCleanupDeps.push(this))},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(e){for(var t=this.subs.filter(function(a){return a}),r=0,s=t.length;r<s;r++){var o=t[r];o.update()}},n}();Dep.target=null;var targetStack=[];function pushTarget(n){targetStack.push(n),Dep.target=n}function popTarget(){targetStack.pop(),Dep.target=targetStack[targetStack.length-1]}var arrayProto=Array.prototype,arrayMethods=Object.create(arrayProto),methodsToPatch=["push","pop","shift","unshift","splice","sort","reverse"];methodsToPatch.forEach(function(n){var e=arrayProto[n];def(arrayMethods,n,function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var o=e.apply(this,r),a=this.__ob__,l;switch(n){case"push":case"unshift":l=r;break;case"splice":l=r.slice(2);break}return l&&a.observeArray(l),a.dep.notify(),o})});var arrayKeys=Object.getOwnPropertyNames(arrayMethods),NO_INIITIAL_VALUE={},shouldObserve=!0;function toggleObserving(n){shouldObserve=n}var mockDep={notify:noop,depend:noop,addSub:noop,removeSub:noop},Observer=function(){function n(e,t,r){if(t===void 0&&(t=!1),r===void 0&&(r=!1),this.value=e,this.shallow=t,this.mock=r,this.dep=r?mockDep:new Dep,this.vmCount=0,def(e,"__ob__",this),isArray$1(e)){if(!r)if(hasProto)e.__proto__=arrayMethods;else for(var s=0,o=arrayKeys.length;s<o;s++){var a=arrayKeys[s];def(e,a,arrayMethods[a])}t||this.observeArray(e)}else for(var l=Object.keys(e),s=0;s<l.length;s++){var a=l[s];defineReactive(e,a,NO_INIITIAL_VALUE,void 0,t,r)}}return n.prototype.observeArray=function(e){for(var t=0,r=e.length;t<r;t++)observe(e[t],!1,this.mock)},n}();function observe(n,e,t){if(n&&hasOwn(n,"__ob__")&&n.__ob__ instanceof Observer)return n.__ob__;if(shouldObserve&&(t||!isServerRendering())&&(isArray$1(n)||isPlainObject(n))&&Object.isExtensible(n)&&!n.__v_skip&&!isRef(n)&&!(n instanceof VNode))return new Observer(n,e,t)}function defineReactive(n,e,t,r,s,o){var a=new Dep,l=Object.getOwnPropertyDescriptor(n,e);if(!(l&&l.configurable===!1)){var c=l&&l.get,u=l&&l.set;(!c||u)&&(t===NO_INIITIAL_VALUE||arguments.length===2)&&(t=n[e]);var f=!s&&observe(t,!1,o);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var d=c?c.call(n):t;return Dep.target&&(a.depend(),f&&(f.dep.depend(),isArray$1(d)&&dependArray(d))),isRef(d)&&!s?d.value:d},set:function(d){var h=c?c.call(n):t;if(hasChanged(h,d)){if(u)u.call(n,d);else{if(c)return;if(!s&&isRef(h)&&!isRef(d)){h.value=d;return}else t=d}f=!s&&observe(d,!1,o),a.notify()}}}),a}}function set(n,e,t){if(!isReadonly(n)){var r=n.__ob__;return isArray$1(n)&&isValidArrayIndex(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),r&&!r.shallow&&r.mock&&observe(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||r&&r.vmCount?t:r?(defineReactive(r.value,e,t,void 0,r.shallow,r.mock),r.dep.notify(),t):(n[e]=t,t)}}function del(n,e){if(isArray$1(n)&&isValidArrayIndex(e)){n.splice(e,1);return}var t=n.__ob__;n._isVue||t&&t.vmCount||isReadonly(n)||hasOwn(n,e)&&(delete n[e],t&&t.dep.notify())}function dependArray(n){for(var e=void 0,t=0,r=n.length;t<r;t++)e=n[t],e&&e.__ob__&&e.__ob__.dep.depend(),isArray$1(e)&&dependArray(e)}function shallowReactive(n){return makeReactive(n,!0),def(n,"__v_isShallow",!0),n}function makeReactive(n,e){isReadonly(n)||observe(n,e,isServerRendering())}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isRef(n){return!!(n&&n.__v_isRef===!0)}function proxyWithRefUnwrap(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var r=e[t];if(isRef(r))return r.value;var s=r&&r.__ob__;return s&&s.dep.depend(),r},set:function(r){var s=e[t];isRef(s)&&!isRef(r)?s.value=r:e[t]=r}})}var activeEffectScope,EffectScope=function(){function n(e){e===void 0&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}return n.prototype.run=function(e){if(this.active){var t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}},n.prototype.on=function(){activeEffectScope=this},n.prototype.off=function(){activeEffectScope=this.parent},n.prototype.stop=function(e){if(this.active){var t=void 0,r=void 0;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].teardown();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}},n}();function recordEffectScope(n,e){e===void 0&&(e=activeEffectScope),e&&e.active&&e.effects.push(n)}function resolveProvided(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var normalizeEvent=cached(function(n){var e=n.charAt(0)==="&";n=e?n.slice(1):n;var t=n.charAt(0)==="~";n=t?n.slice(1):n;var r=n.charAt(0)==="!";return n=r?n.slice(1):n,{name:n,once:t,capture:r,passive:e}});function createFnInvoker(n,e){function t(){var r=t.fns;if(isArray$1(r))for(var s=r.slice(),o=0;o<s.length;o++)invokeWithErrorHandling(s[o],null,arguments,e,"v-on handler");else return invokeWithErrorHandling(r,null,arguments,e,"v-on handler")}return t.fns=n,t}function updateListeners(n,e,t,r,s,o){var a,l,c,u;for(a in n)l=n[a],c=e[a],u=normalizeEvent(a),isUndef(l)||(isUndef(c)?(isUndef(l.fns)&&(l=n[a]=createFnInvoker(l,o)),isTrue(u.once)&&(l=n[a]=s(u.name,l,u.capture)),t(u.name,l,u.capture,u.passive,u.params)):l!==c&&(c.fns=l,n[a]=c));for(a in e)isUndef(n[a])&&(u=normalizeEvent(a),r(u.name,e[a],u.capture))}function mergeVNodeHook(n,e,t){n instanceof VNode&&(n=n.data.hook||(n.data.hook={}));var r,s=n[e];function o(){t.apply(this,arguments),remove$2(r.fns,o)}isUndef(s)?r=createFnInvoker([o]):isDef(s.fns)&&isTrue(s.merged)?(r=s,r.fns.push(o)):r=createFnInvoker([s,o]),r.merged=!0,n[e]=r}function extractPropsFromVNodeData(n,e,t){var r=e.options.props;if(!isUndef(r)){var s={},o=n.attrs,a=n.props;if(isDef(o)||isDef(a))for(var l in r){var c=hyphenate(l);checkProp(s,a,l,c,!0)||checkProp(s,o,l,c,!1)}return s}}function checkProp(n,e,t,r,s){if(isDef(e)){if(hasOwn(e,t))return n[t]=e[t],s||delete e[t],!0;if(hasOwn(e,r))return n[t]=e[r],s||delete e[r],!0}return!1}function simpleNormalizeChildren(n){for(var e=0;e<n.length;e++)if(isArray$1(n[e]))return Array.prototype.concat.apply([],n);return n}function normalizeChildren(n){return isPrimitive(n)?[createTextVNode(n)]:isArray$1(n)?normalizeArrayChildren(n):void 0}function isTextNode(n){return isDef(n)&&isDef(n.text)&&isFalse(n.isComment)}function normalizeArrayChildren(n,e){var t=[],r,s,o,a;for(r=0;r<n.length;r++)s=n[r],!(isUndef(s)||typeof s=="boolean")&&(o=t.length-1,a=t[o],isArray$1(s)?s.length>0&&(s=normalizeArrayChildren(s,"".concat(e||"","_").concat(r)),isTextNode(s[0])&&isTextNode(a)&&(t[o]=createTextVNode(a.text+s[0].text),s.shift()),t.push.apply(t,s)):isPrimitive(s)?isTextNode(a)?t[o]=createTextVNode(a.text+s):s!==""&&t.push(createTextVNode(s)):isTextNode(s)&&isTextNode(a)?t[o]=createTextVNode(a.text+s.text):(isTrue(n._isVList)&&isDef(s.tag)&&isUndef(s.key)&&isDef(e)&&(s.key="__vlist".concat(e,"_").concat(r,"__")),t.push(s)));return t}function renderList(n,e){var t=null,r,s,o,a;if(isArray$1(n)||typeof n=="string")for(t=new Array(n.length),r=0,s=n.length;r<s;r++)t[r]=e(n[r],r);else if(typeof n=="number")for(t=new Array(n),r=0;r<n;r++)t[r]=e(r+1,r);else if(isObject$1(n))if(hasSymbol&&n[Symbol.iterator]){t=[];for(var l=n[Symbol.iterator](),c=l.next();!c.done;)t.push(e(c.value,t.length)),c=l.next()}else for(o=Object.keys(n),t=new Array(o.length),r=0,s=o.length;r<s;r++)a=o[r],t[r]=e(n[a],a,r);return isDef(t)||(t=[]),t._isVList=!0,t}function renderSlot(n,e,t,r){var s=this.$scopedSlots[n],o;s?(t=t||{},r&&(t=extend(extend({},r),t)),o=s(t)||(isFunction$2(e)?e():e)):o=this.$slots[n]||(isFunction$2(e)?e():e);var a=t&&t.slot;return a?this.$createElement("template",{slot:a},o):o}function resolveFilter(n){return resolveAsset(this.$options,"filters",n)||identity$1}function isKeyNotMatch(n,e){return isArray$1(n)?n.indexOf(e)===-1:n!==e}function checkKeyCodes(n,e,t,r,s){var o=config.keyCodes[e]||t;return s&&r&&!config.keyCodes[e]?isKeyNotMatch(s,r):o?isKeyNotMatch(o,n):r?hyphenate(r)!==e:n===void 0}function bindObjectProps(n,e,t,r,s){if(t&&isObject$1(t)){isArray$1(t)&&(t=toObject(t));var o=void 0,a=function(c){if(c==="class"||c==="style"||isReservedAttribute(c))o=n;else{var u=n.attrs&&n.attrs.type;o=r||config.mustUseProp(e,u,c)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var f=camelize(c),p=hyphenate(c);if(!(f in o)&&!(p in o)&&(o[c]=t[c],s)){var d=n.on||(n.on={});d["update:".concat(c)]=function(h){t[c]=h}}};for(var l in t)a(l)}return n}function renderStatic(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),markStatic(r,"__static__".concat(n),!1)),r}function markOnce(n,e,t){return markStatic(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function markStatic(n,e,t){if(isArray$1(n))for(var r=0;r<n.length;r++)n[r]&&typeof n[r]!="string"&&markStaticNode(n[r],"".concat(e,"_").concat(r),t);else markStaticNode(n,e,t)}function markStaticNode(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function bindObjectListeners(n,e){if(e&&isPlainObject(e)){var t=n.on=n.on?extend({},n.on):{};for(var r in e){var s=t[r],o=e[r];t[r]=s?[].concat(s,o):o}}return n}function resolveScopedSlots(n,e,t,r){e=e||{$stable:!t};for(var s=0;s<n.length;s++){var o=n[s];isArray$1(o)?resolveScopedSlots(o,e,t):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function bindDynamicKeys(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];typeof r=="string"&&r&&(n[e[t]]=e[t+1])}return n}function prependModifier(n,e){return typeof n=="string"?e+n:n}function installRenderHelpers(n){n._o=markOnce,n._n=toNumber,n._s=toString$1,n._l=renderList,n._t=renderSlot,n._q=looseEqual,n._i=looseIndexOf,n._m=renderStatic,n._f=resolveFilter,n._k=checkKeyCodes,n._b=bindObjectProps,n._v=createTextVNode,n._e=createEmptyVNode,n._u=resolveScopedSlots,n._g=bindObjectListeners,n._d=bindDynamicKeys,n._p=prependModifier}function resolveSlots(n,e){if(!n||!n.length)return{};for(var t={},r=0,s=n.length;r<s;r++){var o=n[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,(o.context===e||o.fnContext===e)&&a&&a.slot!=null){var l=a.slot,c=t[l]||(t[l]=[]);o.tag==="template"?c.push.apply(c,o.children||[]):c.push(o)}else(t.default||(t.default=[])).push(o)}for(var u in t)t[u].every(isWhitespace)&&delete t[u];return t}function isWhitespace(n){return n.isComment&&!n.asyncFactory||n.text===" "}function isAsyncPlaceholder(n){return n.isComment&&n.asyncFactory}function normalizeScopedSlots(n,e,t,r){var s,o=Object.keys(t).length>0,a=e?!!e.$stable:!o,l=e&&e.$key;if(!e)s={};else{if(e._normalized)return e._normalized;if(a&&r&&r!==emptyObject&&l===r.$key&&!o&&!r.$hasNormal)return r;s={};for(var c in e)e[c]&&c[0]!=="$"&&(s[c]=normalizeScopedSlot(n,t,c,e[c]))}for(var u in t)u in s||(s[u]=proxyNormalSlot(t,u));return e&&Object.isExtensible(e)&&(e._normalized=s),def(s,"$stable",a),def(s,"$key",l),def(s,"$hasNormal",o),s}function normalizeScopedSlot(n,e,t,r){var s=function(){var o=currentInstance;setCurrentInstance(n);var a=arguments.length?r.apply(null,arguments):r({});a=a&&typeof a=="object"&&!isArray$1(a)?[a]:normalizeChildren(a);var l=a&&a[0];return setCurrentInstance(o),a&&(!l||a.length===1&&l.isComment&&!isAsyncPlaceholder(l))?void 0:a};return r.proxy&&Object.defineProperty(e,t,{get:s,enumerable:!0,configurable:!0}),s}function proxyNormalSlot(n,e){return function(){return n[e]}}function initSetup(n){var e=n.$options,t=e.setup;if(t){var r=n._setupContext=createSetupContext(n);setCurrentInstance(n),pushTarget();var s=invokeWithErrorHandling(t,null,[n._props||shallowReactive({}),r],n,"setup");if(popTarget(),setCurrentInstance(),isFunction$2(s))e.render=s;else if(isObject$1(s))if(n._setupState=s,s.__sfc){var a=n._setupProxy={};for(var o in s)o!=="__sfc"&&proxyWithRefUnwrap(a,s,o)}else for(var o in s)isReserved(o)||proxyWithRefUnwrap(n,s,o)}}function createSetupContext(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};def(e,"_v_attr_proxy",!0),syncSetupProxy(e,n.$attrs,emptyObject,n,"$attrs")}return n._attrsProxy},get listeners(){if(!n._listenersProxy){var e=n._listenersProxy={};syncSetupProxy(e,n.$listeners,emptyObject,n,"$listeners")}return n._listenersProxy},get slots(){return initSlotsProxy(n)},emit:bind(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach(function(t){return proxyWithRefUnwrap(n,e,t)})}}}function syncSetupProxy(n,e,t,r,s){var o=!1;for(var a in e)a in n?e[a]!==t[a]&&(o=!0):(o=!0,defineProxyAttr(n,a,r,s));for(var a in n)a in e||(o=!0,delete n[a]);return o}function defineProxyAttr(n,e,t,r){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[r][e]}})}function initSlotsProxy(n){return n._slotsProxy||syncSetupSlots(n._slotsProxy={},n.$scopedSlots),n._slotsProxy}function syncSetupSlots(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}function initRender(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=resolveSlots(e._renderChildren,r),n.$scopedSlots=t?normalizeScopedSlots(n.$parent,t.data.scopedSlots,n.$slots):emptyObject,n._c=function(o,a,l,c){return createElement$1(n,o,a,l,c,!1)},n.$createElement=function(o,a,l,c){return createElement$1(n,o,a,l,c,!0)};var s=t&&t.data;defineReactive(n,"$attrs",s&&s.attrs||emptyObject,null,!0),defineReactive(n,"$listeners",e._parentListeners||emptyObject,null,!0)}var currentRenderingInstance=null;function renderMixin(n){installRenderHelpers(n.prototype),n.prototype.$nextTick=function(e){return nextTick(e,this)},n.prototype._render=function(){var e=this,t=e.$options,r=t.render,s=t._parentVnode;s&&e._isMounted&&(e.$scopedSlots=normalizeScopedSlots(e.$parent,s.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&syncSetupSlots(e._slotsProxy,e.$scopedSlots)),e.$vnode=s;var o;try{setCurrentInstance(e),currentRenderingInstance=e,o=r.call(e._renderProxy,e.$createElement)}catch(a){handleError(a,e,"render"),o=e._vnode}finally{currentRenderingInstance=null,setCurrentInstance()}return isArray$1(o)&&o.length===1&&(o=o[0]),o instanceof VNode||(o=createEmptyVNode()),o.parent=s,o}}function ensureCtor(n,e){return(n.__esModule||hasSymbol&&n[Symbol.toStringTag]==="Module")&&(n=n.default),isObject$1(n)?e.extend(n):n}function createAsyncPlaceholder(n,e,t,r,s){var o=createEmptyVNode();return o.asyncFactory=n,o.asyncMeta={data:e,context:t,children:r,tag:s},o}function resolveAsyncComponent(n,e){if(isTrue(n.error)&&isDef(n.errorComp))return n.errorComp;if(isDef(n.resolved))return n.resolved;var t=currentRenderingInstance;if(t&&isDef(n.owners)&&n.owners.indexOf(t)===-1&&n.owners.push(t),isTrue(n.loading)&&isDef(n.loadingComp))return n.loadingComp;if(t&&!isDef(n.owners)){var r=n.owners=[t],s=!0,o=null,a=null;t.$on("hook:destroyed",function(){return remove$2(r,t)});var l=function(p){for(var d=0,h=r.length;d<h;d++)r[d].$forceUpdate();p&&(r.length=0,o!==null&&(clearTimeout(o),o=null),a!==null&&(clearTimeout(a),a=null))},c=once(function(p){n.resolved=ensureCtor(p,e),s?r.length=0:l(!0)}),u=once(function(p){isDef(n.errorComp)&&(n.error=!0,l(!0))}),f=n(c,u);return isObject$1(f)&&(isPromise(f)?isUndef(n.resolved)&&f.then(c,u):isPromise(f.component)&&(f.component.then(c,u),isDef(f.error)&&(n.errorComp=ensureCtor(f.error,e)),isDef(f.loading)&&(n.loadingComp=ensureCtor(f.loading,e),f.delay===0?n.loading=!0:o=setTimeout(function(){o=null,isUndef(n.resolved)&&isUndef(n.error)&&(n.loading=!0,l(!1))},f.delay||200)),isDef(f.timeout)&&(a=setTimeout(function(){a=null,isUndef(n.resolved)&&u(null)},f.timeout)))),s=!1,n.loading?n.loadingComp:n.resolved}}function getFirstComponentChild(n){if(isArray$1(n))for(var e=0;e<n.length;e++){var t=n[e];if(isDef(t)&&(isDef(t.componentOptions)||isAsyncPlaceholder(t)))return t}}var SIMPLE_NORMALIZE=1,ALWAYS_NORMALIZE=2;function createElement$1(n,e,t,r,s,o){return(isArray$1(t)||isPrimitive(t))&&(s=r,r=t,t=void 0),isTrue(o)&&(s=ALWAYS_NORMALIZE),_createElement(n,e,t,r,s)}function _createElement(n,e,t,r,s){if(isDef(t)&&isDef(t.__ob__)||(isDef(t)&&isDef(t.is)&&(e=t.is),!e))return createEmptyVNode();isArray$1(r)&&isFunction$2(r[0])&&(t=t||{},t.scopedSlots={default:r[0]},r.length=0),s===ALWAYS_NORMALIZE?r=normalizeChildren(r):s===SIMPLE_NORMALIZE&&(r=simpleNormalizeChildren(r));var o,a;if(typeof e=="string"){var l=void 0;a=n.$vnode&&n.$vnode.ns||config.getTagNamespace(e),config.isReservedTag(e)?o=new VNode(config.parsePlatformTagName(e),t,r,void 0,void 0,n):(!t||!t.pre)&&isDef(l=resolveAsset(n.$options,"components",e))?o=createComponent(l,t,n,r,e):o=new VNode(e,t,r,void 0,void 0,n)}else o=createComponent(e,t,n,r);return isArray$1(o)?o:isDef(o)?(isDef(a)&&applyNS(o,a),isDef(t)&&registerDeepBindings(t),o):createEmptyVNode()}function applyNS(n,e,t){if(n.ns=e,n.tag==="foreignObject"&&(e=void 0,t=!0),isDef(n.children))for(var r=0,s=n.children.length;r<s;r++){var o=n.children[r];isDef(o.tag)&&(isUndef(o.ns)||isTrue(t)&&o.tag!=="svg")&&applyNS(o,e,t)}}function registerDeepBindings(n){isObject$1(n.style)&&traverse(n.style),isObject$1(n.class)&&traverse(n.class)}function handleError(n,e,t){pushTarget();try{if(e)for(var r=e;r=r.$parent;){var s=r.$options.errorCaptured;if(s)for(var o=0;o<s.length;o++)try{var a=s[o].call(r,n,e,t)===!1;if(a)return}catch(l){globalHandleError(l,r,"errorCaptured hook")}}globalHandleError(n,e,t)}finally{popTarget()}}function invokeWithErrorHandling(n,e,t,r,s){var o;try{o=t?n.apply(e,t):n.call(e),o&&!o._isVue&&isPromise(o)&&!o._handled&&(o.catch(function(a){return handleError(a,r,s+" (Promise/async)")}),o._handled=!0)}catch(a){handleError(a,r,s)}return o}function globalHandleError(n,e,t){if(config.errorHandler)try{return config.errorHandler.call(null,n,e,t)}catch(r){r!==n&&logError(r)}logError(n)}function logError(n,e,t){if(inBrowser&&typeof console<"u")console.error(n);else throw n}var isUsingMicroTask=!1,callbacks=[],pending=!1;function flushCallbacks(){pending=!1;var n=callbacks.slice(0);callbacks.length=0;for(var e=0;e<n.length;e++)n[e]()}var timerFunc;if(typeof Promise<"u"&&isNative(Promise)){var p_1=Promise.resolve();timerFunc=function(){p_1.then(flushCallbacks),isIOS&&setTimeout(noop)},isUsingMicroTask=!0}else if(!isIE&&typeof MutationObserver<"u"&&(isNative(MutationObserver)||MutationObserver.toString()==="[object MutationObserverConstructor]")){var counter_1=1,observer=new MutationObserver(flushCallbacks),textNode_1=document.createTextNode(String(counter_1));observer.observe(textNode_1,{characterData:!0}),timerFunc=function(){counter_1=(counter_1+1)%2,textNode_1.data=String(counter_1)},isUsingMicroTask=!0}else typeof setImmediate<"u"&&isNative(setImmediate)?timerFunc=function(){setImmediate(flushCallbacks)}:timerFunc=function(){setTimeout(flushCallbacks,0)};function nextTick(n,e){var t;if(callbacks.push(function(){if(n)try{n.call(e)}catch(r){handleError(r,e,"nextTick")}else t&&t(e)}),pending||(pending=!0,timerFunc()),!n&&typeof Promise<"u")return new Promise(function(r){t=r})}var version="2.7.14",seenObjects=new _Set;function traverse(n){return _traverse(n,seenObjects),seenObjects.clear(),n}function _traverse(n,e){var t,r,s=isArray$1(n);if(!(!s&&!isObject$1(n)||n.__v_skip||Object.isFrozen(n)||n instanceof VNode)){if(n.__ob__){var o=n.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(s)for(t=n.length;t--;)_traverse(n[t],e);else if(isRef(n))_traverse(n.value,e);else for(r=Object.keys(n),t=r.length;t--;)_traverse(n[r[t]],e)}}var uid$1=0,Watcher=function(){function n(e,t,r,s,o){recordEffectScope(this,activeEffectScope&&!activeEffectScope._vm?activeEffectScope:e?e._scope:void 0),(this.vm=e)&&o&&(e._watcher=this),s?(this.deep=!!s.deep,this.user=!!s.user,this.lazy=!!s.lazy,this.sync=!!s.sync,this.before=s.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++uid$1,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new _Set,this.newDepIds=new _Set,this.expression="",isFunction$2(t)?this.getter=t:(this.getter=parsePath(t),this.getter||(this.getter=noop)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){pushTarget(this);var e,t=this.vm;try{e=this.getter.call(t,t)}catch(r){if(this.user)handleError(r,t,'getter for watcher "'.concat(this.expression,'"'));else throw r}finally{this.deep&&traverse(e),popTarget(),this.cleanupDeps()}return e},n.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},n.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():queueWatcher(this)},n.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||isObject$1(e)||this.deep){var t=this.value;if(this.value=e,this.user){var r='callback for watcher "'.concat(this.expression,'"');invokeWithErrorHandling(this.cb,this.vm,[e,t],this.vm,r)}else this.cb.call(this.vm,e,t)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&remove$2(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function initEvents(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&updateComponentListeners(n,e)}var target$1;function add$1(n,e){target$1.$on(n,e)}function remove$1(n,e){target$1.$off(n,e)}function createOnceHandler$1(n,e){var t=target$1;return function r(){var s=e.apply(null,arguments);s!==null&&t.$off(n,r)}}function updateComponentListeners(n,e,t){target$1=n,updateListeners(e,t||{},add$1,remove$1,createOnceHandler$1,n),target$1=void 0}function eventsMixin(n){var e=/^hook:/;n.prototype.$on=function(t,r){var s=this;if(isArray$1(t))for(var o=0,a=t.length;o<a;o++)s.$on(t[o],r);else(s._events[t]||(s._events[t]=[])).push(r),e.test(t)&&(s._hasHookEvent=!0);return s},n.prototype.$once=function(t,r){var s=this;function o(){s.$off(t,o),r.apply(s,arguments)}return o.fn=r,s.$on(t,o),s},n.prototype.$off=function(t,r){var s=this;if(!arguments.length)return s._events=Object.create(null),s;if(isArray$1(t)){for(var o=0,a=t.length;o<a;o++)s.$off(t[o],r);return s}var l=s._events[t];if(!l)return s;if(!r)return s._events[t]=null,s;for(var c,u=l.length;u--;)if(c=l[u],c===r||c.fn===r){l.splice(u,1);break}return s},n.prototype.$emit=function(t){var r=this,s=r._events[t];if(s){s=s.length>1?toArray(s):s;for(var o=toArray(arguments,1),a='event handler for "'.concat(t,'"'),l=0,c=s.length;l<c;l++)invokeWithErrorHandling(s[l],r,o,r,a)}return r}}var activeInstance=null;function setActiveInstance(n){var e=activeInstance;return activeInstance=n,function(){activeInstance=e}}function initLifecycle(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}function lifecycleMixin(n){n.prototype._update=function(e,t){var r=this,s=r.$el,o=r._vnode,a=setActiveInstance(r);r._vnode=e,o?r.$el=r.__patch__(o,e):r.$el=r.__patch__(r.$el,e,t,!1),a(),s&&(s.__vue__=null),r.$el&&(r.$el.__vue__=r);for(var l=r;l&&l.$vnode&&l.$parent&&l.$vnode===l.$parent._vnode;)l.$parent.$el=l.$el,l=l.$parent},n.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},n.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){callHook$1(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;t&&!t._isBeingDestroyed&&!e.$options.abstract&&remove$2(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),callHook$1(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function mountComponent(n,e,t){n.$el=e,n.$options.render||(n.$options.render=createEmptyVNode),callHook$1(n,"beforeMount");var r;r=function(){n._update(n._render(),t)};var s={before:function(){n._isMounted&&!n._isDestroyed&&callHook$1(n,"beforeUpdate")}};new Watcher(n,r,noop,s,!0),t=!1;var o=n._preWatchers;if(o)for(var a=0;a<o.length;a++)o[a].run();return n.$vnode==null&&(n._isMounted=!0,callHook$1(n,"mounted")),n}function updateChildComponent(n,e,t,r,s){var o=r.data.scopedSlots,a=n.$scopedSlots,l=!!(o&&!o.$stable||a!==emptyObject&&!a.$stable||o&&n.$scopedSlots.$key!==o.$key||!o&&n.$scopedSlots.$key),c=!!(s||n.$options._renderChildren||l),u=n.$vnode;n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r),n.$options._renderChildren=s;var f=r.data.attrs||emptyObject;n._attrsProxy&&syncSetupProxy(n._attrsProxy,f,u.data&&u.data.attrs||emptyObject,n,"$attrs")&&(c=!0),n.$attrs=f,t=t||emptyObject;var p=n.$options._parentListeners;if(n._listenersProxy&&syncSetupProxy(n._listenersProxy,t,p||emptyObject,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,updateComponentListeners(n,t,p),e&&n.$options.props){toggleObserving(!1);for(var d=n._props,h=n.$options._propKeys||[],y=0;y<h.length;y++){var b=h[y],S=n.$options.props;d[b]=validateProp(b,S,e,n)}toggleObserving(!0),n.$options.propsData=e}c&&(n.$slots=resolveSlots(s,r.context),n.$forceUpdate())}function isInInactiveTree(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function activateChildComponent(n,e){if(e){if(n._directInactive=!1,isInInactiveTree(n))return}else if(n._directInactive)return;if(n._inactive||n._inactive===null){n._inactive=!1;for(var t=0;t<n.$children.length;t++)activateChildComponent(n.$children[t]);callHook$1(n,"activated")}}function deactivateChildComponent(n,e){if(!(e&&(n._directInactive=!0,isInInactiveTree(n)))&&!n._inactive){n._inactive=!0;for(var t=0;t<n.$children.length;t++)deactivateChildComponent(n.$children[t]);callHook$1(n,"deactivated")}}function callHook$1(n,e,t,r){r===void 0&&(r=!0),pushTarget();var s=currentInstance;r&&setCurrentInstance(n);var o=n.$options[e],a="".concat(e," hook");if(o)for(var l=0,c=o.length;l<c;l++)invokeWithErrorHandling(o[l],n,t||null,n,a);n._hasHookEvent&&n.$emit("hook:"+e),r&&setCurrentInstance(s),popTarget()}var queue=[],activatedChildren=[],has$1={},waiting=!1,flushing=!1,index=0;function resetSchedulerState(){index=queue.length=activatedChildren.length=0,has$1={},waiting=flushing=!1}var currentFlushTimestamp=0,getNow=Date.now;if(inBrowser&&!isIE){var performance_1=window.performance;performance_1&&typeof performance_1.now=="function"&&getNow()>document.createEvent("Event").timeStamp&&(getNow=function(){return performance_1.now()})}var sortCompareFn=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function flushSchedulerQueue(){currentFlushTimestamp=getNow(),flushing=!0;var n,e;for(queue.sort(sortCompareFn),index=0;index<queue.length;index++)n=queue[index],n.before&&n.before(),e=n.id,has$1[e]=null,n.run();var t=activatedChildren.slice(),r=queue.slice();resetSchedulerState(),callActivatedHooks(t),callUpdatedHooks(r),cleanupDeps(),devtools&&config.devtools&&devtools.emit("flush")}function callUpdatedHooks(n){for(var e=n.length;e--;){var t=n[e],r=t.vm;r&&r._watcher===t&&r._isMounted&&!r._isDestroyed&&callHook$1(r,"updated")}}function queueActivatedComponent(n){n._inactive=!1,activatedChildren.push(n)}function callActivatedHooks(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,activateChildComponent(n[e],!0)}function queueWatcher(n){var e=n.id;if(has$1[e]==null&&!(n===Dep.target&&n.noRecurse)){if(has$1[e]=!0,!flushing)queue.push(n);else{for(var t=queue.length-1;t>index&&queue[t].id>n.id;)t--;queue.splice(t+1,0,n)}waiting||(waiting=!0,nextTick(flushSchedulerQueue))}}function initProvide(n){var e=n.$options.provide;if(e){var t=isFunction$2(e)?e.call(n):e;if(!isObject$1(t))return;for(var r=resolveProvided(n),s=hasSymbol?Reflect.ownKeys(t):Object.keys(t),o=0;o<s.length;o++){var a=s[o];Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))}}}function initInjections(n){var e=resolveInject(n.$options.inject,n);e&&(toggleObserving(!1),Object.keys(e).forEach(function(t){defineReactive(n,t,e[t])}),toggleObserving(!0))}function resolveInject(n,e){if(n){for(var t=Object.create(null),r=hasSymbol?Reflect.ownKeys(n):Object.keys(n),s=0;s<r.length;s++){var o=r[s];if(o!=="__ob__"){var a=n[o].from;if(a in e._provided)t[o]=e._provided[a];else if("default"in n[o]){var l=n[o].default;t[o]=isFunction$2(l)?l.call(e):l}}}return t}}function FunctionalRenderContext(n,e,t,r,s){var o=this,a=s.options,l;hasOwn(r,"_uid")?(l=Object.create(r),l._original=r):(l=r,r=r._original);var c=isTrue(a._compiled),u=!c;this.data=n,this.props=e,this.children=t,this.parent=r,this.listeners=n.on||emptyObject,this.injections=resolveInject(a.inject,r),this.slots=function(){return o.$slots||normalizeScopedSlots(r,n.scopedSlots,o.$slots=resolveSlots(t,r)),o.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return normalizeScopedSlots(r,n.scopedSlots,this.slots())}}),c&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=normalizeScopedSlots(r,n.scopedSlots,this.$slots)),a._scopeId?this._c=function(f,p,d,h){var y=createElement$1(l,f,p,d,h,u);return y&&!isArray$1(y)&&(y.fnScopeId=a._scopeId,y.fnContext=r),y}:this._c=function(f,p,d,h){return createElement$1(l,f,p,d,h,u)}}installRenderHelpers(FunctionalRenderContext.prototype);function createFunctionalComponent(n,e,t,r,s){var o=n.options,a={},l=o.props;if(isDef(l))for(var c in l)a[c]=validateProp(c,l,e||emptyObject);else isDef(t.attrs)&&mergeProps(a,t.attrs),isDef(t.props)&&mergeProps(a,t.props);var u=new FunctionalRenderContext(t,a,s,r,n),f=o.render.call(null,u._c,u);if(f instanceof VNode)return cloneAndMarkFunctionalResult(f,t,u.parent,o);if(isArray$1(f)){for(var p=normalizeChildren(f)||[],d=new Array(p.length),h=0;h<p.length;h++)d[h]=cloneAndMarkFunctionalResult(p[h],t,u.parent,o);return d}}function cloneAndMarkFunctionalResult(n,e,t,r,s){var o=cloneVNode(n);return o.fnContext=t,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function mergeProps(n,e){for(var t in e)n[camelize(t)]=e[t]}function getComponentName(n){return n.name||n.__name||n._componentTag}var componentVNodeHooks={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;componentVNodeHooks.prepatch(t,t)}else{var r=n.componentInstance=createComponentInstanceForVnode(n,activeInstance);r.$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions,r=e.componentInstance=n.componentInstance;updateChildComponent(r,t.propsData,t.listeners,e,t.children)},insert:function(n){var e=n.context,t=n.componentInstance;t._isMounted||(t._isMounted=!0,callHook$1(t,"mounted")),n.data.keepAlive&&(e._isMounted?queueActivatedComponent(t):activateChildComponent(t,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?deactivateChildComponent(e,!0):e.$destroy())}},hooksToMerge=Object.keys(componentVNodeHooks);function createComponent(n,e,t,r,s){if(!isUndef(n)){var o=t.$options._base;if(isObject$1(n)&&(n=o.extend(n)),typeof n=="function"){var a;if(isUndef(n.cid)&&(a=n,n=resolveAsyncComponent(a,o),n===void 0))return createAsyncPlaceholder(a,e,t,r,s);e=e||{},resolveConstructorOptions(n),isDef(e.model)&&transformModel(n.options,e);var l=extractPropsFromVNodeData(e,n);if(isTrue(n.options.functional))return createFunctionalComponent(n,l,e,t,r);var c=e.on;if(e.on=e.nativeOn,isTrue(n.options.abstract)){var u=e.slot;e={},u&&(e.slot=u)}installComponentHooks(e);var f=getComponentName(n.options)||s,p=new VNode("vue-component-".concat(n.cid).concat(f?"-".concat(f):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:l,listeners:c,tag:s,children:r},a);return p}}}function createComponentInstanceForVnode(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;return isDef(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns),new n.componentOptions.Ctor(t)}function installComponentHooks(n){for(var e=n.hook||(n.hook={}),t=0;t<hooksToMerge.length;t++){var r=hooksToMerge[t],s=e[r],o=componentVNodeHooks[r];s!==o&&!(s&&s._merged)&&(e[r]=s?mergeHook(o,s):o)}}function mergeHook(n,e){var t=function(r,s){n(r,s),e(r,s)};return t._merged=!0,t}function transformModel(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var s=e.on||(e.on={}),o=s[r],a=e.model.callback;isDef(o)?(isArray$1(o)?o.indexOf(a)===-1:o!==a)&&(s[r]=[a].concat(o)):s[r]=a}var warn=noop,strats=config.optionMergeStrategies;function mergeData(n,e,t){if(t===void 0&&(t=!0),!e)return n;for(var r,s,o,a=hasSymbol?Reflect.ownKeys(e):Object.keys(e),l=0;l<a.length;l++)r=a[l],r!=="__ob__"&&(s=n[r],o=e[r],!t||!hasOwn(n,r)?set(n,r,o):s!==o&&isPlainObject(s)&&isPlainObject(o)&&mergeData(s,o));return n}function mergeDataOrFn(n,e,t){return t?function(){var s=isFunction$2(e)?e.call(t,t):e,o=isFunction$2(n)?n.call(t,t):n;return s?mergeData(s,o):o}:e?n?function(){return mergeData(isFunction$2(e)?e.call(this,this):e,isFunction$2(n)?n.call(this,this):n)}:e:n}strats.data=function(n,e,t){return t?mergeDataOrFn(n,e,t):e&&typeof e!="function"?n:mergeDataOrFn(n,e)};function mergeLifecycleHook(n,e){var t=e?n?n.concat(e):isArray$1(e)?e:[e]:n;return t&&dedupeHooks(t)}function dedupeHooks(n){for(var e=[],t=0;t<n.length;t++)e.indexOf(n[t])===-1&&e.push(n[t]);return e}LIFECYCLE_HOOKS.forEach(function(n){strats[n]=mergeLifecycleHook});function mergeAssets(n,e,t,r){var s=Object.create(n||null);return e?extend(s,e):s}ASSET_TYPES.forEach(function(n){strats[n+"s"]=mergeAssets});strats.watch=function(n,e,t,r){if(n===nativeWatch&&(n=void 0),e===nativeWatch&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var s={};extend(s,n);for(var o in e){var a=s[o],l=e[o];a&&!isArray$1(a)&&(a=[a]),s[o]=a?a.concat(l):isArray$1(l)?l:[l]}return s};strats.props=strats.methods=strats.inject=strats.computed=function(n,e,t,r){if(!n)return e;var s=Object.create(null);return extend(s,n),e&&extend(s,e),s};strats.provide=function(n,e){return n?function(){var t=Object.create(null);return mergeData(t,isFunction$2(n)?n.call(this):n),e&&mergeData(t,isFunction$2(e)?e.call(this):e,!1),t}:e};var defaultStrat=function(n,e){return e===void 0?n:e};function normalizeProps(n,e){var t=n.props;if(t){var r={},s,o,a;if(isArray$1(t))for(s=t.length;s--;)o=t[s],typeof o=="string"&&(a=camelize(o),r[a]={type:null});else if(isPlainObject(t))for(var l in t)o=t[l],a=camelize(l),r[a]=isPlainObject(o)?o:{type:o};n.props=r}}function normalizeInject(n,e){var t=n.inject;if(t){var r=n.inject={};if(isArray$1(t))for(var s=0;s<t.length;s++)r[t[s]]={from:t[s]};else if(isPlainObject(t))for(var o in t){var a=t[o];r[o]=isPlainObject(a)?extend({from:o},a):{from:a}}}}function normalizeDirectives$1(n){var e=n.directives;if(e)for(var t in e){var r=e[t];isFunction$2(r)&&(e[t]={bind:r,update:r})}}function assertObjectType(n,e,t){isPlainObject(e)||warn('Invalid value for option "'.concat(n,'": expected an Object, ')+"but got ".concat(toRawType(e),"."))}function mergeOptions(n,e,t){if(isFunction$2(e)&&(e=e.options),normalizeProps(e),normalizeInject(e),normalizeDirectives$1(e),!e._base&&(e.extends&&(n=mergeOptions(n,e.extends,t)),e.mixins))for(var r=0,s=e.mixins.length;r<s;r++)n=mergeOptions(n,e.mixins[r],t);var o={},a;for(a in n)l(a);for(a in e)hasOwn(n,a)||l(a);function l(c){var u=strats[c]||defaultStrat;o[c]=u(n[c],e[c],t,c)}return o}function resolveAsset(n,e,t,r){if(typeof t=="string"){var s=n[e];if(hasOwn(s,t))return s[t];var o=camelize(t);if(hasOwn(s,o))return s[o];var a=capitalize(o);if(hasOwn(s,a))return s[a];var l=s[t]||s[o]||s[a];return l}}function validateProp(n,e,t,r){var s=e[n],o=!hasOwn(t,n),a=t[n],l=getTypeIndex(Boolean,s.type);if(l>-1){if(o&&!hasOwn(s,"default"))a=!1;else if(a===""||a===hyphenate(n)){var c=getTypeIndex(String,s.type);(c<0||l<c)&&(a=!0)}}if(a===void 0){a=getPropDefaultValue(r,s,n);var u=shouldObserve;toggleObserving(!0),observe(a),toggleObserving(u)}return a}function getPropDefaultValue(n,e,t){if(hasOwn(e,"default")){var r=e.default;return n&&n.$options.propsData&&n.$options.propsData[t]===void 0&&n._props[t]!==void 0?n._props[t]:isFunction$2(r)&&getType(e.type)!=="Function"?r.call(n):r}}var functionTypeCheckRE=/^\s*function (\w+)/;function getType(n){var e=n&&n.toString().match(functionTypeCheckRE);return e?e[1]:""}function isSameType(n,e){return getType(n)===getType(e)}function getTypeIndex(n,e){if(!isArray$1(e))return isSameType(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(isSameType(e[t],n))return t;return-1}var sharedPropertyDefinition={enumerable:!0,configurable:!0,get:noop,set:noop};function proxy(n,e,t){sharedPropertyDefinition.get=function(){return this[e][t]},sharedPropertyDefinition.set=function(s){this[e][t]=s},Object.defineProperty(n,t,sharedPropertyDefinition)}function initState(n){var e=n.$options;if(e.props&&initProps$1(n,e.props),initSetup(n),e.methods&&initMethods(n,e.methods),e.data)initData(n);else{var t=observe(n._data={});t&&t.vmCount++}e.computed&&initComputed$1(n,e.computed),e.watch&&e.watch!==nativeWatch&&initWatch(n,e.watch)}function initProps$1(n,e){var t=n.$options.propsData||{},r=n._props=shallowReactive({}),s=n.$options._propKeys=[],o=!n.$parent;o||toggleObserving(!1);var a=function(c){s.push(c);var u=validateProp(c,e,t,n);defineReactive(r,c,u),c in n||proxy(n,"_props",c)};for(var l in e)a(l);toggleObserving(!0)}function initData(n){var e=n.$options.data;e=n._data=isFunction$2(e)?getData(e,n):e||{},isPlainObject(e)||(e={});var t=Object.keys(e),r=n.$options.props;n.$options.methods;for(var s=t.length;s--;){var o=t[s];r&&hasOwn(r,o)||isReserved(o)||proxy(n,"_data",o)}var a=observe(e);a&&a.vmCount++}function getData(n,e){pushTarget();try{return n.call(e,e)}catch(t){return handleError(t,e,"data()"),{}}finally{popTarget()}}var computedWatcherOptions={lazy:!0};function initComputed$1(n,e){var t=n._computedWatchers=Object.create(null),r=isServerRendering();for(var s in e){var o=e[s],a=isFunction$2(o)?o:o.get;r||(t[s]=new Watcher(n,a||noop,noop,computedWatcherOptions)),s in n||defineComputed(n,s,o)}}function defineComputed(n,e,t){var r=!isServerRendering();isFunction$2(t)?(sharedPropertyDefinition.get=r?createComputedGetter(e):createGetterInvoker(t),sharedPropertyDefinition.set=noop):(sharedPropertyDefinition.get=t.get?r&&t.cache!==!1?createComputedGetter(e):createGetterInvoker(t.get):noop,sharedPropertyDefinition.set=t.set||noop),Object.defineProperty(n,e,sharedPropertyDefinition)}function createComputedGetter(n){return function(){var t=this._computedWatchers&&this._computedWatchers[n];if(t)return t.dirty&&t.evaluate(),Dep.target&&t.depend(),t.value}}function createGetterInvoker(n){return function(){return n.call(this,this)}}function initMethods(n,e){n.$options.props;for(var t in e)n[t]=typeof e[t]!="function"?noop:bind(e[t],n)}function initWatch(n,e){for(var t in e){var r=e[t];if(isArray$1(r))for(var s=0;s<r.length;s++)createWatcher(n,t,r[s]);else createWatcher(n,t,r)}}function createWatcher(n,e,t,r){return isPlainObject(t)&&(r=t,t=t.handler),typeof t=="string"&&(t=n[t]),n.$watch(e,t,r)}function stateMixin(n){var e={};e.get=function(){return this._data};var t={};t.get=function(){return this._props},Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=set,n.prototype.$delete=del,n.prototype.$watch=function(r,s,o){var a=this;if(isPlainObject(s))return createWatcher(a,r,s,o);o=o||{},o.user=!0;var l=new Watcher(a,r,s,o);if(o.immediate){var c='callback for immediate watcher "'.concat(l.expression,'"');pushTarget(),invokeWithErrorHandling(s,a,[l.value],a,c),popTarget()}return function(){l.teardown()}}}var uid=0;function initMixin$1(n){n.prototype._init=function(e){var t=this;t._uid=uid++,t._isVue=!0,t.__v_skip=!0,t._scope=new EffectScope(!0),t._scope._vm=!0,e&&e._isComponent?initInternalComponent(t,e):t.$options=mergeOptions(resolveConstructorOptions(t.constructor),e||{},t),t._renderProxy=t,t._self=t,initLifecycle(t),initEvents(t),initRender(t),callHook$1(t,"beforeCreate",void 0,!1),initInjections(t),initState(t),initProvide(t),callHook$1(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function initInternalComponent(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var s=r.componentOptions;t.propsData=s.propsData,t._parentListeners=s.listeners,t._renderChildren=s.children,t._componentTag=s.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}function resolveConstructorOptions(n){var e=n.options;if(n.super){var t=resolveConstructorOptions(n.super),r=n.superOptions;if(t!==r){n.superOptions=t;var s=resolveModifiedOptions(n);s&&extend(n.extendOptions,s),e=n.options=mergeOptions(t,n.extendOptions),e.name&&(e.components[e.name]=n)}}return e}function resolveModifiedOptions(n){var e,t=n.options,r=n.sealedOptions;for(var s in t)t[s]!==r[s]&&(e||(e={}),e[s]=t[s]);return e}function Vue(n){this._init(n)}initMixin$1(Vue);stateMixin(Vue);eventsMixin(Vue);lifecycleMixin(Vue);renderMixin(Vue);function initUse(n){n.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var r=toArray(arguments,1);return r.unshift(this),isFunction$2(e.install)?e.install.apply(e,r):isFunction$2(e)&&e.apply(null,r),t.push(e),this}}function initMixin(n){n.mixin=function(e){return this.options=mergeOptions(this.options,e),this}}function initExtend(n){n.cid=0;var e=1;n.extend=function(t){t=t||{};var r=this,s=r.cid,o=t._Ctor||(t._Ctor={});if(o[s])return o[s];var a=getComponentName(t)||getComponentName(r.options),l=function(u){this._init(u)};return l.prototype=Object.create(r.prototype),l.prototype.constructor=l,l.cid=e++,l.options=mergeOptions(r.options,t),l.super=r,l.options.props&&initProps(l),l.options.computed&&initComputed(l),l.extend=r.extend,l.mixin=r.mixin,l.use=r.use,ASSET_TYPES.forEach(function(c){l[c]=r[c]}),a&&(l.options.components[a]=l),l.superOptions=r.options,l.extendOptions=t,l.sealedOptions=extend({},l.options),o[s]=l,l}}function initProps(n){var e=n.options.props;for(var t in e)proxy(n.prototype,"_props",t)}function initComputed(n){var e=n.options.computed;for(var t in e)defineComputed(n.prototype,t,e[t])}function initAssetRegisters(n){ASSET_TYPES.forEach(function(e){n[e]=function(t,r){return r?(e==="component"&&isPlainObject(r)&&(r.name=r.name||t,r=this.options._base.extend(r)),e==="directive"&&isFunction$2(r)&&(r={bind:r,update:r}),this.options[e+"s"][t]=r,r):this.options[e+"s"][t]}})}function _getComponentName(n){return n&&(getComponentName(n.Ctor.options)||n.tag)}function matches(n,e){return isArray$1(n)?n.indexOf(e)>-1:typeof n=="string"?n.split(",").indexOf(e)>-1:isRegExp(n)?n.test(e):!1}function pruneCache(n,e){var t=n.cache,r=n.keys,s=n._vnode;for(var o in t){var a=t[o];if(a){var l=a.name;l&&!e(l)&&pruneCacheEntry(t,o,r,s)}}}function pruneCacheEntry(n,e,t,r){var s=n[e];s&&(!r||s.tag!==r.tag)&&s.componentInstance.$destroy(),n[e]=null,remove$2(t,e)}var patternTypes=[String,RegExp,Array],KeepAlive={name:"keep-alive",abstract:!0,props:{include:patternTypes,exclude:patternTypes,max:[String,Number]},methods:{cacheVNode:function(){var n=this,e=n.cache,t=n.keys,r=n.vnodeToCache,s=n.keyToCache;if(r){var o=r.tag,a=r.componentInstance,l=r.componentOptions;e[s]={name:_getComponentName(l),tag:o,componentInstance:a},t.push(s),this.max&&t.length>parseInt(this.max)&&pruneCacheEntry(e,t[0],t,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)pruneCacheEntry(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",function(e){pruneCache(n,function(t){return matches(e,t)})}),this.$watch("exclude",function(e){pruneCache(n,function(t){return!matches(e,t)})})},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=getFirstComponentChild(n),t=e&&e.componentOptions;if(t){var r=_getComponentName(t),s=this,o=s.include,a=s.exclude;if(o&&(!r||!matches(o,r))||a&&r&&matches(a,r))return e;var l=this,c=l.cache,u=l.keys,f=e.key==null?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;c[f]?(e.componentInstance=c[f].componentInstance,remove$2(u,f),u.push(f)):(this.vnodeToCache=e,this.keyToCache=f),e.data.keepAlive=!0}return e||n&&n[0]}},builtInComponents={KeepAlive};function initGlobalAPI(n){var e={};e.get=function(){return config},Object.defineProperty(n,"config",e),n.util={warn,extend,mergeOptions,defineReactive},n.set=set,n.delete=del,n.nextTick=nextTick,n.observable=function(t){return observe(t),t},n.options=Object.create(null),ASSET_TYPES.forEach(function(t){n.options[t+"s"]=Object.create(null)}),n.options._base=n,extend(n.options.components,builtInComponents),initUse(n),initMixin(n),initExtend(n),initAssetRegisters(n)}initGlobalAPI(Vue);Object.defineProperty(Vue.prototype,"$isServer",{get:isServerRendering});Object.defineProperty(Vue.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}});Object.defineProperty(Vue,"FunctionalRenderContext",{value:FunctionalRenderContext});Vue.version=version;var isReservedAttr=makeMap("style,class"),acceptValue=makeMap("input,textarea,option,select,progress"),mustUseProp=function(n,e,t){return t==="value"&&acceptValue(n)&&e!=="button"||t==="selected"&&n==="option"||t==="checked"&&n==="input"||t==="muted"&&n==="video"},isEnumeratedAttr=makeMap("contenteditable,draggable,spellcheck"),isValidContentEditableValue=makeMap("events,caret,typing,plaintext-only"),convertEnumeratedValue=function(n,e){return isFalsyAttrValue(e)||e==="false"?"false":n==="contenteditable"&&isValidContentEditableValue(e)?e:"true"},isBooleanAttr=makeMap("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),xlinkNS="http://www.w3.org/1999/xlink",isXlink=function(n){return n.charAt(5)===":"&&n.slice(0,5)==="xlink"},getXlinkProp=function(n){return isXlink(n)?n.slice(6,n.length):""},isFalsyAttrValue=function(n){return n==null||n===!1};function genClassForVnode(n){for(var e=n.data,t=n,r=n;isDef(r.componentInstance);)r=r.componentInstance._vnode,r&&r.data&&(e=mergeClassData(r.data,e));for(;isDef(t=t.parent);)t&&t.data&&(e=mergeClassData(e,t.data));return renderClass(e.staticClass,e.class)}function mergeClassData(n,e){return{staticClass:concat(n.staticClass,e.staticClass),class:isDef(n.class)?[n.class,e.class]:e.class}}function renderClass(n,e){return isDef(n)||isDef(e)?concat(n,stringifyClass(e)):""}function concat(n,e){return n?e?n+" "+e:n:e||""}function stringifyClass(n){return Array.isArray(n)?stringifyArray(n):isObject$1(n)?stringifyObject(n):typeof n=="string"?n:""}function stringifyArray(n){for(var e="",t,r=0,s=n.length;r<s;r++)isDef(t=stringifyClass(n[r]))&&t!==""&&(e&&(e+=" "),e+=t);return e}function stringifyObject(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}var namespaceMap={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},isHTMLTag=makeMap("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),isSVG=makeMap("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),isReservedTag=function(n){return isHTMLTag(n)||isSVG(n)};function getTagNamespace(n){if(isSVG(n))return"svg";if(n==="math")return"math"}var unknownElementCache=Object.create(null);function isUnknownElement(n){if(!inBrowser)return!0;if(isReservedTag(n))return!1;if(n=n.toLowerCase(),unknownElementCache[n]!=null)return unknownElementCache[n];var e=document.createElement(n);return n.indexOf("-")>-1?unknownElementCache[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:unknownElementCache[n]=/HTMLUnknownElement/.test(e.toString())}var isTextInputType=makeMap("text,number,password,search,email,tel,url");function query(n){if(typeof n=="string"){var e=document.querySelector(n);return e||document.createElement("div")}else return n}function createElement(n,e){var t=document.createElement(n);return n!=="select"||e.data&&e.data.attrs&&e.data.attrs.multiple!==void 0&&t.setAttribute("multiple","multiple"),t}function createElementNS(n,e){return document.createElementNS(namespaceMap[n],e)}function createTextNode(n){return document.createTextNode(n)}function createComment(n){return document.createComment(n)}function insertBefore(n,e,t){n.insertBefore(e,t)}function removeChild(n,e){n.removeChild(e)}function appendChild(n,e){n.appendChild(e)}function parentNode(n){return n.parentNode}function nextSibling(n){return n.nextSibling}function tagName(n){return n.tagName}function setTextContent(n,e){n.textContent=e}function setStyleScope(n,e){n.setAttribute(e,"")}var nodeOps=Object.freeze({__proto__:null,createElement,createElementNS,createTextNode,createComment,insertBefore,removeChild,appendChild,parentNode,nextSibling,tagName,setTextContent,setStyleScope}),ref={create:function(n,e){registerRef(e)},update:function(n,e){n.data.ref!==e.data.ref&&(registerRef(n,!0),registerRef(e))},destroy:function(n){registerRef(n,!0)}};function registerRef(n,e){var t=n.data.ref;if(isDef(t)){var r=n.context,s=n.componentInstance||n.elm,o=e?null:s,a=e?void 0:s;if(isFunction$2(t)){invokeWithErrorHandling(t,r,[o],r,"template ref function");return}var l=n.data.refInFor,c=typeof t=="string"||typeof t=="number",u=isRef(t),f=r.$refs;if(c||u){if(l){var p=c?f[t]:t.value;e?isArray$1(p)&&remove$2(p,s):isArray$1(p)?p.includes(s)||p.push(s):c?(f[t]=[s],setSetupRef(r,t,f[t])):t.value=[s]}else if(c){if(e&&f[t]!==s)return;f[t]=a,setSetupRef(r,t,o)}else if(u){if(e&&t.value!==s)return;t.value=o}}}}function setSetupRef(n,e,t){var r=n._setupState;r&&hasOwn(r,e)&&(isRef(r[e])?r[e].value=t:r[e]=t)}var emptyNode=new VNode("",{},[]),hooks=["create","activate","update","remove","destroy"];function sameVnode(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&isDef(n.data)===isDef(e.data)&&sameInputType(n,e)||isTrue(n.isAsyncPlaceholder)&&isUndef(e.asyncFactory.error))}function sameInputType(n,e){if(n.tag!=="input")return!0;var t,r=isDef(t=n.data)&&isDef(t=t.attrs)&&t.type,s=isDef(t=e.data)&&isDef(t=t.attrs)&&t.type;return r===s||isTextInputType(r)&&isTextInputType(s)}function createKeyToOldIdx(n,e,t){var r,s,o={};for(r=e;r<=t;++r)s=n[r].key,isDef(s)&&(o[s]=r);return o}function createPatchFunction(n){var e,t,r={},s=n.modules,o=n.nodeOps;for(e=0;e<hooks.length;++e)for(r[hooks[e]]=[],t=0;t<s.length;++t)isDef(s[t][hooks[e]])&&r[hooks[e]].push(s[t][hooks[e]]);function a(g){return new VNode(o.tagName(g).toLowerCase(),{},[],void 0,g)}function l(g,m){function v(){--v.listeners===0&&c(g)}return v.listeners=m,v}function c(g){var m=o.parentNode(g);isDef(m)&&o.removeChild(m,g)}function u(g,m,v,x,w,E,C){if(isDef(g.elm)&&isDef(E)&&(g=E[C]=cloneVNode(g)),g.isRootInsert=!w,!f(g,m,v,x)){var T=g.data,A=g.children,O=g.tag;isDef(O)?(g.elm=g.ns?o.createElementNS(g.ns,O):o.createElement(O,g),k(g),y(g,A,m),isDef(T)&&S(g,m),h(v,g.elm,x)):isTrue(g.isComment)?(g.elm=o.createComment(g.text),h(v,g.elm,x)):(g.elm=o.createTextNode(g.text),h(v,g.elm,x))}}function f(g,m,v,x){var w=g.data;if(isDef(w)){var E=isDef(g.componentInstance)&&w.keepAlive;if(isDef(w=w.hook)&&isDef(w=w.init)&&w(g,!1),isDef(g.componentInstance))return p(g,m),h(v,g.elm,x),isTrue(E)&&d(g,m,v,x),!0}}function p(g,m){isDef(g.data.pendingInsert)&&(m.push.apply(m,g.data.pendingInsert),g.data.pendingInsert=null),g.elm=g.componentInstance.$el,b(g)?(S(g,m),k(g)):(registerRef(g),m.push(g))}function d(g,m,v,x){for(var w,E=g;E.componentInstance;)if(E=E.componentInstance._vnode,isDef(w=E.data)&&isDef(w=w.transition)){for(w=0;w<r.activate.length;++w)r.activate[w](emptyNode,E);m.push(E);break}h(v,g.elm,x)}function h(g,m,v){isDef(g)&&(isDef(v)?o.parentNode(v)===g&&o.insertBefore(g,m,v):o.appendChild(g,m))}function y(g,m,v){if(isArray$1(m))for(var x=0;x<m.length;++x)u(m[x],v,g.elm,null,!0,m,x);else isPrimitive(g.text)&&o.appendChild(g.elm,o.createTextNode(String(g.text)))}function b(g){for(;g.componentInstance;)g=g.componentInstance._vnode;return isDef(g.tag)}function S(g,m){for(var v=0;v<r.create.length;++v)r.create[v](emptyNode,g);e=g.data.hook,isDef(e)&&(isDef(e.create)&&e.create(emptyNode,g),isDef(e.insert)&&m.push(g))}function k(g){var m;if(isDef(m=g.fnScopeId))o.setStyleScope(g.elm,m);else for(var v=g;v;)isDef(m=v.context)&&isDef(m=m.$options._scopeId)&&o.setStyleScope(g.elm,m),v=v.parent;isDef(m=activeInstance)&&m!==g.context&&m!==g.fnContext&&isDef(m=m.$options._scopeId)&&o.setStyleScope(g.elm,m)}function $(g,m,v,x,w,E){for(;x<=w;++x)u(v[x],E,g,m,!1,v,x)}function N(g){var m,v,x=g.data;if(isDef(x))for(isDef(m=x.hook)&&isDef(m=m.destroy)&&m(g),m=0;m<r.destroy.length;++m)r.destroy[m](g);if(isDef(m=g.children))for(v=0;v<g.children.length;++v)N(g.children[v])}function R(g,m,v){for(;m<=v;++m){var x=g[m];isDef(x)&&(isDef(x.tag)?(M(x),N(x)):c(x.elm))}}function M(g,m){if(isDef(m)||isDef(g.data)){var v,x=r.remove.length+1;for(isDef(m)?m.listeners+=x:m=l(g.elm,x),isDef(v=g.componentInstance)&&isDef(v=v._vnode)&&isDef(v.data)&&M(v,m),v=0;v<r.remove.length;++v)r.remove[v](g,m);isDef(v=g.data.hook)&&isDef(v=v.remove)?v(g,m):m()}else c(g.elm)}function P(g,m,v,x,w){for(var E=0,C=0,T=m.length-1,A=m[0],O=m[T],I=v.length-1,F=v[0],z=v[I],U,B,j,G,q=!w;E<=T&&C<=I;)isUndef(A)?A=m[++E]:isUndef(O)?O=m[--T]:sameVnode(A,F)?(L(A,F,x,v,C),A=m[++E],F=v[++C]):sameVnode(O,z)?(L(O,z,x,v,I),O=m[--T],z=v[--I]):sameVnode(A,z)?(L(A,z,x,v,I),q&&o.insertBefore(g,A.elm,o.nextSibling(O.elm)),A=m[++E],z=v[--I]):sameVnode(O,F)?(L(O,F,x,v,C),q&&o.insertBefore(g,O.elm,A.elm),O=m[--T],F=v[++C]):(isUndef(U)&&(U=createKeyToOldIdx(m,E,T)),B=isDef(F.key)?U[F.key]:D(F,m,E,T),isUndef(B)?u(F,x,g,A.elm,!1,v,C):(j=m[B],sameVnode(j,F)?(L(j,F,x,v,C),m[B]=void 0,q&&o.insertBefore(g,j.elm,A.elm)):u(F,x,g,A.elm,!1,v,C)),F=v[++C]);E>T?(G=isUndef(v[I+1])?null:v[I+1].elm,$(g,G,v,C,I,x)):C>I&&R(m,E,T)}function D(g,m,v,x){for(var w=v;w<x;w++){var E=m[w];if(isDef(E)&&sameVnode(g,E))return w}}function L(g,m,v,x,w,E){if(g!==m){isDef(m.elm)&&isDef(x)&&(m=x[w]=cloneVNode(m));var C=m.elm=g.elm;if(isTrue(g.isAsyncPlaceholder)){isDef(m.asyncFactory.resolved)?H(g.elm,m,v):m.isAsyncPlaceholder=!0;return}if(isTrue(m.isStatic)&&isTrue(g.isStatic)&&m.key===g.key&&(isTrue(m.isCloned)||isTrue(m.isOnce))){m.componentInstance=g.componentInstance;return}var T,A=m.data;isDef(A)&&isDef(T=A.hook)&&isDef(T=T.prepatch)&&T(g,m);var O=g.children,I=m.children;if(isDef(A)&&b(m)){for(T=0;T<r.update.length;++T)r.update[T](g,m);isDef(T=A.hook)&&isDef(T=T.update)&&T(g,m)}isUndef(m.text)?isDef(O)&&isDef(I)?O!==I&&P(C,O,I,v,E):isDef(I)?(isDef(g.text)&&o.setTextContent(C,""),$(C,null,I,0,I.length-1,v)):isDef(O)?R(O,0,O.length-1):isDef(g.text)&&o.setTextContent(C,""):g.text!==m.text&&o.setTextContent(C,m.text),isDef(A)&&isDef(T=A.hook)&&isDef(T=T.postpatch)&&T(g,m)}}function V(g,m,v){if(isTrue(v)&&isDef(g.parent))g.parent.data.pendingInsert=m;else for(var x=0;x<m.length;++x)m[x].data.hook.insert(m[x])}var W=makeMap("attrs,class,staticClass,staticStyle,key");function H(g,m,v,x){var w,E=m.tag,C=m.data,T=m.children;if(x=x||C&&C.pre,m.elm=g,isTrue(m.isComment)&&isDef(m.asyncFactory))return m.isAsyncPlaceholder=!0,!0;if(isDef(C)&&(isDef(w=C.hook)&&isDef(w=w.init)&&w(m,!0),isDef(w=m.componentInstance)))return p(m,v),!0;if(isDef(E)){if(isDef(T))if(!g.hasChildNodes())y(m,T,v);else if(isDef(w=C)&&isDef(w=w.domProps)&&isDef(w=w.innerHTML)){if(w!==g.innerHTML)return!1}else{for(var A=!0,O=g.firstChild,I=0;I<T.length;I++){if(!O||!H(O,T[I],v,x)){A=!1;break}O=O.nextSibling}if(!A||O)return!1}if(isDef(C)){var F=!1;for(var z in C)if(!W(z)){F=!0,S(m,v);break}!F&&C.class&&traverse(C.class)}}else g.data!==m.text&&(g.data=m.text);return!0}return function(m,v,x,w){if(isUndef(v)){isDef(m)&&N(m);return}var E=!1,C=[];if(isUndef(m))E=!0,u(v,C);else{var T=isDef(m.nodeType);if(!T&&sameVnode(m,v))L(m,v,C,null,null,w);else{if(T){if(m.nodeType===1&&m.hasAttribute(SSR_ATTR)&&(m.removeAttribute(SSR_ATTR),x=!0),isTrue(x)&&H(m,v,C))return V(v,C,!0),m;m=a(m)}var A=m.elm,O=o.parentNode(A);if(u(v,C,A._leaveCb?null:O,o.nextSibling(A)),isDef(v.parent))for(var I=v.parent,F=b(v);I;){for(var z=0;z<r.destroy.length;++z)r.destroy[z](I);if(I.elm=v.elm,F){for(var U=0;U<r.create.length;++U)r.create[U](emptyNode,I);var B=I.data.hook.insert;if(B.merged)for(var j=1;j<B.fns.length;j++)B.fns[j]()}else registerRef(I);I=I.parent}isDef(O)?R([m],0,0):isDef(m.tag)&&N(m)}}return V(v,C,E),v.elm}}var directives={create:updateDirectives,update:updateDirectives,destroy:function(e){updateDirectives(e,emptyNode)}};function updateDirectives(n,e){(n.data.directives||e.data.directives)&&_update(n,e)}function _update(n,e){var t=n===emptyNode,r=e===emptyNode,s=normalizeDirectives(n.data.directives,n.context),o=normalizeDirectives(e.data.directives,e.context),a=[],l=[],c,u,f;for(c in o)u=s[c],f=o[c],u?(f.oldValue=u.value,f.oldArg=u.arg,callHook(f,"update",e,n),f.def&&f.def.componentUpdated&&l.push(f)):(callHook(f,"bind",e,n),f.def&&f.def.inserted&&a.push(f));if(a.length){var p=function(){for(var d=0;d<a.length;d++)callHook(a[d],"inserted",e,n)};t?mergeVNodeHook(e,"insert",p):p()}if(l.length&&mergeVNodeHook(e,"postpatch",function(){for(var d=0;d<l.length;d++)callHook(l[d],"componentUpdated",e,n)}),!t)for(c in s)o[c]||callHook(s[c],"unbind",n,n,r)}var emptyModifiers=Object.create(null);function normalizeDirectives(n,e){var t=Object.create(null);if(!n)return t;var r,s;for(r=0;r<n.length;r++){if(s=n[r],s.modifiers||(s.modifiers=emptyModifiers),t[getRawDirName(s)]=s,e._setupState&&e._setupState.__sfc){var o=s.def||resolveAsset(e,"_setupState","v-"+s.name);typeof o=="function"?s.def={bind:o,update:o}:s.def=o}s.def=s.def||resolveAsset(e.$options,"directives",s.name)}return t}function getRawDirName(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function callHook(n,e,t,r,s){var o=n.def&&n.def[e];if(o)try{o(t.elm,n,t,r,s)}catch(a){handleError(a,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var baseModules=[ref,directives];function updateAttrs(n,e){var t=e.componentOptions;if(!(isDef(t)&&t.Ctor.options.inheritAttrs===!1)&&!(isUndef(n.data.attrs)&&isUndef(e.data.attrs))){var r,s,o,a=e.elm,l=n.data.attrs||{},c=e.data.attrs||{};(isDef(c.__ob__)||isTrue(c._v_attr_proxy))&&(c=e.data.attrs=extend({},c));for(r in c)s=c[r],o=l[r],o!==s&&setAttr(a,r,s,e.data.pre);(isIE||isEdge)&&c.value!==l.value&&setAttr(a,"value",c.value);for(r in l)isUndef(c[r])&&(isXlink(r)?a.removeAttributeNS(xlinkNS,getXlinkProp(r)):isEnumeratedAttr(r)||a.removeAttribute(r))}}function setAttr(n,e,t,r){r||n.tagName.indexOf("-")>-1?baseSetAttr(n,e,t):isBooleanAttr(e)?isFalsyAttrValue(t)?n.removeAttribute(e):(t=e==="allowfullscreen"&&n.tagName==="EMBED"?"true":e,n.setAttribute(e,t)):isEnumeratedAttr(e)?n.setAttribute(e,convertEnumeratedValue(e,t)):isXlink(e)?isFalsyAttrValue(t)?n.removeAttributeNS(xlinkNS,getXlinkProp(e)):n.setAttributeNS(xlinkNS,e,t):baseSetAttr(n,e,t)}function baseSetAttr(n,e,t){if(isFalsyAttrValue(t))n.removeAttribute(e);else{if(isIE&&!isIE9&&n.tagName==="TEXTAREA"&&e==="placeholder"&&t!==""&&!n.__ieph){var r=function(s){s.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var attrs={create:updateAttrs,update:updateAttrs};function updateClass(n,e){var t=e.elm,r=e.data,s=n.data;if(!(isUndef(r.staticClass)&&isUndef(r.class)&&(isUndef(s)||isUndef(s.staticClass)&&isUndef(s.class)))){var o=genClassForVnode(e),a=t._transitionClasses;isDef(a)&&(o=concat(o,stringifyClass(a))),o!==t._prevClass&&(t.setAttribute("class",o),t._prevClass=o)}}var klass={create:updateClass,update:updateClass},RANGE_TOKEN="__r",CHECKBOX_RADIO_TOKEN="__c";function normalizeEvents(n){if(isDef(n[RANGE_TOKEN])){var e=isIE?"change":"input";n[e]=[].concat(n[RANGE_TOKEN],n[e]||[]),delete n[RANGE_TOKEN]}isDef(n[CHECKBOX_RADIO_TOKEN])&&(n.change=[].concat(n[CHECKBOX_RADIO_TOKEN],n.change||[]),delete n[CHECKBOX_RADIO_TOKEN])}var target;function createOnceHandler(n,e,t){var r=target;return function s(){var o=e.apply(null,arguments);o!==null&&remove(n,s,t,r)}}var useMicrotaskFix=isUsingMicroTask&&!(isFF&&Number(isFF[1])<=53);function add(n,e,t,r){if(useMicrotaskFix){var s=currentFlushTimestamp,o=e;e=o._wrapper=function(a){if(a.target===a.currentTarget||a.timeStamp>=s||a.timeStamp<=0||a.target.ownerDocument!==document)return o.apply(this,arguments)}}target.addEventListener(n,e,supportsPassive?{capture:t,passive:r}:t)}function remove(n,e,t,r){(r||target).removeEventListener(n,e._wrapper||e,t)}function updateDOMListeners(n,e){if(!(isUndef(n.data.on)&&isUndef(e.data.on))){var t=e.data.on||{},r=n.data.on||{};target=e.elm||n.elm,normalizeEvents(t),updateListeners(t,r,add,remove,createOnceHandler,e.context),target=void 0}}var events={create:updateDOMListeners,update:updateDOMListeners,destroy:function(n){return updateDOMListeners(n,emptyNode)}},svgContainer;function updateDOMProps(n,e){if(!(isUndef(n.data.domProps)&&isUndef(e.data.domProps))){var t,r,s=e.elm,o=n.data.domProps||{},a=e.data.domProps||{};(isDef(a.__ob__)||isTrue(a._v_attr_proxy))&&(a=e.data.domProps=extend({},a));for(t in o)t in a||(s[t]="");for(t in a){if(r=a[t],t==="textContent"||t==="innerHTML"){if(e.children&&(e.children.length=0),r===o[t])continue;s.childNodes.length===1&&s.removeChild(s.childNodes[0])}if(t==="value"&&s.tagName!=="PROGRESS"){s._value=r;var l=isUndef(r)?"":String(r);shouldUpdateValue(s,l)&&(s.value=l)}else if(t==="innerHTML"&&isSVG(s.tagName)&&isUndef(s.innerHTML)){svgContainer=svgContainer||document.createElement("div"),svgContainer.innerHTML="<svg>".concat(r,"</svg>");for(var c=svgContainer.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;c.firstChild;)s.appendChild(c.firstChild)}else if(r!==o[t])try{s[t]=r}catch{}}}}function shouldUpdateValue(n,e){return!n.composing&&(n.tagName==="OPTION"||isNotInFocusAndDirty(n,e)||isDirtyWithModifiers(n,e))}function isNotInFocusAndDirty(n,e){var t=!0;try{t=document.activeElement!==n}catch{}return t&&n.value!==e}function isDirtyWithModifiers(n,e){var t=n.value,r=n._vModifiers;if(isDef(r)){if(r.number)return toNumber(t)!==toNumber(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}var domProps={create:updateDOMProps,update:updateDOMProps},parseStyleText=cached(function(n){var e={},t=/;(?![^(]*\))/g,r=/:(.+)/;return n.split(t).forEach(function(s){if(s){var o=s.split(r);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e});function normalizeStyleData(n){var e=normalizeStyleBinding(n.style);return n.staticStyle?extend(n.staticStyle,e):e}function normalizeStyleBinding(n){return Array.isArray(n)?toObject(n):typeof n=="string"?parseStyleText(n):n}function getStyle(n,e){var t={},r;if(e)for(var s=n;s.componentInstance;)s=s.componentInstance._vnode,s&&s.data&&(r=normalizeStyleData(s.data))&&extend(t,r);(r=normalizeStyleData(n.data))&&extend(t,r);for(var o=n;o=o.parent;)o.data&&(r=normalizeStyleData(o.data))&&extend(t,r);return t}var cssVarRE=/^--/,importantRE=/\s*!important$/,setProp=function(n,e,t){if(cssVarRE.test(e))n.style.setProperty(e,t);else if(importantRE.test(t))n.style.setProperty(hyphenate(e),t.replace(importantRE,""),"important");else{var r=normalize(e);if(Array.isArray(t))for(var s=0,o=t.length;s<o;s++)n.style[r]=t[s];else n.style[r]=t}},vendorNames=["Webkit","Moz","ms"],emptyStyle,normalize=cached(function(n){if(emptyStyle=emptyStyle||document.createElement("div").style,n=camelize(n),n!=="filter"&&n in emptyStyle)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<vendorNames.length;t++){var r=vendorNames[t]+e;if(r in emptyStyle)return r}});function updateStyle(n,e){var t=e.data,r=n.data;if(!(isUndef(t.staticStyle)&&isUndef(t.style)&&isUndef(r.staticStyle)&&isUndef(r.style))){var s,o,a=e.elm,l=r.staticStyle,c=r.normalizedStyle||r.style||{},u=l||c,f=normalizeStyleBinding(e.data.style)||{};e.data.normalizedStyle=isDef(f.__ob__)?extend({},f):f;var p=getStyle(e,!0);for(o in u)isUndef(p[o])&&setProp(a,o,"");for(o in p)s=p[o],s!==u[o]&&setProp(a,o,s??"")}}var style={create:updateStyle,update:updateStyle},whitespaceRE=/\s+/;function addClass(n,e){if(!(!e||!(e=e.trim())))if(n.classList)e.indexOf(" ")>-1?e.split(whitespaceRE).forEach(function(r){return n.classList.add(r)}):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function removeClass(n,e){if(!(!e||!(e=e.trim())))if(n.classList)e.indexOf(" ")>-1?e.split(whitespaceRE).forEach(function(s){return n.classList.remove(s)}):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");t=t.trim(),t?n.setAttribute("class",t):n.removeAttribute("class")}}function resolveTransition(n){if(n){if(typeof n=="object"){var e={};return n.css!==!1&&extend(e,autoCssTransition(n.name||"v")),extend(e,n),e}else if(typeof n=="string")return autoCssTransition(n)}}var autoCssTransition=cached(function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}}),hasTransition=inBrowser&&!isIE9,TRANSITION="transition",ANIMATION="animation",transitionProp="transition",transitionEndEvent="transitionend",animationProp="animation",animationEndEvent="animationend";hasTransition&&(window.ontransitionend===void 0&&window.onwebkittransitionend!==void 0&&(transitionProp="WebkitTransition",transitionEndEvent="webkitTransitionEnd"),window.onanimationend===void 0&&window.onwebkitanimationend!==void 0&&(animationProp="WebkitAnimation",animationEndEvent="webkitAnimationEnd"));var raf=inBrowser?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function nextFrame(n){raf(function(){raf(n)})}function addTransitionClass(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),addClass(n,e))}function removeTransitionClass(n,e){n._transitionClasses&&remove$2(n._transitionClasses,e),removeClass(n,e)}function whenTransitionEnds(n,e,t){var r=getTransitionInfo(n,e),s=r.type,o=r.timeout,a=r.propCount;if(!s)return t();var l=s===TRANSITION?transitionEndEvent:animationEndEvent,c=0,u=function(){n.removeEventListener(l,f),t()},f=function(p){p.target===n&&++c>=a&&u()};setTimeout(function(){c<a&&u()},o+1),n.addEventListener(l,f)}var transformRE=/\b(transform|all)(,|$)/;function getTransitionInfo(n,e){var t=window.getComputedStyle(n),r=(t[transitionProp+"Delay"]||"").split(", "),s=(t[transitionProp+"Duration"]||"").split(", "),o=getTimeout(r,s),a=(t[animationProp+"Delay"]||"").split(", "),l=(t[animationProp+"Duration"]||"").split(", "),c=getTimeout(a,l),u,f=0,p=0;e===TRANSITION?o>0&&(u=TRANSITION,f=o,p=s.length):e===ANIMATION?c>0&&(u=ANIMATION,f=c,p=l.length):(f=Math.max(o,c),u=f>0?o>c?TRANSITION:ANIMATION:null,p=u?u===TRANSITION?s.length:l.length:0);var d=u===TRANSITION&&transformRE.test(t[transitionProp+"Property"]);return{type:u,timeout:f,propCount:p,hasTransform:d}}function getTimeout(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map(function(t,r){return toMs(t)+toMs(n[r])}))}function toMs(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function enter(n,e){var t=n.elm;isDef(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=resolveTransition(n.data.transition);if(!isUndef(r)&&!(isDef(t._enterCb)||t.nodeType!==1)){for(var s=r.css,o=r.type,a=r.enterClass,l=r.enterToClass,c=r.enterActiveClass,u=r.appearClass,f=r.appearToClass,p=r.appearActiveClass,d=r.beforeEnter,h=r.enter,y=r.afterEnter,b=r.enterCancelled,S=r.beforeAppear,k=r.appear,$=r.afterAppear,N=r.appearCancelled,R=r.duration,M=activeInstance,P=activeInstance.$vnode;P&&P.parent;)M=P.context,P=P.parent;var D=!M._isMounted||!n.isRootInsert;if(!(D&&!k&&k!=="")){var L=D&&u?u:a,V=D&&p?p:c,W=D&&f?f:l,H=D&&S||d,g=D&&isFunction$2(k)?k:h,m=D&&$||y,v=D&&N||b,x=toNumber(isObject$1(R)?R.enter:R),w=s!==!1&&!isIE9,E=getHookArgumentsLength(g),C=t._enterCb=once(function(){w&&(removeTransitionClass(t,W),removeTransitionClass(t,V)),C.cancelled?(w&&removeTransitionClass(t,L),v&&v(t)):m&&m(t),t._enterCb=null});n.data.show||mergeVNodeHook(n,"insert",function(){var T=t.parentNode,A=T&&T._pending&&T._pending[n.key];A&&A.tag===n.tag&&A.elm._leaveCb&&A.elm._leaveCb(),g&&g(t,C)}),H&&H(t),w&&(addTransitionClass(t,L),addTransitionClass(t,V),nextFrame(function(){removeTransitionClass(t,L),C.cancelled||(addTransitionClass(t,W),E||(isValidDuration(x)?setTimeout(C,x):whenTransitionEnds(t,o,C)))})),n.data.show&&(e&&e(),g&&g(t,C)),!w&&!E&&C()}}}function leave(n,e){var t=n.elm;isDef(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=resolveTransition(n.data.transition);if(isUndef(r)||t.nodeType!==1)return e();if(isDef(t._leaveCb))return;var s=r.css,o=r.type,a=r.leaveClass,l=r.leaveToClass,c=r.leaveActiveClass,u=r.beforeLeave,f=r.leave,p=r.afterLeave,d=r.leaveCancelled,h=r.delayLeave,y=r.duration,b=s!==!1&&!isIE9,S=getHookArgumentsLength(f),k=toNumber(isObject$1(y)?y.leave:y),$=t._leaveCb=once(function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),b&&(removeTransitionClass(t,l),removeTransitionClass(t,c)),$.cancelled?(b&&removeTransitionClass(t,a),d&&d(t)):(e(),p&&p(t)),t._leaveCb=null});h?h(N):N();function N(){$.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),u&&u(t),b&&(addTransitionClass(t,a),addTransitionClass(t,c),nextFrame(function(){removeTransitionClass(t,a),$.cancelled||(addTransitionClass(t,l),S||(isValidDuration(k)?setTimeout($,k):whenTransitionEnds(t,o,$)))})),f&&f(t,$),!b&&!S&&$())}}function isValidDuration(n){return typeof n=="number"&&!isNaN(n)}function getHookArgumentsLength(n){if(isUndef(n))return!1;var e=n.fns;return isDef(e)?getHookArgumentsLength(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function _enter(n,e){e.data.show!==!0&&enter(e)}var transition=inBrowser?{create:_enter,activate:_enter,remove:function(n,e){n.data.show!==!0?leave(n,e):e()}}:{},platformModules=[attrs,klass,events,domProps,style,transition],modules=platformModules.concat(baseModules),patch=createPatchFunction({nodeOps,modules});isIE9&&document.addEventListener("selectionchange",function(){var n=document.activeElement;n&&n.vmodel&&trigger(n,"input")});var directive={inserted:function(n,e,t,r){t.tag==="select"?(r.elm&&!r.elm._vOptions?mergeVNodeHook(t,"postpatch",function(){directive.componentUpdated(n,e,t)}):setSelected(n,e,t.context),n._vOptions=[].map.call(n.options,getValue)):(t.tag==="textarea"||isTextInputType(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",onCompositionStart),n.addEventListener("compositionend",onCompositionEnd),n.addEventListener("change",onCompositionEnd),isIE9&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if(t.tag==="select"){setSelected(n,e,t.context);var r=n._vOptions,s=n._vOptions=[].map.call(n.options,getValue);if(s.some(function(a,l){return!looseEqual(a,r[l])})){var o=n.multiple?e.value.some(function(a){return hasNoMatchingOption(a,s)}):e.value!==e.oldValue&&hasNoMatchingOption(e.value,s);o&&trigger(n,"change")}}}};function setSelected(n,e,t){actuallySetSelected(n,e),(isIE||isEdge)&&setTimeout(function(){actuallySetSelected(n,e)},0)}function actuallySetSelected(n,e,t){var r=e.value,s=n.multiple;if(!(s&&!Array.isArray(r))){for(var o,a,l=0,c=n.options.length;l<c;l++)if(a=n.options[l],s)o=looseIndexOf(r,getValue(a))>-1,a.selected!==o&&(a.selected=o);else if(looseEqual(getValue(a),r)){n.selectedIndex!==l&&(n.selectedIndex=l);return}s||(n.selectedIndex=-1)}}function hasNoMatchingOption(n,e){return e.every(function(t){return!looseEqual(t,n)})}function getValue(n){return"_value"in n?n._value:n.value}function onCompositionStart(n){n.target.composing=!0}function onCompositionEnd(n){n.target.composing&&(n.target.composing=!1,trigger(n.target,"input"))}function trigger(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function locateNode(n){return n.componentInstance&&(!n.data||!n.data.transition)?locateNode(n.componentInstance._vnode):n}var show={bind:function(n,e,t){var r=e.value;t=locateNode(t);var s=t.data&&t.data.transition,o=n.__vOriginalDisplay=n.style.display==="none"?"":n.style.display;r&&s?(t.data.show=!0,enter(t,function(){n.style.display=o})):n.style.display=r?o:"none"},update:function(n,e,t){var r=e.value,s=e.oldValue;if(!r!=!s){t=locateNode(t);var o=t.data&&t.data.transition;o?(t.data.show=!0,r?enter(t,function(){n.style.display=n.__vOriginalDisplay}):leave(t,function(){n.style.display="none"})):n.style.display=r?n.__vOriginalDisplay:"none"}},unbind:function(n,e,t,r,s){s||(n.style.display=n.__vOriginalDisplay)}},platformDirectives={model:directive,show},transitionProps={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function getRealChild(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?getRealChild(getFirstComponentChild(e.children)):n}function extractTransitionData(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var s=t._parentListeners;for(var r in s)e[camelize(r)]=s[r];return e}function placeholder(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}function hasParentTransition(n){for(;n=n.parent;)if(n.data.transition)return!0}function isSameChild(n,e){return e.key===n.key&&e.tag===n.tag}var isNotTextNode=function(n){return n.tag||isAsyncPlaceholder(n)},isVShowDirective=function(n){return n.name==="show"},Transition={name:"transition",props:transitionProps,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(isNotTextNode),!!t.length)){var r=this.mode,s=t[0];if(hasParentTransition(this.$vnode))return s;var o=getRealChild(s);if(!o)return s;if(this._leaving)return placeholder(n,s);var a="__transition-".concat(this._uid,"-");o.key=o.key==null?o.isComment?a+"comment":a+o.tag:isPrimitive(o.key)?String(o.key).indexOf(a)===0?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=extractTransitionData(this),c=this._vnode,u=getRealChild(c);if(o.data.directives&&o.data.directives.some(isVShowDirective)&&(o.data.show=!0),u&&u.data&&!isSameChild(o,u)&&!isAsyncPlaceholder(u)&&!(u.componentInstance&&u.componentInstance._vnode.isComment)){var f=u.data.transition=extend({},l);if(r==="out-in")return this._leaving=!0,mergeVNodeHook(f,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),placeholder(n,s);if(r==="in-out"){if(isAsyncPlaceholder(o))return c;var p,d=function(){p()};mergeVNodeHook(l,"afterEnter",d),mergeVNodeHook(l,"enterCancelled",d),mergeVNodeHook(f,"delayLeave",function(h){p=h})}}return s}}},props=extend({tag:String,moveClass:String},transitionProps);delete props.mode;var TransitionGroup={props,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var s=setActiveInstance(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,s(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,s=this.$slots.default||[],o=this.children=[],a=extractTransitionData(this),l=0;l<s.length;l++){var c=s[l];c.tag&&c.key!=null&&String(c.key).indexOf("__vlist")!==0&&(o.push(c),t[c.key]=c,(c.data||(c.data={})).transition=a)}if(r){for(var u=[],f=[],l=0;l<r.length;l++){var c=r[l];c.data.transition=a,c.data.pos=c.elm.getBoundingClientRect(),t[c.key]?u.push(c):f.push(c)}this.kept=n(e,null,u),this.removed=f}return n(e,null,o)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";!n.length||!this.hasMove(n[0].elm,e)||(n.forEach(callPendingCbs),n.forEach(recordPosition),n.forEach(applyTranslation),this._reflow=document.body.offsetHeight,n.forEach(function(t){if(t.data.moved){var r=t.elm,s=r.style;addTransitionClass(r,e),s.transform=s.WebkitTransform=s.transitionDuration="",r.addEventListener(transitionEndEvent,r._moveCb=function o(a){a&&a.target!==r||(!a||/transform$/.test(a.propertyName))&&(r.removeEventListener(transitionEndEvent,o),r._moveCb=null,removeTransitionClass(r,e))})}}))},methods:{hasMove:function(n,e){if(!hasTransition)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach(function(s){removeClass(t,s)}),addClass(t,e),t.style.display="none",this.$el.appendChild(t);var r=getTransitionInfo(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}};function callPendingCbs(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function recordPosition(n){n.data.newPos=n.elm.getBoundingClientRect()}function applyTranslation(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,s=e.top-t.top;if(r||s){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(s,"px)"),o.transitionDuration="0s"}}var platformComponents={Transition,TransitionGroup};Vue.config.mustUseProp=mustUseProp;Vue.config.isReservedTag=isReservedTag;Vue.config.isReservedAttr=isReservedAttr;Vue.config.getTagNamespace=getTagNamespace;Vue.config.isUnknownElement=isUnknownElement;extend(Vue.options.directives,platformDirectives);extend(Vue.options.components,platformComponents);Vue.prototype.__patch__=inBrowser?patch:noop;Vue.prototype.$mount=function(n,e){return n=n&&inBrowser?query(n):void 0,mountComponent(this,n,e)};inBrowser&&setTimeout(function(){config.devtools&&devtools&&devtools.emit("init",Vue)},0);const NodeViewWrapper={props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(n){return n(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},attrs:{"data-node-view-wrapper":""},on:{dragstart:this.onDragStart}},this.$slots.default)}};class VueRenderer{constructor(e,t){const r=typeof e=="function"?e:Vue.extend(e);this.ref=new r(t).$mount()}get element(){return this.ref.$el}updateProps(e={}){var t,r,s;if(!this.ref.$props)return;const o=(s=(r=(t=this.ref.$props.editor)===null||t===void 0?void 0:t.contentComponent)===null||r===void 0?void 0:r.$options._base)!==null&&s!==void 0?s:Vue,a=o.config.silent;o.config.silent=!0,Object.entries(e).forEach(([l,c])=>{this.ref.$props[l]=c}),o.config.silent=a}destroy(){this.ref.$destroy()}}class VueNodeView extends NodeView{mount(){var e,t;const r={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode()},s=this.onDragStart.bind(this);this.decorationClasses=Vue.observable({value:this.getDecorationClasses()});const a=((t=(e=this.editor.contentComponent)===null||e===void 0?void 0:e.$options._base)!==null&&t!==void 0?t:Vue).extend(this.component).extend({props:Object.keys(r),provide:()=>({onDragStart:s,decorationClasses:this.decorationClasses})});this.renderer=new VueRenderer(a,{parent:this.editor.contentComponent,propsData:r})}get dom(){if(!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")||this.dom}update(e,t){const r=s=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(s)};if(typeof this.options.update=="function"){const s=this.node,o=this.decorations;return this.node=e,this.decorations=t,this.options.update({oldNode:s,oldDecorations:o,newNode:e,newDecorations:t,updateProps:()=>r({node:e,decorations:t})})}return e.type!==this.node.type?!1:(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,r({node:e,decorations:t})),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}getDecorationClasses(){return this.decorations.map(e=>e.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy()}}function VueNodeViewRenderer(n,e){return t=>t.editor.contentComponent?new VueNodeView(n,t,e):{}}function normalizeComponent(n,e,t,r,s,o,a,l){var c=typeof n=="function"?n.options:n;e&&(c.render=e,c.staticRenderFns=t,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o);var u;if(a?(u=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),s&&s.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(a)},c._ssrRegister=u):s&&(u=l?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var f=c.render;c.render=function(h,y){return u.call(y),f(h,y)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,u):[u]}return{exports:n,options:c}}const _sfc_main$a={props:{field:{type:Object,required:!0},meta:{type:Object},value:{required:!0},parentName:{type:String,required:!0},setIndex:{type:Number,required:!0},fieldPath:{type:String},readOnly:Boolean},inject:["storeName"],computed:{fieldtypeComponent(){return`${this.field.component||this.field.type}-fieldtype`},namePrefix(){return`${this.parentName}[${this.setIndex}]`},display(){return this.field.display||this.field.handle[0].toUpperCase()+this.field.handle.slice(1)},instructions(){return this.field.instructions?this.$options.filters.markdown(this.field.instructions):null},storeState(){return this.$store.state.publish[this.storeName]||[]},errors(){return this.storeState.errors[this.fieldPath]||[]},hasError(){return this.errors.length>0},hasNestedError(){const n=`${this.fieldPath}.`;return Object.keys(this.storeState.errors).some(e=>e.startsWith(n))},isReadOnly(){return this.readOnly||this.field.visibility==="read_only"||!1},classes(){return["form-group publish-field",`${this.field.type}-fieldtype`,`${tailwind_width_class(this.field.width)}`,this.isReadOnly?"read-only-field":"",this.field.classes||"",{"has-error":this.hasError||this.hasNestedError}]},showLabel(){return this.showLabelText||this.isReadOnly||this.field.required},showLabelText(){return!this.field.hide_display}}};var _sfc_render$a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4 m-0 @container",class:e.classes},[e.showLabel?t("label",{staticClass:"block"},[e.showLabelText?t("span",[e._v(e._s(e.display))]):e._e(),e.field.required?t("i",{staticClass:"required"},[e._v("*")]):e._e(),e.isReadOnly?t("span",{staticClass:"text-gray-500 font-normal text-2xs mx-1",domProps:{textContent:e._s(e.__("Read Only"))}}):e._e()]):e._e(),e.instructions&&e.field.instructions_position!=="below"?t("div",{staticClass:"help-block",domProps:{innerHTML:e._s(e.instructions)}}):e._e(),t(e.fieldtypeComponent,{tag:"component",attrs:{config:e.field,meta:e.meta,value:e.value,handle:e.field.handle,"name-prefix":e.namePrefix,"field-path-prefix":e.fieldPath,"has-error":e.hasError||e.hasNestedError,"read-only":e.isReadOnly},on:{input:function(r){return e.$emit("updated",r)},"meta-updated":function(r){return e.$emit("meta-updated",r)},focus:function(r){return e.$emit("focus")},blur:function(r){return e.$emit("blur")},"replicator-preview-updated":function(r){return e.$emit("replicator-preview-updated",r)}}}),e.instructions&&e.field.instructions_position==="below"?t("div",{staticClass:"help-block mt-2",domProps:{innerHTML:e._s(e.instructions)}}):e._e(),e.hasError?t("div",e._l(e.errors,function(r,s){return t("small",{key:s,staticClass:"help-block text-red-500 mt-2",domProps:{textContent:e._s(r)}})}),0):e._e()],1)},_sfc_staticRenderFns$a=[],__component__$a=normalizeComponent(_sfc_main$a,_sfc_render$a,_sfc_staticRenderFns$a,!1,null,null,null,null);const SetField=__component__$a.exports;function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(e,s);return new o}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uniqidExports$1={},uniqid$1={get exports(){return uniqidExports$1},set exports(n){uniqidExports$1=n}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var pid$1=typeof process<"u"&&process.pid?process.pid.toString(36):"",address$1="";if(typeof __webpack_require__!="function"&&typeof commonjsRequire<"u"){var mac$1="",os$2=require$$0;if(os$2.networkInterfaces)var networkInterfaces$1=os$2.networkInterfaces();if(networkInterfaces$1){e:for(let n in networkInterfaces$1){const e=networkInterfaces$1[n],t=e.length;for(var i$1=0;i$1<t;i$1++)if(e[i$1]!==void 0&&e[i$1].mac&&e[i$1].mac!="00:00:00:00:00:00"){mac$1=e[i$1].mac;break e}}address$1=mac$1?parseInt(mac$1.replace(/\:|\D+/gi,"")).toString(36):""}}uniqid$1.exports=uniqidExports$1.default=function(n,e){return(n||"")+address$1+pid$1+now$1().toString(36)+(e||"")};uniqidExports$1.process=function(n,e){return(n||"")+pid$1+now$1().toString(36)+(e||"")};uniqidExports$1.time=function(n,e){return(n||"")+now$1().toString(36)+(e||"")};function now$1(){var n=Date.now(),e=now$1.last||n;return now$1.last=n>e?n:e+1}const KEYS=["if","if_any","show_when","show_when_any","unless","unless_any","hide_when","hide_when_any"],OPERATORS=["equals","not","contains","contains_any","===","!==",">",">=","<","<=","custom"],ALIASES={is:"equals","==":"equals",isnt:"not","!=":"not",includes:"contains",includes_any:"contains_any"};var VERSION="1.13.6",root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,_isNaN=isNaN,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function _$1(n){if(n instanceof _$1)return n;if(!(this instanceof _$1))return new _$1(n);this._wrapped=n}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function identity(n){return n}function tagTester(n){var e="[object "+n+"]";return function(t){return toString.call(t)===e}}var isFunction=tagTester("Function"),nodelist=root.document&&root.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"&&(isFunction=function(n){return typeof n=="function"||!1});const isFunction$1=isFunction;function isObject(n){var e=typeof n;return e==="function"||e==="object"&&!!n}const isArray=nativeIsArray||tagTester("Array");function createAssigner(n,e){return function(t){var r=arguments.length;if(e&&(t=Object(t)),r<2||t==null)return t;for(var s=1;s<r;s++)for(var o=arguments[s],a=n(o),l=a.length,c=0;c<l;c++){var u=a[c];(!e||t[u]===void 0)&&(t[u]=o[u])}return t}}function has(n,e){return n!=null&&hasOwnProperty.call(n,e)}function emulatedSet(n){for(var e={},t=n.length,r=0;r<t;++r)e[n[r]]=!0;return{contains:function(s){return e[s]===!0},push:function(s){return e[s]=!0,n.push(s)}}}function collectNonEnumProps(n,e){e=emulatedSet(e);var t=nonEnumerableProps.length,r=n.constructor,s=isFunction$1(r)&&r.prototype||ObjProto,o="constructor";for(has(n,o)&&!e.contains(o)&&e.push(o);t--;)o=nonEnumerableProps[t],o in n&&n[o]!==s[o]&&!e.contains(o)&&e.push(o)}function keys(n){if(!isObject(n))return[];if(nativeKeys)return nativeKeys(n);var e=[];for(var t in n)has(n,t)&&e.push(t);return hasEnumBug&&collectNonEnumProps(n,e),e}const extendOwn=createAssigner(keys);function isMatch(n,e){var t=keys(e),r=t.length;if(n==null)return!r;for(var s=Object(n),o=0;o<r;o++){var a=t[o];if(e[a]!==s[a]||!(a in s))return!1}return!0}function matcher(n){return n=extendOwn({},n),function(e){return isMatch(e,n)}}function deepGet(n,e){for(var t=e.length,r=0;r<t;r++){if(n==null)return;n=n[e[r]]}return t?n:void 0}function toPath$1(n){return isArray(n)?n:[n]}_$1.toPath=toPath$1;function toPath(n){return _$1.toPath(n)}function property(n){return n=toPath(n),function(e){return deepGet(e,n)}}function optimizeCb(n,e,t){if(e===void 0)return n;switch(t??3){case 1:return function(r){return n.call(e,r)};case 3:return function(r,s,o){return n.call(e,r,s,o)};case 4:return function(r,s,o,a){return n.call(e,r,s,o,a)}}return function(){return n.apply(e,arguments)}}function baseIteratee(n,e,t){return n==null?identity:isFunction$1(n)?optimizeCb(n,e,t):isObject(n)&&!isArray(n)?matcher(n):property(n)}function iteratee(n,e){return baseIteratee(n,e,1/0)}_$1.iteratee=iteratee;function cb(n,e,t){return _$1.iteratee!==iteratee?_$1.iteratee(n,e):baseIteratee(n,e,t)}function createSizePropertyCheck(n){return function(e){var t=n(e);return typeof t=="number"&&t>=0&&t<=MAX_ARRAY_INDEX}}function shallowProperty(n){return function(e){return e==null?void 0:e[n]}}const getLength=shallowProperty("length"),isArrayLike=createSizePropertyCheck(getLength);function map(n,e,t){e=cb(e,t);for(var r=!isArrayLike(n)&&keys(n),s=(r||n).length,o=Array(s),a=0;a<s;a++){var l=r?r[a]:a;o[a]=e(n[l],l,n)}return o}function each(n,e,t){e=optimizeCb(e,t);var r,s;if(isArrayLike(n))for(r=0,s=n.length;r<s;r++)e(n[r],r,n);else{var o=keys(n);for(r=0,s=o.length;r<s;r++)e(n[o[r]],o[r],n)}return n}function filter(n,e,t){var r=[];return e=cb(e,t),each(n,function(s,o,a){e(s,o,a)&&r.push(s)}),r}function chain(n){var e=_$1(n);return e._chain=!0,e}function functions(n){var e=[];for(var t in n)isFunction$1(n[t])&&e.push(t);return e.sort()}function chainResult(n,e){return n._chain?_$1(e).chain():e}function mixin(n){return each(functions(n),function(e){var t=_$1[e]=n[e];_$1.prototype[e]=function(){var r=[this._wrapped];return push.apply(r,arguments),chainResult(this,t.apply(_$1,r))}}),_$1}mixin({chain,filter,each});class Converter{fromBlueprint(e,t=null){return map(e,(r,s)=>this.splitRhs(s,r,t))}toBlueprint(e){let t={};return each(e,r=>{t[r.field]=this.combineRhs(r)}),t}splitRhs(e,t,r=null){return{field:this.getScopedFieldHandle(e,r),operator:this.getOperatorFromRhs(t),value:this.getValueFromRhs(t)}}getScopedFieldHandle(e,t){return e.startsWith("root.")||!t?e:t+e}getOperatorFromRhs(e){let t="==";return chain(this.getOperatorsAndAliases()).filter(r=>new RegExp(`^${r} [^=]`).test(this.normalizeConditionString(e))).each(r=>t=r),this.normalizeOperator(t)}normalizeOperator(e){return ALIASES[e]?ALIASES[e]:e}getValueFromRhs(e){let t=this.normalizeConditionString(e);return chain(this.getOperatorsAndAliases()).filter(r=>new RegExp(`^${r} [^=]`).test(t)).each(r=>t=t.replace(new RegExp(`^${r}[ ]*`),"")),t}combineRhs(e){let t=e.operator?e.operator.trim():"",r=e.value.trim();return`${t} ${r}`.trim()}getOperatorsAndAliases(){return OPERATORS.concat(Object.keys(ALIASES))}normalizeConditionString(e){return e===null?"null":e===""?"empty":e.toString()}}function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults=getDefaults();function changeDefaults(n){defaults=n}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=n=>escapeReplacements[n];function escape(n,e){if(e){if(escapeTest.test(n))return n.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(n))return n.replace(escapeReplaceNoEncode,getEscapeReplacement);return n}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape(n){return n.replace(unescapeTest,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,s)=>(s=s.source||s,s=s.replace(caret,"$1"),n=n.replace(r,s),t),getRegex:()=>new RegExp(n,e)};return t}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(n,e,t){if(n){let r;try{r=decodeURIComponent(unescape(t)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!originIndependentUrl.test(t)&&(t=resolveUrl(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(n,e){baseUrls[" "+n]||(justDomain.test(n)?baseUrls[" "+n]=n+"/":baseUrls[" "+n]=rtrim(n,"/",!0)),n=baseUrls[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(protocol,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(domain,"$1")+e:n+e}const noopTest={exec:function(){}};function splitCells(n,e){const t=n.replace(/\|/g,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function rtrim(n,e,t){const r=n.length;if(r===0)return"";let s=0;for(;s<r;){const o=n.charAt(r-s-1);if(o===e&&!t)s++;else if(o!==e&&t)s++;else break}return n.slice(0,r-s)}function findClosingBracket(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,s=0;for(;s<t;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])r++;else if(n[s]===e[1]&&(r--,r<0))return s;return-1}function checkSanitizeDeprecation(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function outputLink(n,e,t,r){const s=e.href,o=e.title?escape(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:t,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:s,title:o,text:escape(a)}}function indentCodeCompensation(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(s=>{const o=s.match(/^\s+/);if(o===null)return s;const[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}class Tokenizer{constructor(e){this.options=e||defaults}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:rtrim(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],s=indentCodeCompensation(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const s=rtrim(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,s,o,a,l,c,u,f,p,d,h,y,b=t[1].trim();const S=b.length>1,k={type:"list",raw:"",ordered:S,start:S?+b.slice(0,-1):"",loose:!1,items:[]};b=S?`\\d{1,9}\\${b.slice(-1)}`:`\\${b}`,this.options.pedantic&&(b=S?b:"[*+-]");const $=new RegExp(`^( {0,3}${b})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(y=!1,!(!(t=$.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),f=t[2].split(`
`,1)[0].replace(/^\t+/,R=>" ".repeat(3*R.length)),p=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=f.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,h=f.slice(a),a+=t[1].length),c=!1,!f&&/^ *$/.test(p)&&(r+=p+`
`,e=e.substring(p.length+1),y=!0),!y){const R=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),M=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),P=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),D=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(d=e.split(`
`,1)[0],p=d,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(P.test(p)||D.test(p)||R.test(p)||M.test(e)));){if(p.search(/[^ ]/)>=a||!p.trim())h+=`
`+p.slice(a);else{if(c||f.search(/[^ ]/)>=4||P.test(f)||D.test(f)||M.test(f))break;h+=`
`+p}!c&&!p.trim()&&(c=!0),r+=d+`
`,e=e.substring(d.length+1),f=p.slice(a)}}k.loose||(u?k.loose=!0:/\n *\n *$/.test(r)&&(u=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(h),s&&(o=s[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),k.items.push({type:"list_item",raw:r,task:!!s,checked:o,loose:!1,text:h}),k.raw+=r}k.items[k.items.length-1].raw=r.trimRight(),k.items[k.items.length-1].text=h.trimRight(),k.raw=k.raw.trimRight();const N=k.items.length;for(l=0;l<N;l++)if(this.lexer.state.top=!1,k.items[l].tokens=this.lexer.blockTokens(k.items[l].text,[]),!k.loose){const R=k.items[l].tokens.filter(P=>P.type==="space"),M=R.length>0&&R.some(P=>/\n.*\n/.test(P.raw));k.loose=M}if(k.loose)for(l=0;l<N;l++)k.items[l].loose=!0;return k}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const s=this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]);r.type="paragraph",r.text=s,r.tokens=this.lexer.inline(s)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:s,title:o}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:splitCells(t[1]).map(s=>({text:s})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let s=r.align.length,o,a,l,c;for(o=0;o<s;o++)/^ *-+: *$/.test(r.align[o])?r.align[o]="right":/^ *:-+: *$/.test(r.align[o])?r.align[o]="center":/^ *:-+ *$/.test(r.align[o])?r.align[o]="left":r.align[o]=null;for(s=r.rows.length,o=0;o<s;o++)r.rows[o]=splitCells(r.rows[o],r.header.length).map(u=>({text:u}));for(s=r.header.length,a=0;a<s;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(s=r.rows.length,a=0;a<s;a++)for(c=r.rows[a],l=0;l<c.length;l++)c[l].tokens=this.lexer.inline(c[l].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:escape(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=rtrim(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=findClosingBracket(t[2],"()");if(a>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);a&&(s=a[1],o=a[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(r)?s=s.slice(1):s=s.slice(1,-1)),outputLink(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let s=(r[2]||r[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return outputLink(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;const o=s[1]||s[2]||"";if(!o||o&&(r===""||this.rules.inline.punctuation.exec(r))){const a=s[0].length-1;let l,c,u=a,f=0;const p=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+a);(s=p.exec(t))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(c=l.length,s[3]||s[4]){u+=c;continue}else if((s[5]||s[6])&&a%3&&!((a+c)%3)){f+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+f);const d=e.slice(0,a+s.index+(s[0].length-l.length)+c);if(Math.min(a,c)%2){const y=d.slice(1,-1);return{type:"em",raw:d,text:y,tokens:this.lexer.inlineTokens(y)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const s=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return s&&o&&(r=r.substring(1,r.length-1)),r=escape(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let s,o;return r[2]==="@"?(s=escape(this.options.mangle?t(r[1]):r[1]),o="mailto:"+s):(s=escape(r[1]),o=s),{type:"link",raw:r[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let s,o;if(r[2]==="@")s=escape(this.options.mangle?t(r[0]):r[0]),o="mailto:"+s;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);s=escape(r[0]),r[1]==="www."?o="http://"+r[0]:o=r[0]}return{type:"link",raw:r[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape(r[0]):r[0]:s=escape(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:s}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal={...block};block.gfm={...block.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic={...block.normal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal={...inline};inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()};inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function smartypants(n){return n.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function mangle(n){let e="",t,r;const s=n.length;for(t=0;t<s;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class Lexer{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:block.normal,inline:inline.normal};this.options.pedantic?(t.block=block.pedantic,t.inline=inline.pedantic):this.options.gfm&&(t.block=block.gfm,this.options.breaks?t.inline=inline.breaks:t.inline=inline.gfm),this.tokenizer.rules=t}static get rules(){return{block,inline}}static lex(e,t){return new Lexer(t).lex(e)}static lexInline(e,t){return new Lexer(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,u)=>c+"    ".repeat(u.length));let r,s,o,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(f){u=f.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(o=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){s=t[t.length-1],a&&s.type==="paragraph"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r),a=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,s,o,a=e,l,c,u;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)f.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+repeatString("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+repeatString("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,l.index+l[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(f=>(r=f.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),s=t[t.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),s=t[t.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,a,u)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,mangle)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,mangle))){e=e.substring(r.raw.length),t.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let f=1/0;const p=e.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},p),typeof d=="number"&&d>=0&&(f=Math.min(f,d))}),f<1/0&&f>=0&&(o=e.substring(0,f+1))}if(r=this.tokenizer.inlineText(o,smartypants)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),c=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):t.push(r);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}}class Renderer{constructor(e){this.options=e||defaults}code(e,t,r){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,s);o!=null&&o!==e&&(r=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+escape(s)+'">'+(r?e:escape(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:escape(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,r,s){if(this.options.headerIds){const o=this.options.headerPrefix+s.slug(r);return`<h${t} id="${o}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const s=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+e+"</"+s+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=this.options.xhtml?"/>":">",s}text(e){return e}}class TextRenderer{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,s=0;if(this.seen.hasOwnProperty(r)){s=this.seen[e];do s++,r=e+"-"+s;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=s,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Parser{constructor(e){this.options=e||defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(e,t){return new Parser(t).parse(e)}static parseInline(e,t){return new Parser(t).parseInline(e)}parse(e,t=!0){let r="",s,o,a,l,c,u,f,p,d,h,y,b,S,k,$,N,R,M,P;const D=e.length;for(s=0;s<D;s++){if(h=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(P=this.options.extensions.renderers[h.type].call({parser:this},h),P!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=P||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,unescape(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(p="",f="",l=h.header.length,o=0;o<l;o++)f+=this.renderer.tablecell(this.parseInline(h.header[o].tokens),{header:!0,align:h.align[o]});for(p+=this.renderer.tablerow(f),d="",l=h.rows.length,o=0;o<l;o++){for(u=h.rows[o],f="",c=u.length,a=0;a<c;a++)f+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:h.align[a]});d+=this.renderer.tablerow(f)}r+=this.renderer.table(p,d);continue}case"blockquote":{d=this.parse(h.tokens),r+=this.renderer.blockquote(d);continue}case"list":{for(y=h.ordered,b=h.start,S=h.loose,l=h.items.length,d="",o=0;o<l;o++)$=h.items[o],N=$.checked,R=$.task,k="",$.task&&(M=this.renderer.checkbox(N),S?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=M+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=M+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:M}):k+=M),k+=this.parse($.tokens,S),d+=this.renderer.listitem(k,R,N);r+=this.renderer.list(d,y,b);continue}case"html":{r+=this.renderer.html(h.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;s+1<D&&e[s+1].type==="text";)h=e[++s],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=t?this.renderer.paragraph(d):d;continue}default:{const L='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(L);return}else throw new Error(L)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",s,o,a;const l=e.length;for(s=0;s<l;s++){if(o=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(a=this.options.extensions.renderers[o.type].call({parser:this},o),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){r+=a||"";continue}switch(o.type){case"escape":{r+=t.text(o.text);break}case"html":{r+=t.html(o.text);break}case"link":{r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{r+=t.image(o.href,o.title,o.text);break}case"strong":{r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(o.tokens,t));break}case"text":{r+=t.text(o.text);break}default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return r}}class Hooks{constructor(e){this.options=e||defaults}preprocess(e){return e}postprocess(e){return e}}K(Hooks,"passThroughHooks",new Set(["preprocess","postprocess"]));function onError(n,e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const s="<p>An error occurred:</p><pre>"+escape(r.message+"",!0)+"</pre>";if(e)return Promise.resolve(s);if(t){t(null,s);return}return s}if(e)return Promise.reject(r);if(t){t(r);return}throw r}}function parseMarkdown(n,e){return(t,r,s)=>{typeof r=="function"&&(s=r,r=null);const o={...r};r={...marked.defaults,...o};const a=onError(r.silent,r.async,s);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(checkSanitizeDeprecation(r),r.hooks&&(r.hooks.options=r),s){const l=r.highlight;let c;try{r.hooks&&(t=r.hooks.preprocess(t)),c=n(t,r)}catch(p){return a(p)}const u=function(p){let d;if(!p)try{r.walkTokens&&marked.walkTokens(c,r.walkTokens),d=e(c,r),r.hooks&&(d=r.hooks.postprocess(d))}catch(h){p=h}return r.highlight=l,p?a(p):s(null,d)};if(!l||l.length<3||(delete r.highlight,!c.length))return u();let f=0;marked.walkTokens(c,function(p){p.type==="code"&&(f++,setTimeout(()=>{l(p.text,p.lang,function(d,h){if(d)return u(d);h!=null&&h!==p.text&&(p.text=h,p.escaped=!0),f--,f===0&&u()})},0))}),f===0&&u();return}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(l=>n(l,r)).then(l=>r.walkTokens?Promise.all(marked.walkTokens(l,r.walkTokens)).then(()=>l):l).then(l=>e(l,r)).then(l=>r.hooks?r.hooks.postprocess(l):l).catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));const l=n(t,r);r.walkTokens&&marked.walkTokens(l,r.walkTokens);let c=e(l,r);return r.hooks&&(c=r.hooks.postprocess(c)),c}catch(l){return a(l)}}}function marked(n,e,t){return parseMarkdown(Lexer.lex,Parser.parse)(n,e,t)}marked.options=marked.setOptions=function(n){return marked.defaults={...marked.defaults,...n},changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(...n){const e=marked.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=marked.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const o=e.renderers[s.name];o?e.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[s.level]?e[s.level].unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),t.renderer){const s=marked.defaults.renderer||new Renderer;for(const o in t.renderer){const a=s[o];s[o]=(...l)=>{let c=t.renderer[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}r.renderer=s}if(t.tokenizer){const s=marked.defaults.tokenizer||new Tokenizer;for(const o in t.tokenizer){const a=s[o];s[o]=(...l)=>{let c=t.tokenizer[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}r.tokenizer=s}if(t.hooks){const s=marked.defaults.hooks||new Hooks;for(const o in t.hooks){const a=s[o];Hooks.passThroughHooks.has(o)?s[o]=l=>{if(marked.defaults.async)return Promise.resolve(t.hooks[o].call(s,l)).then(u=>a.call(s,u));const c=t.hooks[o].call(s,l);return a.call(s,c)}:s[o]=(...l)=>{let c=t.hooks[o].apply(s,l);return c===!1&&(c=a.apply(s,l)),c}}r.hooks=s}if(t.walkTokens){const s=marked.defaults.walkTokens;r.walkTokens=function(o){let a=[];return a.push(t.walkTokens.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}marked.setOptions(r)})};marked.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(marked,r)),r.type){case"table":{for(const s of r.header)t=t.concat(marked.walkTokens(s.tokens,e));for(const s of r.rows)for(const o of s)t=t.concat(marked.walkTokens(o.tokens,e));break}case"list":{t=t.concat(marked.walkTokens(r.items,e));break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[r.type]?marked.defaults.extensions.childTokens[r.type].forEach(function(s){t=t.concat(marked.walkTokens(r[s],e))}):r.tokens&&(t=t.concat(marked.walkTokens(r.tokens,e)))}return t};marked.parseInline=parseMarkdown(Lexer.lexInline,Parser.parseInline);marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.Hooks=Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;function data_get(n,e,t=null){var r=Array.isArray(e)?e:e.split("."),s=r.reduce((o,a)=>o&&o[a],n);return s!==void 0?s:t}const isString=tagTester("String");var isArguments=tagTester("Arguments");(function(){isArguments(arguments)||(isArguments=function(n){return has(n,"callee")})})();const isArguments$1=isArguments;function isEmpty(n){if(n==null)return!0;var e=getLength(n);return typeof e=="number"&&(isArray(n)||isString(n)||isArguments$1(n))?e===0:getLength(keys(n))===0}function values(n){for(var e=keys(n),t=e.length,r=Array(t),s=0;s<t;s++)r[s]=n[e[s]];return r}function sortedIndex(n,e,t,r){t=cb(t,r,1);for(var s=t(e),o=0,a=getLength(n);o<a;){var l=Math.floor((o+a)/2);t(n[l])<s?o=l+1:a=l}return o}function createPredicateIndexFinder(n){return function(e,t,r){t=cb(t,r);for(var s=getLength(e),o=n>0?0:s-1;o>=0&&o<s;o+=n)if(t(e[o],o,e))return o;return-1}}const findIndex=createPredicateIndexFinder(1),isNumber=tagTester("Number");function isNaN$1(n){return isNumber(n)&&_isNaN(n)}function createIndexFinder(n,e,t){return function(r,s,o){var a=0,l=getLength(r);if(typeof o=="number")n>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(t&&o&&l)return o=t(r,s),r[o]===s?o:-1;if(s!==s)return o=e(slice.call(r,a,l),isNaN$1),o>=0?o+a:-1;for(o=n>0?a:l-1;o>=0&&o<l;o+=n)if(r[o]===s)return o;return-1}}const indexOf=createIndexFinder(1,findIndex,sortedIndex);function contains(n,e,t,r){return isArrayLike(n)||(n=values(n)),(typeof t!="number"||r)&&(t=0),indexOf(n,e,t)>=0}function intersection(n){for(var e=[],t=arguments.length,r=0,s=getLength(n);r<s;r++){var o=n[r];if(!contains(e,o)){var a;for(a=1;a<t&&contains(arguments[a],o);a++);a===t&&e.push(o)}}return e}function negate(n){return function(){return!n.apply(this,arguments)}}function reject(n,e,t){return filter(n,negate(cb(e)),t)}function initial(n,e,t){return slice.call(n,0,Math.max(0,n.length-(e==null||t?1:e)))}function first(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[0]:initial(n,n.length-e)}mixin({chain,map,each,filter,reject,first,isEmpty});const NUMBER_SPECIFIC_COMPARISONS=[">",">=","<","<="];class Validator{constructor(n,e,t,r){this.field=n,this.values=e,this.rootValues=t?t.state.publish[r].values:!1,this.store=t,this.storeName=r,this.passOnAny=!1,this.showOnPass=!0,this.converter=new Converter}passesConditions(n){let e=n||this.getConditions();if(e===void 0)return!0;if(this.isCustomConditionWithoutTarget(e))return this.passesCustomCondition(this.prepareCondition(e));let t=this.passOnAny?this.passesAnyConditions(e):this.passesAllConditions(e);return this.showOnPass?t:!t}getConditions(){let n=chain(KEYS).filter(t=>this.field[t]).first().value();if(!n)return;n.includes("any")&&(this.passOnAny=!0),(n.includes("unless")||n.includes("hide_when"))&&(this.showOnPass=!1);let e=this.field[n];return this.isCustomConditionWithoutTarget(e)?e:this.converter.fromBlueprint(e,this.field.prefix)}isCustomConditionWithoutTarget(n){return isString(n)}passesAllConditions(n){return chain(n).map(e=>this.prepareCondition(e)).reject(e=>this.passesCondition(e)).isEmpty().value()}passesAnyConditions(n){return!chain(n).map(e=>this.prepareCondition(e)).filter(e=>this.passesCondition(e)).isEmpty().value()}prepareCondition(n){if(isString(n)||n.operator==="custom")return this.prepareCustomCondition(n);let e=this.prepareOperator(n.operator),t=this.prepareLhs(n.field,e),r=this.prepareRhs(n.value,e);return{lhs:t,operator:e,rhs:r}}prepareOperator(n){switch(n){case null:case"":case"is":case"equals":return"==";case"isnt":case"not":case"\\_()_/":return"!=";case"includes":case"contains":return"includes";case"includes_any":case"contains_any":return"includes_any"}return n}prepareLhs(n,e){let t=this.getFieldValue(n);return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(t):e==="includes"&&!isObject(t)?t?t.toString():"":(isString(t)&&isEmpty(t)&&(t=null),isString(t)?JSON.stringify(t.trim()):t)}prepareRhs(n,e){switch(n){case"null":return null;case"true":return!0;case"false":return!1}return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(n):n==="empty"||e==="includes"||e==="includes_any"?n:isString(n)?JSON.stringify(n.trim()):n}prepareCustomCondition(n){let e=this.prepareFunctionName(n.value||n),t=this.prepareParams(n.value||n),r=n.field?this.getFieldValue(n.field):null;return{functionName:e,params:t,target:r}}prepareFunctionName(n){return n.replace(new RegExp("^custom "),"").split(":")[0]}prepareParams(n){let e=n.split(":")[1];return e?e.split(",").map(t=>t.trim()):[]}getFieldValue(n){return n.startsWith("root.")?data_get(this.rootValues,n.replace(new RegExp("^root."),"")):data_get(this.values,n)}passesCondition(condition){return condition.functionName?this.passesCustomCondition(condition):condition.operator==="includes"?this.passesIncludesCondition(condition):condition.operator==="includes_any"?this.passesIncludesAnyCondition(condition):(condition.rhs==="empty"&&(condition.lhs=isEmpty(condition.lhs),condition.rhs=!0),isObject(condition.lhs)?!1:eval(`${condition.lhs} ${condition.operator} ${condition.rhs}`))}passesIncludesCondition(n){return n.lhs.includes(n.rhs)}passesIncludesAnyCondition(n){let e=n.rhs.split(",").map(t=>t.trim());return Array.isArray(n.lhs)?intersection(n.lhs,e).length:new RegExp(e.join("|")).test(n.lhs)}passesCustomCondition(n){let e=data_get(this.store.state.statamic.conditions,n.functionName);if(typeof e!="function")return console.error(`Statamic field condition [${n.functionName}] was not properly defined.`),!1;let t=e({params:n.params,target:n.target,values:this.values,root:this.rootValues,store:this.store,storeName:this.storeName});return this.showOnPass?t:!t}passesNonRevealerConditions(n){let e=this.getConditions();if(this.isCustomConditionWithoutTarget(e))return this.passesConditions(e);let t=data_get(this.store.state.publish[this.storeName],"revealerFields",[]),r=chain(this.getConditions()).reject(s=>t.includes(this.relativeLhsToAbsoluteFieldPath(s.field,n))).value();return this.passesConditions(r)}relativeLhsToAbsoluteFieldPath(n,e){return e?n.startsWith("root.")?n.replace(/^root\./,""):e+"."+n:n}}const ValidatesFieldConditions={inject:{storeName:{default:"base"}},methods:{showField(n,e){let t=e||n.handle,r=e?e.replace(new RegExp("."+n.handle+"$"),""):"";if(n.visibility==="hidden"||this.shouldForceHiddenField(t))return this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:t,hidden:"force",omitValue:!1}),!1;let s=new Validator(n,this.values,this.$store,this.storeName),o=s.passesConditions();return n.always_save===!0?(this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:t,hidden:!o,omitValue:!1}),o):(this.$nextTick(()=>{this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:t,hidden:!o,omitValue:n.type==="revealer"||!s.passesNonRevealerConditions(r)})}),o)},shouldForceHiddenField(n){return data_get(this.$store.state.publish[this.storeName].hiddenFields[n],"hidden")==="force"}}},_sfc_main$9={props:{storeName:{type:String}},provide(){return{storeName:this.storeName}}};var _sfc_render$9=function n(){var e=this,t=e._self._c;return t("div",[e._t("default")],2)},_sfc_staticRenderFns$9=[],__component__$9=normalizeComponent(_sfc_main$9,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,null,null,null);const ProvideStoreName=__component__$9.exports,_sfc_main$8={props:["editor","node","decorations","selected","extension","getPos","updateAttributes","deleteNode"],components:{NodeViewWrapper,SetField,ProvideStoreName},mixins:[ValidatesFieldConditions],data(){return{modalActive:!1,provide:{storeName:this.storeName}}},computed:{fields(){return this.config.fields},display(){return this.config.display||this.values.type},values(){return this.node.attrs.values},meta(){return{}},parentName(){return this.extension.options.bard.name},index(){return 0},bard(){return this.extension.options.bard},config(){return _.findWhere(this.spotConfigs,{handle:this.values.type})||{}},groupConfigs(){return this.bard.config.bts_spots},spotConfigs(){return _.reduce(this.groupConfigs,(n,e)=>n.concat(e.sets),[])}},methods:{openModal(){this.modalActive=!0},closeModal(){this.modalActive&&(this.modalActive=!1,this.editor.commands.focus())},updated(n,e){let t=Object.assign({},this.values);t.type=this.config.handle,t[n]=e,this.updateAttributes({values:t})},metaUpdated(n,e){},focused(){},blurred(){},fieldPath(n){return`${this.bard.fieldPathPrefix||this.bard.handle}.${this.index}.attrs.values.${n.handle}`}}};var _sfc_render$8=function n(){var e=this,t=e._self._c;return t("node-view-wrapper",{staticClass:"bts-spot shadow-md"},[t("div",{staticClass:"bts-spot-display",attrs:{"data-drag-handle":""}},[e._v(e._s(e.display))]),t("popover",{attrs:{placement:"bottom-start"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("div",{staticClass:"bts-spot-edit",on:{click:e.openModal}},[t("svg",{staticClass:"fill-current",attrs:{width:"12",viewBox:"0 0 24 24"}},[t("circle",{attrs:{cx:"3",cy:"12",r:"3"}}),t("circle",{attrs:{cx:"12",cy:"12",r:"3"}}),t("circle",{attrs:{cx:"21",cy:"12",r:"3"}})])])]},proxy:!0},{key:"default",fn:function(){return[t("provide-store-name",{attrs:{"store-name":e.storeName}},[t("div",{staticClass:"flex-1 publish-fields @container"},e._l(e.fields,function(r){return t("set-field",{key:r.handle,attrs:{field:r,value:e.values[r.handle],meta:e.meta[r.handle],"parent-name":e.parentName,"set-index":e.index,"field-path":e.fieldPath(r)},on:{updated:function(s){return e.updated(r.handle,s)},"meta-updated":function(s){return e.metaUpdated(r.handle,s)},focus:e.focused,blur:e.blurred}})}),1)])]},proxy:!0}])})],1)},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(_sfc_main$8,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,null,null,null);const SpotComponent=__component__$8.exports,{Node}=Statamic.$bard.tiptap.core,Spot=Node.create({name:"btsSpot",group:"inline",inline:!0,selectable:!0,draggable:!0,defining:!1,addOptions(){return{bard:{}}},addAttributes(){return{id:{default:null},values:{default:null}}},addNodeView(){return VueNodeViewRenderer(SpotComponent)},parseHTML(){return[{tag:"bts-spot"}]},renderHTML({HTMLAttributes:n}){return["bts-spot",n]},addCommands(){return{btsInsertSpot:n=>({chain:e})=>e().focus().insertContent({type:"btsSpot",attrs:n}).run()}}}),{Extension:Extension$3}=Statamic.$bard.tiptap.core,Core=Extension$3.create({name:"btsCore",addOptions(){return{bard:{},attr:null,stylesExts:[]}},addGlobalAttributes(){const{attr:n,stylesExts:e}=this.options;return[{types:e,attributes:{[n]:{parseHTML:t=>t.getAttribute("data-bts-style"),renderHTML:t=>({["data-bts-style"]:t[n]})}}}]},addCommands(){return{btsToggleHeading:n=>({commands:e})=>e.toggleNode("heading","paragraph",n),btsToggleParagraph:n=>({commands:e})=>e.toggleNode("paragraph","paragraph",n),btsToggleLink:n=>({commands:e,editor:t})=>t.isActive("link",n)?e.resetAttributes("link","class"):e.updateAttributes("link",n),btsToggleList:(n,e)=>({commands:t,editor:r,chain:s})=>r.isActive(e,n)?t.toggleList(e,"listItem"):r.isActive(e)?t.updateAttributes(e,n):s().toggleList(e,"listItem").updateAttributes(e,n).run(),btsToggleBulletList:n=>({commands:e})=>e.btsToggleList(n,"bulletList"),btsToggleOrderedList:n=>({commands:e})=>e.btsToggleList(n,"orderedList")}},onUpdate(){this.options.bard.$emit("bts-update")},onSelectionUpdate(){this.options.bard.$emit("bts-update")}}),{Extension:Extension$2}=Statamic.$bard.tiptap.core,Overrides=Extension$2.create({name:"btsOverrides",addOptions(){return{bard:{},stylesExts:[],stylesMenuOptions:{}}},onCreate(){const{bard:n,stylesExts:e,stylesMenuOptions:t}=this.options,r=[...e.includes("heading")?["h1","h2","h3","h4","h5","h6"]:[],...e.includes("bulletList")?["unorderedlist"]:[],...e.includes("orderedList")?["orderedlist"]:[]];if(n.buttons.forEach(s=>{r.includes(s.name)&&(s.args={...s.args||{},class:null}),s.name==="unorderedlist"&&e.includes("bulletList")&&(s.command=(o,a)=>o.chain().focus().btsToggleBulletList(a).run()),s.name==="orderedlist"&&e.includes("orderedList")&&(s.command=(o,a)=>o.chain().focus().btsToggleOrderedList(a).run())}),n.buttons.find(s=>s.name==="bts_styles")){const s=(n.config.bts_styles||[]).filter(o=>Object.keys(t).includes(o));n.buttons.forEach(o=>{s.includes(o.name)&&(o.visible=()=>!1)})}}}),{Plugin,PluginKey}=Statamic.$bard.tiptap.pm.state,{Decoration,DecorationSet}=Statamic.$bard.tiptap.pm.view,{Extension:Extension$1}=Statamic.$bard.tiptap.core,Defaults=Extension$1.create({name:"btsDefaults",addOptions(){return{bard:{},store:null,defaultsCpExts:{}}},addProseMirrorPlugins(){const{bard:n,defaultsCpExts:e}=this.options,t=n.config.bts_defaults||"standard",r=e[t];return r===void 0||!r.length?[]:[new Plugin({key:new PluginKey("btsDefaults"),props:{attributes:{"data-bts-defaults":t},decorations(s){const o=[];return s.doc.descendants((a,l)=>{a.type.name==="btsDiv"&&o.push(Decoration.node(l,l+a.nodeSize,{"data-bts-defaults":t}))}),DecorationSet.create(s.doc,o)}}})]}}),kebab=n=>n.replaceAll("_","-").replaceAll(/(.)(?=[A-Z])/g,"$1-").toLowerCase(),{Extension,getNodeAttributes}=Statamic.$bard.tiptap.core,Attributes=Extension.create({name:"btsAttributes",addOptions(){return{attributesExts:{},attributes:{}}},addGlobalAttributes(){const{attributes:n}=this.options,e={true:(r,s)=>({rendered:!0}),false:(r,s)=>({rendered:!1}),class:(r,s)=>({parseHTML:o=>o.getAttribute(`data-bts-attribute-${kebab(r)}`),renderHTML:o=>({[`data-bts-attribute-${kebab(r)}`]:o[r]})}),style:(r,s)=>({parseHTML:o=>o.style[kebab(r)],renderHTML:o=>o[r]!==void 0&&o[r]!==null?{style:`${kebab(r)}: ${o[r]}`}:null})},t=Object.entries(n).reduce((r,[s,o])=>{const a=o.ext;return r[a]={...r[a]||{},...o.attrs},r},{});return Object.entries(t).map(([r,s])=>({types:[r],attributes:Object.fromEntries(Object.entries(s).filter(([o,a])=>a.extra).map(([o,a])=>[o,{default:typeof a.default<"u"?a.default:null,...typeof a.rendered<"u"?e[a.rendered.toString()](o,a):e.true()}]))}))},addCommands(){const{attributesExts:n}=this.options;return{btsAttributesFetch:()=>({state:e})=>{const{from:t,to:r}=e.selection,s=[];return e.doc.nodesBetween(t,t+1,o=>{n.includes(o.type.name)?s.push({kind:"node",type:o.type.name,attrs:{...o.attrs}}):o.type.name==="text"&&o.marks.forEach(a=>{n.includes(a.type.name)&&s.push({kind:"mark",type:a.type.name,attrs:{...a.attrs}})})}),{info:{from:t,to:r},items:s.reverse()}},btsAttributesApply:({info:e,items:t})=>({state:r,chain:s})=>{const{from:o,to:a}=r.selection;if(o!==e.from||a!==e.to)return;let l=s().focus();return t.forEach(c=>{c.kind==="mark"&&(l=l.extendMarkRange(c.type)),l=l.updateAttributes(c.type,c.attrs)}),l.setTextSelection({from:o,to:a}).run()}}}}),_sfc_main$7={props:{item:Object,config:{},bard:{},editor:{},btsOptions:{}},computed:{active(){if(this.item.hasOwnProperty("active"))return this.item.active(this.editor,this.item.args);const n=this.item.hasOwnProperty("activeName")?"activeName":"name",e=this.item[n];return this.editor.isActive(e,this.item.args)},visible(){return this.item.hasOwnProperty("btsMenuVisible")?this.item.btsMenuVisible(this.editor,this.item.args):!0},previewType(){var n;return((n=this.item.btsStyle)==null?void 0:n.type)||Object.values(this.btsOptions.types).find(e=>e.button===this.item.name).name},previewStyle(){var n;return(n=this.item.btsStyle)==null?void 0:n[this.btsOptions.store]}},methods:{click(){this.item.command(this.editor,this.item.args),this.$emit("picked")}}};var _sfc_render$7=function n(){var e=this,t=e._self._c;return e.visible?t("button",{staticClass:"bts-styles-item",class:{active:e.active},on:{click:e.click}},[t(e.previewType==="ordered_list"?"ol":"div",{tag:"component"},[t("div",{staticClass:"bts-preview",attrs:{"data-bts-type":e.previewType,"data-bts-style":e.previewStyle}},[e._v(" "+e._s(e.item.text)+" ")])])],1):e._e()},_sfc_staticRenderFns$7=[],__component__$7=normalizeComponent(_sfc_main$7,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,null,null,null);const StylesItem=__component__$7.exports,_sfc_main$6={components:{StylesItem},props:{config:{},bard:{},editor:{},btsOptions:{},items:[]},created(){this.bard.$on("bts-update",this.close)},beforeDestroy(){this.bard.$off("bts-update",this.close)},methods:{close(){this.$emit("close")}},computed:{previewDefaults(){return this.bard.config.bts_defaults||"standard"}}};var _sfc_render$6=function n(){var e=this,t=e._self._c;return t("div",{staticClass:"bts-styles",attrs:{"data-bts-defaults":e.previewDefaults}},[e.items.length?t("div",{staticClass:"bts-styles-items"},e._l(e.items,function(r){return t("StylesItem",{key:r.name,attrs:{item:r,config:e.config,bard:e.bard,editor:e.editor,btsOptions:e.btsOptions},on:{picked:function(s){return e.$emit("picked")}}})}),1):t("div",{staticClass:"p-8 w-40 text-center text-gray-400"},[t("svg",{staticClass:"w-12 h-12",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{staticStyle:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},attrs:{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",stroke:"currentColor"}})])])])},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(_sfc_main$6,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,null,null,null);const StylesMenu=__component__$6.exports,_sfc_main$5={mixins:[BardToolbarButton],components:{StylesMenu},data(){return{panelActive:!1,activeItem:null}},created(){this.type==="text"&&(this.updateActiveItem(),this.bard.$on("bts-update",this.updateActiveItem))},beforeDestroy(){this.type==="text"&&this.bard.$off("bts-update",this.updateActiveItem)},computed:{items(){const n=this.bard.buttons,e=(this.config.bts_styles||[]).filter(t=>Object.keys(this.button.btsOptions.stylesMenuOptions).includes(t));return n.filter(t=>typeof t=="object"&&e.includes(t.name))},type(){return this.config.bts_styles_button}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&(this.togglePanel(),this.$refs.popover.close())},updateActiveItem(){this.activeItem=this.items.find(n=>{if(n.hasOwnProperty("active"))return n.active(this.editor,n.args);const e=n.hasOwnProperty("activeName")?"activeName":"name",t=n[e];return this.editor.isActive(t,n.args)})}}};var _sfc_render$5=function n(){var e=this,t=e._self._c;return t("popover",{ref:"popover",attrs:{placement:"bottom-start",clickaway:!0},on:{closed:e.closePanel},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.type==="icon"?e.button.text:void 0,expression:"type === 'icon' ? button.text : undefined"}],staticClass:"bard-toolbar-button",class:{"bts-styles-button-icon":e.type==="icon","bts-styles-button-text":e.type==="text"},attrs:{"aria-label":e.button.text},on:{click:e.togglePanel}},[e.type==="icon"?t("div",{staticClass:"flex items-center",domProps:{innerHTML:e._s(e.button.html)}}):e._e(),e.type==="text"?t("span",[e._v(e._s(e.activeItem?e.activeItem.text:e.button.text))]):e._e()])]},proxy:!0},{key:"default",fn:function(){return[e.panelActive?t("StylesMenu",{attrs:{config:e.config,bard:e.bard,editor:e.editor,btsOptions:e.button.btsOptions,items:e.items},on:{close:e.closePanel,picked:e.closePanel}}):e._e()]},proxy:!0}])})},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(_sfc_main$5,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,null,null,null);const StylesButton=__component__$5.exports,_sfc_main$4={props:{value:null}};var _sfc_render$4=function n(){var e=this,t=e._self._c;return t("input",{attrs:{type:"text"},domProps:{value:e.value},on:{input:function(r){return e.$emit("input",r.target.value!==""?r.target.value:null)}}})},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(_sfc_main$4,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,null,null,null);const TextInput=__component__$4.exports,_sfc_main$3={components:{TextInput},props:{config:{},bard:{},editor:{},btsOptions:{}},data(){const{info:n,items:e}=this.editor.commands.btsAttributesFetch();return{activeItem:0,info:n,items:e}},created(){this.bard.$on("bts-update",this.close)},beforeDestroy(){this.bard.$off("bts-update",this.close)},methods:{display(n){return this.btsOptions.types.getByItem(n).display},attrs(n){return this.btsOptions.attributes[this.btsOptions.types.getByItem(n).name].attrs},apply(){this.editor.commands.btsAttributesApply({info:this.info,items:this.items}),this.$emit("applied")},close(){this.$emit("close")},trueValue(n){var e;return((e=n.values)==null?void 0:e.true)!==void 0?n.values.true:!0},falseValue(n){var e;return((e=n.values)==null?void 0:e.false)!==void 0?n.values.false:n.rendered?null:!1}}};var _sfc_render$3=function n(){var e=this,t=e._self._c;return t("div",{staticClass:"bts-attributes"},[e.items.length?t("div",[e._l(e.items,function(r,s){return t("div",[t("div",{staticClass:"px-4 py-3 title-case border-b flex items-center cursor-pointer",class:{"text-gray-700":e.activeItem!==s},on:{click:function(o){e.activeItem=s}}},[t("svg",{staticClass:"w-4 h-4 bts-attributes-arrow text-gray-700",class:{"rotate-90":e.activeItem===s},attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}})]),e._v(" "+e._s(e.__(e.display(r)))+" ")]),e.activeItem===s?t("div",{staticClass:"p-4 pt-1 border-b"},e._l(e.attrs(r),function(o,a){return t("div",{staticClass:"mt-3"},[o.field==="select"?t("label",{staticClass:"font-normal"},[t("div",{staticClass:"text-sm leading-none"},[e._v(e._s(o.display||a))]),t("select",{directives:[{name:"model",rawName:"v-model",value:r.attrs[a],expression:"item.attrs[name]"}],staticClass:"mt-2 h-8 px-1 border rounded shadow-inner bg-gray-100 text-gray-800 w-full text-sm bts-border-gray-450",on:{change:function(l){var c=Array.prototype.filter.call(l.target.options,function(u){return u.selected}).map(function(u){var f="_value"in u?u._value:u.value;return f});e.$set(r.attrs,a,l.target.multiple?c:c[0])}}},[o.clearable?t("option",{domProps:{value:null}}):e._e(),e._l(o.options,function(l,c){return t("option",{domProps:{value:c}},[e._v(e._s(l))])})],2)]):o.field==="toggle"?t("label",{staticClass:"flex items-baseline font-normal"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.attrs[a],expression:"item.attrs[name]"}],attrs:{type:"checkbox","true-value":e.trueValue(o),"false-value":e.falseValue(o)},domProps:{checked:Array.isArray(r.attrs[a])?e._i(r.attrs[a],null)>-1:e._q(r.attrs[a],e.trueValue(o))},on:{change:function(l){var c=r.attrs[a],u=l.target,f=u.checked?e.trueValue(o):e.falseValue(o);if(Array.isArray(c)){var p=null,d=e._i(c,p);u.checked?d<0&&e.$set(r.attrs,a,c.concat([p])):d>-1&&e.$set(r.attrs,a,c.slice(0,d).concat(c.slice(d+1)))}else e.$set(r.attrs,a,f)}}}),t("div",{staticClass:"text-sm ml-1"},[e._v(e._s(o.display||a))])]):t("label",{staticClass:"font-normal"},[t("div",{staticClass:"text-sm leading-none"},[e._v(e._s(o.display||a))]),t("TextInput",{staticClass:"mt-2 h-8 p-2 bg-gray-100 text-gray-800 w-full border bts-border-gray-450 rounded shadow-inner text-sm",attrs:{type:"text"},model:{value:r.attrs[a],callback:function(l){e.$set(r.attrs,a,l)},expression:"item.attrs[name]"}})],1)])}),0):e._e()])}),t("div",{staticClass:"bg-gray-100 rounded-b-md flex items-center justify-end space-x-3 font-normal p-2"},[t("button",{staticClass:"text-xs text-gray-600 hover:text-gray-800",on:{click:e.close}},[e._v(" "+e._s(e.__("Cancel"))+" ")]),t("button",{staticClass:"btn btn-sm",on:{click:e.apply}},[e._v(" "+e._s(e.__("Apply"))+" ")])])],2):t("div",{staticClass:"p-8 text-center text-gray-400"},[t("svg",{staticClass:"w-12 h-12",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{staticStyle:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},attrs:{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",stroke:"currentColor"}})])])])},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const AttributesPanel=__component__$3.exports,_sfc_main$2={mixins:[BardToolbarButton],components:{AttributesPanel},data(){return{panelActive:!1}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&(this.togglePanel(),this.$refs.popover.close())}}};var _sfc_render$2=function n(){var e=this,t=e._self._c;return t("popover",{ref:"popover",attrs:{placement:"bottom-start",clickaway:!0},on:{closed:e.closePanel},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.button.text,expression:"button.text"}],staticClass:"bard-toolbar-button",attrs:{"aria-label":e.button.text},domProps:{innerHTML:e._s(e.button.html)},on:{click:e.togglePanel}})]},proxy:!0},{key:"default",fn:function(){return[e.panelActive?t("AttributesPanel",{attrs:{config:e.config,bard:e.bard,editor:e.editor,btsOptions:e.button.btsOptions},on:{applied:e.closePanel,close:e.closePanel}}):e._e()]},proxy:!0}])})},_sfc_staticRenderFns$2=[],__component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,null,null,null);const AttributesButton=__component__$2.exports;var uniqidExports={},uniqid={get exports(){return uniqidExports},set exports(n){uniqidExports=n}},pid=typeof process<"u"&&process.pid?process.pid.toString(36):"",address="";if(typeof __webpack_require__!="function"&&typeof commonjsRequire<"u"){var mac="",os$1=require$$0;if(os$1.networkInterfaces)var networkInterfaces=os$1.networkInterfaces();if(networkInterfaces){e:for(let n in networkInterfaces){const e=networkInterfaces[n],t=e.length;for(var i=0;i<t;i++)if(e[i]!==void 0&&e[i].mac&&e[i].mac!="00:00:00:00:00:00"){mac=e[i].mac;break e}}address=mac?parseInt(mac.replace(/\:|\D+/gi,"")).toString(36):""}}uniqid.exports=uniqidExports.default=function(n,e){return(n||"")+address+pid+now().toString(36)+(e||"")};uniqidExports.process=function(n,e){return(n||"")+pid+now().toString(36)+(e||"")};uniqidExports.time=function(n,e){return(n||"")+now().toString(36)+(e||"")};function now(){var n=Date.now(),e=now.last||n;return now.last=n>e?n:e+1}const _sfc_main$1={props:{sets:Array},data(){return{selectedGroupHandle:null,search:null,selectionIndex:0,keybindings:[]}},computed:{showSearch(){return!this.hasMultipleGroups||!this.selectedGroup},showGroupBreadcrumb(){return this.hasMultipleGroups&&this.selectedGroup},showGroups(){return this.hasMultipleGroups&&!this.selectedGroup&&!this.search},hasMultipleSets(){return this.sets.reduce((n,e)=>n+e.sets.length,0)>1},hasMultipleGroups(){return this.sets.length>1},selectedGroup(){return this.sets.find(n=>n.handle===this.selectedGroupHandle)},selectedGroupDisplayText(){return this.selectedGroup?this.selectedGroup.display||this.selectedGroup.handle:null},visibleSets(){if(!this.selectedGroup&&!this.search)return[];let n=this.selectedGroup?this.selectedGroup.sets:this.sets.reduce((e,t)=>e.concat(t.sets),[]);return this.search?n.filter(e=>e.display.toLowerCase().includes(this.search.toLowerCase())||e.handle.toLowerCase().includes(this.search.toLowerCase())):n},items(){let n=[];return this.showGroups&&this.sets.forEach(e=>{n.push({...e,type:"group"})}),this.visibleSets.forEach(e=>{n.push({...e,type:"set"})}),n},noSearchResults(){return this.search&&this.visibleSets.length===0}},watch:{search(){this.selectionIndex=0}},methods:{addSet(n){this.$emit("added",n),this.unselectGroup(),this.search=null,this.$refs.popover.close()},selectGroup(n){this.selectedGroupHandle=n,this.selectionIndex=0},unselectGroup(){this.selectedGroupHandle=null},opened(){this.$refs.search.focus(),this.sets.length===1&&(this.selectedGroupHandle=this.sets[0].handle),this.bindKeys()},closed(){this.unbindKeys()},bindKeys(){this.keybindings=[this.$keys.bindGlobal("up",n=>this.keypressUp(n)),this.$keys.bindGlobal("down",n=>this.keypressDown(n)),this.$keys.bindGlobal("enter",n=>this.keypressEnter(n))]},unbindKeys(){this.keybindings.forEach(n=>n.destroy()),this.keybindings=[]},keypressUp(n){n.preventDefault(),this.selectionIndex=this.selectionIndex===0?this.items.length-1:this.selectionIndex-1},keypressDown(n){n.preventDefault(),this.selectionIndex=this.selectionIndex===this.items.length-1?0:this.selectionIndex+1},keypressEnter(n){n.preventDefault();const e=this.items[this.selectionIndex];e.type==="group"?this.selectGroup(e.handle):this.addSet(e.handle)},triggerWasClicked(){this.hasMultipleSets||this.addSet(this.sets[0].sets[0].handle)}}};var _sfc_render$1=function n(){var e=this,t=e._self._c;return t("popover",{ref:"popover",staticClass:"set-picker select-none",attrs:{placement:"bottom-start",disabled:!e.hasMultipleSets},on:{opened:e.opened,closed:e.closed,click:e.triggerWasClicked,"clicked-away":function(r){return e.$emit("clicked-away",r)}},scopedSlots:e._u([{key:"trigger",fn:function(){return[e._t("trigger")]},proxy:!0},{key:"default",fn:function(){return[t("div",{staticClass:"set-picker-header p-3 border-b text-xs flex items-center"},[t("input",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"},{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"search",staticClass:"py-1 px-2 border rounded w-full",attrs:{type:"text",placeholder:e.__("Search Sets")},domProps:{value:e.search},on:{input:function(r){r.target.composing||(e.search=r.target.value)}}}),e.showGroupBreadcrumb?t("div",{staticClass:"flex items-center text-gray-700 font-medium"},[t("button",{staticClass:"hover:text-gray-900 ml-2.5 rounded",on:{click:e.unselectGroup}},[e._v(" "+e._s(e.__("Groups"))+" ")]),t("svg-icon",{staticClass:"w-4 h-4",attrs:{name:"micro/chevron-right"}}),t("span",[e._v(e._s(e.selectedGroupDisplayText))])],1):e._e()]),t("div",{staticClass:"p-1 max-h-80 overflow-auto"},[e._l(e.items,function(r,s){return t("div",{key:r.handle,staticClass:"cursor-pointer rounded",class:{"bg-gray-200":e.selectionIndex===s},on:{mouseover:function(o){e.selectionIndex=s}}},[r.type==="group"?t("div",{staticClass:"flex items-center group px-2 py-1.5 rounded-md",on:{click:function(o){return e.selectGroup(r.handle)}}},[t("div",{staticClass:"h-9 w-9 rounded bg-white border border-gray-600 mr-2 p-2"},[t("svg-icon",{staticClass:"text-gray-800",attrs:{name:r.icon?`plump/${r.icon}`:"folder-generic"}})],1),t("div",{staticClass:"flex-1"},[t("div",{staticClass:"text-md font-medium text-gray-800 truncate w-52"},[e._v(e._s(r.display||r.handle))]),r.instructions?t("div",{staticClass:"text-2xs text-gray-700 truncate w-52"},[e._v(e._s(r.instructions))]):e._e()]),t("svg-icon",{staticClass:"text-gray-600 group-hover:text-gray-800",attrs:{name:"micro/chevron-right-thin"}})],1):e._e(),r.type==="set"?t("div",{staticClass:"flex items-center group px-2 py-1.5 rounded-md",on:{click:function(o){return e.addSet(r.handle)}}},[t("div",{staticClass:"h-9 w-9 rounded bg-white border border-gray-600 mr-2 p-2"},[t("svg-icon",{staticClass:"text-gray-800",attrs:{name:r.icon?`plump/${r.icon}`:"light/add"}})],1),t("div",{staticClass:"flex-1"},[t("div",{staticClass:"text-md font-medium text-gray-800 truncate w-52"},[e._v(e._s(r.display||r.handle))]),r.instructions?t("div",{staticClass:"text-2xs text-gray-700 truncate w-52"},[e._v(e._s(r.instructions))]):e._e()])]):e._e()])}),e.noSearchResults?t("div",{staticClass:"text-center text-gray-600 text-xs p-3"},[e._v(" "+e._s(e.__("No results"))+" ")]):e._e()],2)]},proxy:!0}],null,!0)})},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,null,null,null);const SetPicker=__component__$1.exports,_sfc_main={mixins:[BardToolbarButton],components:{SetPicker},data(){return{pickerActive:!1,activeItem:null}},computed:{groupConfigs(){return this.config.bts_spots},spotConfigs(){return _.reduce(this.groupConfigs,(n,e)=>n.concat(e.sets),[])}},methods:{addSpot(n){const e=uniqidExports(),t=Object.assign({},{type:n},{});this.$nextTick(()=>{this.editor.commands.btsInsertSpot({id:e,values:t})})},togglePicker(){this.pickerActive=!this.pickerActive},closePicker(){this.pickerActive&&(this.togglePicker(),this.$refs.popover.close())},buttonClicked(){this.spotConfigs.length===1&&this.addSpot(this.spotConfigs[0].handle)}}};var _sfc_render=function n(){var e=this,t=e._self._c;return t("set-picker",{attrs:{sets:e.groupConfigs},on:{added:e.addSpot,"clicked-away":e.toggleClose},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.button.text,expression:"button.text"}],staticClass:"bard-toolbar-button",attrs:{"aria-label":e.button.text},on:{click:e.buttonClicked}},[t("div",{staticClass:"flex items-center",domProps:{innerHTML:e._s(e.button.html)}})])]},proxy:!0}])})},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,null,null,null);const SpotsButton=__component__.exports;let maskCount=0;const icons={letter:n=>{const e={heading:"H",paragraph:"P",btsSpan:"T"}[n.ext]??"S",t={H:'<path d="M2,6.594L6.857,6.594L6.857,1.429C6.857,0.956 7.241,0.571 7.714,0.571C8.187,0.571 8.571,0.956 8.571,1.429L8.571,14.571C8.571,15.044 8.187,15.429 7.714,15.429C7.241,15.429 6.857,15.044 6.857,14.571L6.857,8.309L2,8.309L2,14.571C2,15.044 1.616,15.429 1.143,15.429C0.67,15.429 0.286,15.044 0.286,14.571L0.286,1.429C0.286,0.956 0.67,0.571 1.143,0.571C1.616,0.571 2,0.956 2,1.429L2,6.594Z" />',P:'<path d="M1.153,0.666C0.672,0.666 0.275,1.063 0.275,1.544L0.275,14.565C0.275,15.045 0.672,15.443 1.174,15.443C1.654,15.443 2.052,15.045 2.052,14.565L2.052,9.674C2.699,9.737 3.078,9.764 3.894,9.764C5.586,9.764 6.489,9.325 7.409,8.427C8.308,7.528 8.768,6.441 8.768,5.166C8.768,3.85 8.35,2.763 7.514,1.906C6.657,1.049 5.67,0.631 3.747,0.631C3.058,0.631 2.428,0.645 1.153,0.666ZM2.052,2.338C2.971,2.317 3.35,2.303 3.914,2.303C6.172,2.303 6.887,3.369 6.887,5.145C6.887,6.985 5.984,8.092 3.831,8.092C3.204,8.092 2.846,8.044 2.052,7.981L2.052,2.338Z" />',T:'<path d="M9.492,2.338C9.931,2.338 10.307,1.941 10.307,1.502C10.307,1.063 9.931,0.666 9.492,0.666L1.104,0.666C0.665,0.666 0.289,1.063 0.289,1.502C0.289,1.941 0.665,2.338 1.104,2.338L4.41,2.338L4.41,14.565C4.41,15.045 4.807,15.443 5.308,15.443C5.789,15.443 6.186,15.045 6.186,14.565L6.186,2.338L9.492,2.338Z" />',S:'<path d="M4.081,15.505C5.274,15.505 6.265,15.129 7.073,14.398C7.862,13.666 8.266,12.726 8.266,11.534C8.266,6.539 1.989,7.898 1.989,4.282C1.989,2.965 2.888,2.129 4.301,2.129C5.017,2.129 5.715,2.359 6.357,2.798C6.522,2.903 6.669,2.944 6.779,2.944C7.018,2.944 7.22,2.819 7.385,2.547C7.477,2.443 7.514,2.296 7.514,2.108C7.514,1.816 7.422,1.586 7.22,1.44C6.321,0.792 5.311,0.457 4.21,0.457C3.017,0.457 2.08,0.813 1.383,1.544C0.685,2.276 0.337,3.195 0.337,4.282C0.337,9.131 6.614,7.981 6.614,11.555C6.614,12.976 5.513,13.833 4.1,13.833C3.347,13.833 2.466,13.415 1.456,12.558C1.328,12.454 1.199,12.412 1.034,12.412C0.796,12.412 0.612,12.517 0.465,12.726C0.355,12.872 0.3,13.06 0.3,13.248C0.3,13.499 0.373,13.687 0.52,13.833C1.677,14.941 2.87,15.505 4.081,15.505Z" />'}[e],r=n.ident;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="bts-icon-letter">
                ${t}
                <text text-anchor="middle" x="12.75" y="14.5" style="font-size: 10px; stroke-width: 1px; stroke: currentColor">${r}</text>
            </svg>
        `},square:n=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <rect width="15" height="15" x="0.5" y="0.5" rx="3" stroke-width="1" stroke="currentColor" fill="none" />
                <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${n.ident}</text>
            </svg>
        `,"square-solid":n=>{const e=n.ident,t=`bts-mask-${maskCount++}`;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <mask id="${t}">
                    <rect width="16" height="16" fill="white" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${e}</text>
                </mask>
                <rect width="15" height="15" x="0.5" y="0.5" rx="3" stroke-width="1" stroke="currentColor" mask="url(#${t})" />
            </svg>
        `},circle:n=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" fill="none" />
                <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${n.ident}</text>
            </svg>
        `,"circle-solid":n=>{const e=n.ident,t=`bts-mask-${maskCount++}`;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <mask id="${t}">
                    <rect width="16" height="16" fill="white" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${e}</text>
                </mask>
                <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" mask="url(#${t})" />
            </svg>
        `},"bullet-list":n=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2.333,1C2.882,1 3.333,1.451 3.333,2L3.333,3.333C3.333,3.882 2.882,4.333 2.333,4.333L1,4.333C0.451,4.333 0,3.882 0,3.333L0,2C-0,1.451 0.451,1 1,1L2.333,1ZM2.333,6.333C2.882,6.333 3.333,6.785 3.333,7.333L3.333,8.667C3.333,9.215 2.882,9.667 2.333,9.667L1,9.667C0.451,9.667 0,9.215 0,8.667L0,7.333C-0,6.785 0.451,6.333 1,6.333L2.333,6.333ZM2.333,11.667C2.882,11.667 3.333,12.118 3.333,12.667L3.333,14C3.333,14.549 2.882,15 2.333,15L1,15C0.451,15 0,14.549 0,14L0,12.667C-0,12.118 0.451,11.667 1,11.667L2.333,11.667Z" />
                <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${n.ident}</text>
            </svg>
        `,"ordered-list":n=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M1.473,11.5C0.873,11.5 0.343,11.907 0.187,12.487C0.175,12.529 0.169,12.573 0.169,12.617C0.169,12.891 0.395,13.117 0.67,13.117C0.896,13.117 1.095,12.965 1.153,12.747C1.192,12.602 1.324,12.501 1.473,12.5C1.656,12.5 1.807,12.65 1.807,12.833C1.807,13.016 1.656,13.167 1.473,13.167C1.199,13.167 0.973,13.392 0.973,13.667C0.973,13.941 1.199,14.167 1.473,14.167C1.656,14.167 1.807,14.317 1.807,14.5C1.809,14.514 1.809,14.529 1.809,14.543C1.809,14.728 1.658,14.879 1.473,14.879C1.305,14.879 1.162,14.753 1.14,14.587C1.09,14.358 0.886,14.194 0.652,14.194C0.377,14.194 0.152,14.42 0.152,14.694C0.152,14.751 0.161,14.807 0.18,14.86C0.345,15.427 0.869,15.82 1.46,15.82C2.187,15.82 2.786,15.226 2.793,14.5C2.795,14.236 2.716,13.978 2.567,13.76C2.533,13.702 2.533,13.631 2.567,13.573C2.716,13.356 2.795,13.097 2.793,12.833C2.793,12.107 2.2,11.507 1.473,11.5ZM2.833,7.167C2.833,6.435 2.231,5.833 1.5,5.833C0.769,5.833 0.167,6.435 0.167,7.167C0.17,7.44 0.394,7.663 0.667,7.667C0.94,7.663 1.163,7.44 1.167,7.167C1.167,6.984 1.317,6.833 1.5,6.833C1.683,6.833 1.833,6.984 1.833,7.167C1.834,7.322 1.779,7.473 1.68,7.593L0.273,9.333C0.156,9.483 0.133,9.687 0.213,9.86C0.297,10.034 0.474,10.145 0.667,10.147L2.333,10.147C2.608,10.147 2.833,9.921 2.833,9.647C2.833,9.372 2.608,9.147 2.333,9.147L2.053,9.147C1.991,9.146 1.934,9.109 1.907,9.053C1.87,8.999 1.87,8.928 1.907,8.873L2.447,8.207C2.686,7.912 2.822,7.546 2.833,7.167ZM2.667,3.5L2.5,3.5C2.409,3.5 2.333,3.425 2.333,3.333L2.333,1.08C2.33,0.578 1.916,0.167 1.413,0.167L1,0.167C0.726,0.167 0.5,0.392 0.5,0.667C0.5,0.941 0.726,1.167 1,1.167L1.167,1.167C1.258,1.167 1.333,1.242 1.333,1.333L1.333,3.333C1.333,3.425 1.258,3.5 1.167,3.5L1,3.5C0.726,3.5 0.5,3.726 0.5,4C0.5,4.274 0.726,4.5 1,4.5L2.667,4.5C2.941,4.5 3.167,4.274 3.167,4C3.167,3.726 2.941,3.5 2.667,3.5Z" />
                <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${n.ident}</text>
            </svg>
        `,link:n=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M10.031,7.51C9.534,8.211 9.615,9.178 10.223,9.786L10.562,10.125L10.126,10.562L9.786,10.222C9.178,9.614 8.211,9.533 7.51,10.031L7.3,10.18C6.802,10.534 6.365,10.967 6.007,11.463C5.419,12.28 5.51,13.413 6.222,14.125L7.351,15.254C8.063,15.966 9.196,16.057 10.013,15.469C10.509,15.111 10.943,14.674 11.298,14.175L11.461,13.945C11.951,13.256 11.87,12.305 11.272,11.707L10.915,11.35L11.351,10.914L11.709,11.271C12.306,11.869 13.257,11.949 13.947,11.46L14.177,11.296C14.675,10.942 15.112,10.508 15.47,10.012C16.058,9.195 15.967,8.062 15.255,7.35L14.126,6.221C13.414,5.51 12.281,5.419 11.464,6.007C10.968,6.364 10.534,6.801 10.179,7.3L10.031,7.51L10.031,7.51ZM12.141,10.125L12.499,10.483C12.713,10.696 13.053,10.725 13.3,10.55L13.53,10.386C13.929,10.103 14.278,9.756 14.564,9.359C14.833,8.985 14.791,8.466 14.466,8.141L13.336,7.011C13.01,6.686 12.491,6.644 12.117,6.913C11.721,7.199 11.373,7.548 11.09,7.947L10.941,8.156C10.757,8.415 10.787,8.772 11.012,8.996L11.351,9.335L11.729,8.957C11.835,8.848 11.98,8.787 12.131,8.787C12.438,8.787 12.69,9.039 12.69,9.345C12.69,9.496 12.628,9.641 12.519,9.746L12.141,10.125ZM9.336,11.351L8.964,11.723C8.859,11.828 8.8,11.97 8.8,12.118C8.8,12.424 9.053,12.676 9.359,12.676C9.507,12.676 9.65,12.617 9.754,12.512L10.126,12.141L10.483,12.498C10.697,12.712 10.725,13.053 10.55,13.299L10.386,13.53C10.103,13.929 9.756,14.278 9.36,14.563C8.986,14.833 8.467,14.791 8.141,14.465L7.012,13.336C6.686,13.011 6.644,12.492 6.913,12.118C7.199,11.721 7.548,11.373 7.947,11.09L8.157,10.941C8.415,10.758 8.772,10.788 8.996,11.013L9.336,11.352L9.336,11.351Z" style="fill-rule:evenodd" />
                <text text-anchor="middle" x="5" y="8" style="font-size: 11px;">${n.ident}</text>
            </svg>
        `,symbol:n=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <text text-anchor="middle" x="8" y="16" style="font-size: 23px;">${n.ident}</text>
            </svg>
        `},styleToIcon=n=>{let e;return n.icon?e=n.icon:n.ext==="link"?e="link":n.ext==="bulletList"?e="bullet-list":n.ext==="orderedList"?e="ordered-list":n.ext==="btsDiv"?e="square":e="letter",icons[e]?icons[e](n):e},coreIcons={styles:`
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="16" viewBox="0 0 22 16" fill="currentColor" style="width: 22px;">
            <path d="M11.755,14.91C11.924,15.311 12.198,15.5 12.598,15.5C13.125,15.5 13.462,15.079 13.462,14.594C13.462,14.488 13.441,14.363 13.399,14.236L7.774,1.216C7.584,0.732 7.247,0.5 6.762,0.5C6.278,0.5 5.941,0.732 5.73,1.216L0.084,14.299C0.021,14.468 0,14.594 0,14.679C0,15.121 0.316,15.5 0.843,15.5C1.222,15.5 1.496,15.311 1.643,14.91L3.329,10.887L10.049,10.887L11.755,14.91ZM4.045,9.201L6.699,2.902L9.354,9.201L4.045,9.201ZM13.883,12.571C13.883,14.363 15.042,15.5 16.791,15.5C18.076,15.5 19.088,15.037 19.824,14.13L19.824,14.762C19.824,15.162 20.183,15.5 20.625,15.5C21.068,15.5 21.426,15.163 21.426,14.762L21.426,9.538C21.426,6.946 20.393,5.662 17.781,5.662C16.959,5.662 16.074,5.851 15.169,6.23C14.895,6.336 14.747,6.567 14.747,6.904C14.747,7.01 14.768,7.094 14.811,7.199C14.937,7.473 15.147,7.621 15.463,7.621C15.572,7.621 15.679,7.599 15.779,7.557C16.432,7.304 17.064,7.179 17.676,7.179C19.424,7.179 19.824,8.147 19.824,10.17C19.255,9.77 18.476,9.559 17.465,9.559C15.358,9.559 13.883,10.696 13.883,12.571ZM19.824,12.762C19.129,13.583 18.329,13.983 17.38,13.983C16.306,13.983 15.674,13.414 15.674,12.488C15.674,11.476 16.58,10.929 17.696,10.929C18.518,10.929 19.235,11.139 19.824,11.561L19.824,12.762Z" />
        </svg>
    `,attributes:`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M5.611,14.098L15.267,4.442C15.416,4.29 15.5,4.085 15.5,3.872C15.5,3.664 15.416,3.465 15.267,3.32L12.671,0.733C12.522,0.585 12.321,0.501 12.111,0.501C11.901,0.501 11.7,0.585 11.551,0.733L1.879,10.372C1.421,11.781 0.969,13.193 0.524,14.606C0.508,14.667 0.5,14.73 0.5,14.793C0.5,15.176 0.791,15.499 1.138,15.499C1.563,15.499 1.963,15.341 5.611,14.098ZM2.887,11.314L4.667,13.094L2.027,13.966L2.887,11.314ZM3.683,10.342L12.111,1.943L14.056,3.881L5.641,12.299L3.683,10.342Z" />
        </svg>
    `,spots:`
        <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><circle cx="8" cy="8" r="8"/></svg>
    `},coreIcon=n=>coreIcons[n];class Provider{constructor(e){e.types=this.bootTypeManager(e.types),this.bootExtensions(e).bootStyleButtons(e).bootStylesButton(e).bootAttributesButton(e).bootSpotsButton(e).bootCss(e)}bootTypeManager(e){return e.getByItem=function(t){return Object.values(this).find(function(r){const s=Array.isArray(r.parameters)?{}:r.parameters,o=Object.fromEntries(Object.entries(t.attrs).filter(([a])=>s.hasOwnProperty(a)));return r.extension===t.type&&JSON.stringify(o)===JSON.stringify(s)})},e}bootExtensions(e){return Statamic.$bard.addExtension(({bard:t})=>Core.configure({...e,bard:t})),Statamic.$bard.addExtension(({bard:t})=>Defaults.configure({...e,bard:t})),Statamic.$bard.addExtension(({bard:t})=>Overrides.configure({...e,bard:t})),Statamic.$bard.addExtension(()=>Span),e.pro&&(Statamic.$bard.addExtension(()=>Attributes.configure(e)),Statamic.$bard.addExtension(()=>Div),Statamic.$bard.addExtension(({bard:t})=>Spot.configure({bard:t}))),this}bootStyleButtons(e){return Statamic.$bard.buttons((t,r)=>{Object.entries(e.styles).forEach(([s,o])=>{const a=e.types[o.type],l=styleToIcon(o),c={name:s,text:o.name,args:{[e.attr]:o[e.store],...a.parameters},html:l,active:(u,f)=>u.isActive(a.extension,f),visible:a.active_visible?u=>u.isActive(a.extension):()=>!0,btsMenuVisible:a.active_visible?u=>u.isActive(a.extension):()=>!0,command:(u,f)=>u.chain().focus()[a.command](f).run(),btsStyle:o};t.splice(t.indexOf(s),0,r(c))})}),this}bootStylesButton(e){return e.pro?(Statamic.$bard.buttons((t,r)=>{t.splice(t.indexOf("bts_styles"),0,r({name:"bts_styles",text:__("Style"),component:StylesButton,html:coreIcon("styles"),btsOptions:e}))}),this):this}bootAttributesButton(e){return e.pro?(Statamic.$bard.buttons((t,r)=>{t.splice(t.indexOf("bts_attributes"),0,r({name:"bts_attributes",text:__("Attributes"),component:AttributesButton,html:coreIcon("attributes"),btsOptions:e}))}),this):this}bootSpotsButton(e){return e.pro?(Statamic.$bard.buttons((t,r)=>{t.splice(t.indexOf("bts_attributes"),0,r({name:"bts_spots",text:__("Spots"),component:SpotsButton,html:coreIcon("spots"),btsOptions:e}))}),this):this}bootCss(e){const t=[...this.gatherDefaultsCss(e),...this.gatherStylesCss(e)],r=document.createElement("style");return r.appendChild(document.createTextNode(t.join(" "))),document.body.appendChild(r),this}gatherDefaultsCss(e){const t=[],r=".bard-fieldtype-wrapper .bard-content";return Object.entries(e.defaults).forEach(([s,o])=>{Object.entries(o.dflts).forEach(([a,l])=>{const c=e.types[l.type].selector;l.cp_css&&t.push(...this.parseCss([`.bts-styles[data-bts-defaults="${s}"] .bts-preview[data-bts-type="${l.type}"]:not([data-bts-style])`,`${r}[data-bts-defaults="${s}"] > ${c}:not([data-bts-style])`],l.cp_css)),l.cp_badge&&t.push(...this.parseCss([`${r}[data-bts-defaults="${s}"] > ${c}:not([data-bts-style])::before`],{"&":{content:`"${__(e.types[l.type].display)}"`}}))})}),t}gatherStylesCss(e){const t=[],r=".bard-fieldtype-wrapper .bard-content";return Object.entries(e.styles).forEach(([s,o])=>{const a=e.types[o.type].selector;o.cp_css&&t.push(...this.parseCss([`.bts-preview[data-bts-style="${o[e.store]}"]`,`${r} ${a}[data-bts-style="${o[e.store]}"]`],o.cp_css)),o.cp_badge&&t.push(...this.parseCss([`${r} ${a}[data-bts-style="${o[e.store]}"]::before`],{"&":{content:`"${o.name}"`}}))}),t}parseCss(e,t){return t===void 0?[]:(typeof t=="string"&&(t={"&":t}),Object.entries(t).map(([r,s])=>{const o=e.map(l=>r.includes("&")?r.replace("&",l):`${l} ${r}`).join(", "),a=typeof s=="object"?Object.entries(s).map(([l,c])=>`${l}: ${c};`).join(""):s;return`${o} { ${a} }`}))}}Statamic.booting(()=>{new Provider(Statamic.$config.get("bard-texstyle"))});
