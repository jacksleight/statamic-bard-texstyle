const{Mark:$o}=Statamic.$bard.tiptap.core,Oo=$o.create({name:"btsSpan",parseHTML(){return[{tag:"span[data-bts-style]"}]},renderHTML({HTMLAttributes:e}){return["span",e,0]},addCommands(){return{btsToggleSpan:e=>({commands:t})=>t.toggleMark(this.name,e)}}}),{Node:Mo}=Statamic.$bard.tiptap.core,Eo=Mo.create({name:"btsDiv",content:"block+",group:"root",defining:!1,parseHTML(){return[{tag:"div[data-bts-style]"}]},renderHTML({HTMLAttributes:e}){return["div",{class:"bard-content",...e},0]},addCommands(){return{btsToggleDiv:e=>({editor:t,commands:n})=>t.isActive(this.name,e)?n.lift(this.name):t.isActive(this.name)?n.updateAttributes(this.name,e):n.wrapIn(this.name,e)}}});function Qi(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Qi(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function ts(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,f=Math.min(o.text.length,a.text.length);for(;c<f&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=ts(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class w{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>t&&r(l,i+a,s||null,o)!==!1&&l.content.size){let f=a+1;l.nodesBetween(Math.max(0,t-f),Math.min(l.content.size,n-f),r,i+f)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(t,l)-l,n-l),o=!r):a.isLeaf?(i?s+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!r):!o&&a.isBlock&&(s+=r,o=!0)},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new w(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new w(r,i)}cutByIndex(t,n){return t==n?w.empty:t==0&&n==this.content.length?this:new w(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new w(i,s)}addToStart(t){return new w([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new w(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return Qi(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return ts(this,t,n,r)}findIndex(t,n=-1){if(t==0)return ze(0,t);if(t==this.size)return ze(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=t)return o==t||n>0?ze(r+1,o):ze(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return w.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new w(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return w.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new w(n||t,r)}static from(t){if(!t)return w.empty;if(t instanceof w)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new w([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}w.empty=new w([],0);const $n={index:0,offset:0};function ze(e,t){return $n.index=e,$n.offset=t,$n}function Wn(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Wn(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Wn(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}class it{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Wn(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return it.none;if(t instanceof it)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}it.none=[];class To extends Error{}class O{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=ns(this.content,t+this.openStart,n);return r&&new O(r,this.openStart,this.openEnd)}removeBetween(t,n){return new O(es(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return O.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new O(w.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new O(t,r,i)}}O.empty=new O(w.empty,0,0);function es(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(es(s.content,t-i-1,n-i-1)))}function ns(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=ns(o.content,t-s-1,n);return a&&e.replaceChild(i,o.copy(a))}class Gn{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}class sn{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=t.nodes[r.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new Wr(this,n,!1);return r.addAll(t,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new Wr(this,n,!0);return r.addAll(t,n.from,n.to),O.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(No(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Gr(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Gr(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new sn(t,sn.schemaRules(t)))}}const rs={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ao={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},is={ol:!0,ul:!0},on=1,an=2,we=4;function Jr(e,t,n){return t!=null?(t?on:0)|(t==="full"?an:0):e&&e.whitespace=="pre"?on|an:n&~we}class je{constructor(t,n,r,i,s,o,a){this.type=t,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=it.none,this.stashMarks=[],this.match=o||(a&we?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(w.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&on)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=w.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(w.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(t){for(let n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(t){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):Lo(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!rs.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Wr{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=Jr(null,n.preserveWhitespace,0)|(r?we:0);i?s=new je(i.type,i.attrs,it.none,it.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new je(null,null,it.none,it.none,!0,null,o):s=new je(t.schema.topNodeType,null,it.none,it.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){let n=t.getAttribute("style");if(!n)this.addElement(t);else{let r=this.readStyles(Po(n));if(!r)return;let[i,s]=r,o=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],o);for(let a=0;a<i.length;a++)this.addPendingMark(i[a]);this.addElement(t);for(let a=0;a<i.length;a++)this.removePendingMark(i[a],o);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}}}addTextNode(t){let n=t.nodeValue,r=this.top;if(r.options&an||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&on)r.options&an?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=t.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)}addElement(t,n){let r=t.nodeName.toLowerCase(),i;is.hasOwnProperty(r)&&this.parser.normalizeLists&&Io(t);let s=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,n));if(s?s.ignore:Ao.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(t=s.skip);let o,a=this.top,l=this.needsBlock;if(rs.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,s,s.consuming===!1?i:void 0)}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let n=it.none,r=it.none;for(let i=0;i<t.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(t[i],t[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(t,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(t):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(t,n,r){let i=n||0;for(let s=n?t.childNodes[n]:t.firstChild,o=r==null?null:t.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(s);this.findAtPoint(t,i)}findPlace(t){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(t);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();let n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));let r=n.activeMarks;for(let i=0;i<t.marks.length;i++)(!n.type||n.type.allowsMarkType(t.marks[i].type))&&(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}enter(t,n,r){let i=this.findPlace(t.create(n));return i&&this.enterInner(t,n,!0,r),i}enterInner(t,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(t),s.match=s.match&&s.match.matchType(t);let o=Jr(t,i,s.options);s.options&we&&s.content.length==0&&(o|=we),this.nodes.push(new je(t,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let n=this.open;n>=0;n--)if(this.nodes[n]==t)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let f=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!f||f.name!=c&&f.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(t){let n=Do(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);let o=i.popFromStashMark(t);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function Io(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&is.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function No(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Po(e){let t=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=t.exec(e);)r.push(n[1],n[2].trim());return r}function Gr(e){let t={};for(let n in e)t[n]=e[n];return t}function Lo(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:f}=a.edge(l);if(c==t||s.indexOf(f)<0&&o(f))return!0}};if(o(i.contentMatch))return!0}}function Do(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}const ss=65535,as=Math.pow(2,16);function Ro(e,t){return e+t*as}function Ur(e){return e&ss}function Fo(e){return(e-(e&ss))/as}const ls=1,cs=2,Ve=4,fs=8;class qr{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&fs)>0}get deletedBefore(){return(this.delInfo&(ls|Ve))>0}get deletedAfter(){return(this.delInfo&(cs|Ve))>0}get deletedAcross(){return(this.delInfo&Ve)>0}}class ut{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&ut.empty)return ut.empty}recover(t){let n=0,r=Ur(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Fo(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+s],f=this.ranges[a+o],u=l+c;if(t<=u){let d=c?t==l?-1:t==u?1:n:n,v=l+i+(d<0?0:f);if(r)return v;let y=t==(n<0?l:u)?null:Ro(a/3,t-l),b=t==l?cs:t==u?ls:Ve;return(n<0?t!=l:t!=u)&&(b|=fs),new qr(v,b,y)}i+=f-c}return r?t+i:new qr(t+i,0,null)}touches(t,n){let r=0,i=Ur(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+s],f=l+c;if(t<=f&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],f=this.ranges[i+r];t(a,a+c,l,l+f),s+=f-c}}invert(){return new ut(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?ut.empty:new ut(t<0?[0,-t,0]:[0,0,t])}}ut.empty=new ut([]);const On=Object.create(null);class nt{getMap(){return ut.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=On[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in On)throw new RangeError("Duplicate use of step JSON ID "+t);return On[t]=n,n.prototype.jsonID=t,n}}class U{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new U(t,null)}static fail(t){return new U(null,t)}static fromReplace(t,n,r,i){try{return U.ok(t.replace(n,r,i))}catch(s){if(s instanceof To)return U.fail(s.message);throw s}}}function vr(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(vr(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return w.fromArray(r)}class Ft extends nt{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new O(vr(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return U.fromReplace(t,this.from,this.to,s)}invert(){return new Bt(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ft(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ft&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ft(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ft(n.from,n.to,t.markFromJSON(n.mark))}}nt.jsonID("addMark",Ft);class Bt extends nt{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new O(vr(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return U.fromReplace(t,this.from,this.to,r)}invert(){return new Ft(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Bt(n.pos,r.pos,this.mark)}merge(t){return t instanceof Bt&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Bt(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bt(n.from,n.to,t.markFromJSON(n.mark))}}nt.jsonID("removeMark",Bt);class zt extends nt{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return U.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return U.fromReplace(t,this.pos,this.pos+1,new O(w.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new zt(this.pos,n.marks[i]);return new zt(this.pos,this.mark)}}return new ke(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new zt(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new zt(n.pos,t.markFromJSON(n.mark))}}nt.jsonID("addNodeMark",zt);class ke extends nt{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return U.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return U.fromReplace(t,this.pos,this.pos+1,new O(w.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new zt(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ke(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ke(n.pos,t.markFromJSON(n.mark))}}nt.jsonID("removeNodeMark",ke);class ft extends nt{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&Un(t,this.from,this.to)?U.fail("Structure replace would overwrite content"):U.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ut([this.from,this.to-this.from,this.slice.size])}invert(t){return new ft(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ft(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof ft)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?O.empty:new O(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ft(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?O.empty:new O(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ft(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ft(n.from,n.to,O.fromJSON(t,n.slice),!!n.structure)}}nt.jsonID("replace",ft);class et extends nt{constructor(t,n,r,i,s,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Un(t,this.from,this.gapFrom)||Un(t,this.gapTo,this.to)))return U.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return U.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?U.fromReplace(t,this.from,this.to,r):U.fail("Content does not fit in gap")}getMap(){return new ut([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new et(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),s=t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new et(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new et(n.from,n.to,n.gapFrom,n.gapTo,O.fromJSON(t,n.slice),n.insert,!!n.structure)}}nt.jsonID("replaceAround",et);function Un(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Bo(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function le(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!Bo(i,s,o))break}return null}function us(e,t,n=null,r=e){let i=zo(e,t),s=i&&jo(r,t);return s?i.map(Kr).concat({type:t,attrs:n}).concat(s.map(Kr)):null}function Kr(e){return{type:e,attrs:null}}function zo(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function jo(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function se(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,f=n-2;c>s;c--,f--){let u=i.node(c),d=i.index(c);if(u.type.spec.isolating)return!1;let v=u.content.cutByIndex(d,u.childCount),y=r&&r[f]||u;if(y!=u&&(v=v.replaceChild(0,y.type.create(y.attrs))),!u.canReplace(d+1,u.childCount)||!y.type.validContent(v))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Xt(e,t){let n=e.resolve(t),r=n.index();return ds(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ds(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function ps(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&ds(s,o)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function hs(e,t,n=t,r=O.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return Ho(i,s,r)?new ft(t,n,r):new Jo(i,s,r).fit()}function Ho(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class Jo{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=w.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=w.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new O(s,o,a);return t>-1?new et(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ft(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Mn(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],f,u=null;if(n==1&&(o?c.matchType(o.type)||(u=c.fillBefore(w.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&o&&(f=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:f};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Mn(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new O(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Mn(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new O(ye(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new O(ye(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let b=0;b<s.length;b++)this.openFrontierNode(s[b]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-t,c=0,f=[],{match:u,type:d}=this.frontier[n];if(i){for(let b=0;b<i.childCount;b++)f.push(i.child(b));u=u.matchFragment(i)}let v=a.size+t-(o.content.size-o.openEnd);for(;c<a.childCount;){let b=a.child(c),C=u.matchType(b.type);if(!C)break;c++,(c>1||l==0||b.content.size)&&(u=C,f.push(ms(b.mark(d.allowedMarks(b.marks)),c==1?l:0,c==a.childCount?v:-1)))}let y=c==a.childCount;y||(v=-1),this.placed=be(this.placed,n,w.from(f)),this.frontier[n].match=u,y&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,C=a;b<v;b++){let M=C.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),C=M.content}this.unplaced=y?t==0?O.empty:new O(ye(o.content,t-1,1),t-1,v<0?o.openEnd:t-1):new O(ye(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!En(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){t:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=En(t,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],f=En(t,a,c,l,!0);if(!f||f.childCount)continue t}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=be(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=be(this.placed,this.depth,w.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(w.empty,!0);n.childCount&&(this.placed=be(this.placed,this.frontier.length,n))}}function ye(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(ye(e.firstChild.content,t-1,n)))}function be(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(be(e.lastChild.content,t-1,n)))}function Mn(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function ms(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,ms(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(w.empty,!0)))),e.copy(r)}function En(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Wo(n,s.content,o)?a:null}function Wo(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}class Ce extends nt{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return U.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return U.fromReplace(t,this.pos,this.pos+1,new O(w.from(i),0,n.isLeaf?0:1))}getMap(){return ut.empty}invert(t){return new Ce(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ce(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ce(n.pos,n.attr,n.value)}}nt.jsonID("attr",Ce);let $e=class extends Error{};$e=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};$e.prototype=Object.create(Error.prototype);$e.prototype.constructor=$e;$e.prototype.name="TransformError";const Tn=Object.create(null);class L{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new Go(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=O.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],f=t.mapping.slice(s);t.replaceRange(f.map(l.pos),f.map(c.pos),a?O.empty:n),a==0&&Yr(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(r),c=l.map(o.pos),f=l.map(a.pos);s?t.deleteRange(c,f):(t.replaceRangeWith(c,f,n),Yr(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new J(t):Qt(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?Qt(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Qt(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new gt(t.node(0))}static atStart(t){return Qt(t,t,0,0,1)||new gt(t)}static atEnd(t){return Qt(t,t,t.content.size,t.childCount,-1)||new gt(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Tn[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Tn)throw new RangeError("Duplicate use of selection JSON ID "+t);return Tn[t]=n,n.prototype.jsonID=t,n}getBookmark(){return J.between(this.$anchor,this.$head).getBookmark()}}L.prototype.visible=!0;class Go{constructor(t,n){this.$from=t,this.$to=n}}let Zr=!1;function Xr(e){!Zr&&!e.parent.inlineContent&&(Zr=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class J extends L{constructor(t,n=t){Xr(t),Xr(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return L.near(r);let i=t.resolve(n.map(this.anchor));return new J(i.parent.inlineContent?i:r,r)}replace(t,n=O.empty){if(super.replace(t,n),n==O.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof J&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Cn(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new J(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=L.findFrom(n,r,!0)||L.findFrom(n,-r,!0);if(s)n=s.$head;else return L.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(L.findFrom(t,-r,!0)||L.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new J(t,n)}}L.jsonID("text",J);class Cn{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Cn(t.map(this.anchor),t.map(this.head))}resolve(t){return J.between(t.resolve(this.anchor),t.resolve(this.head))}}class D extends L{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?L.near(s):new D(s)}content(){return new O(w.from(this.node),0,0)}eq(t){return t instanceof D&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new gr(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new D(t.resolve(n.anchor))}static create(t,n){return new D(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}D.prototype.visible=!1;L.jsonID("node",D);class gr{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Cn(r,r):new gr(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&D.isSelectable(r)?new D(n):L.near(n)}}class gt extends L{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=O.empty){if(n==O.empty){t.delete(0,t.doc.content.size);let r=L.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new gt(t)}map(t){return new gt(t)}eq(t){return t instanceof gt}getBookmark(){return Uo}}L.jsonID("all",gt);const Uo={map(){return this},resolve(e){return new gt(e)}};function Qt(e,t,n,r,i,s=!1){if(t.inlineContent)return J.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&D.isSelectable(a))return D.create(e,n-(i<0?a.nodeSize:0))}else{let l=Qt(e,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function Yr(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof ft||i instanceof et))return;let s=e.mapping.maps[r],o;s.forEach((a,l,c,f)=>{o==null&&(o=f)}),e.setSelection(L.near(e.doc.resolve(o),n))}function Vr(e,t){return!t||!e?e:e.bind(t)}class He{constructor(t,n,r){this.name=t,this.init=Vr(n.init,r),this.apply=Vr(n.apply,r)}}new He("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new He("selection",{init(e,t){return e.selection||L.atStart(t.doc)},apply(e){return e.selection}}),new He("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new He("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}});function vs(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=vs(i,t,{})),n[r]=i}return n}let Ne=class{constructor(t){this.spec=t,this.props={},t.props&&vs(t.props,this,this.props),this.key=t.key?t.key.key:gs("plugin")}getState(t){return t[this.key]}};const An=Object.create(null);function gs(e){return e in An?e+"$"+ ++An[e]:(An[e]=0,e+"$")}let Pe=class{constructor(t="key"){this.key=gs(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};const qo=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Ko(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const Zo=(e,t,n)=>{let r=Ko(e,n);if(!r)return!1;let i=ys(r);if(!i){let o=r.blockRange(),a=o&&le(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&ws(e,i,t))return!0;if(r.parent.content.size==0&&(ae(s,"end")||D.isSelectable(s))){let o=hs(e.doc,r.before(),r.after(),O.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(ae(s,"end")?L.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):D.create(a.doc,i.pos-s.nodeSize)),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function ae(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Xo=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=ys(r)}let o=s&&s.nodeBefore;return!o||!D.isSelectable(o)?!1:(t&&t(e.tr.setSelection(D.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function ys(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Yo(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Vo=(e,t,n)=>{let r=Yo(e,n);if(!r)return!1;let i=bs(r);if(!i)return!1;let s=i.nodeAfter;if(ws(e,i,t))return!0;if(r.parent.content.size==0&&(ae(s,"start")||D.isSelectable(s))){let o=hs(e.doc,r.before(),r.after(),O.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(ae(s,"start")?L.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):D.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Qo=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=bs(r)}let o=s&&s.nodeAfter;return!o||!D.isSelectable(o)?!1:(t&&t(e.tr.setSelection(D.create(e.doc,s.pos)).scrollIntoView()),!0)};function bs(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const ta=(e,t)=>{let n=e.selection,r=n instanceof D,i;if(r){if(n.node.isTextblock||!Xt(e.doc,n.from))return!1;i=n.from}else if(i=ps(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(D.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},ea=(e,t)=>{let n=e.selection,r;if(n instanceof D){if(n.node.isTextblock||!Xt(e.doc,n.to))return!1;r=n.to}else if(r=ps(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},na=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&le(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},ra=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function xs(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ia=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=xs(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(L.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},sa=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof gt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=xs(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(J.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},oa=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(se(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&le(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},aa=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(D.create(e.doc,i))),!0)};function la(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Xt(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function ws(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(la(e,t,n))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let u=t.pos+i.nodeSize,d=w.empty;for(let b=s.length-1;b>=0;b--)d=w.from(s[b].create(null,d));d=w.from(r.copy(d));let v=e.tr.step(new et(t.pos-1,u,t.pos,u,new O(d,1,0),s.length,!0)),y=u+2*s.length;Xt(v.doc,y)&&v.join(y),n(v.scrollIntoView())}return!0}let l=L.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),f=c&&le(c);if(f!=null&&f>=t.depth)return n&&n(e.tr.lift(c,f).scrollIntoView()),!0;if(a&&ae(i,"start",!0)&&ae(r,"end")){let u=r,d=[];for(;d.push(u),!u.isTextblock;)u=u.lastChild;let v=i,y=1;for(;!v.isTextblock;v=v.firstChild)y++;if(u.canReplace(u.childCount,u.childCount,v.content)){if(n){let b=w.empty;for(let M=d.length-1;M>=0;M--)b=w.from(d[M].copy(b));let C=e.tr.step(new et(t.pos-d.length,t.pos+i.nodeSize,t.pos+y,t.pos+i.nodeSize-y,new O(b,d.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function Cs(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(J.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const ca=Cs(-1),fa=Cs(1);function ua(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&us(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Qr(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let f=n.doc.resolve(c),u=f.index();i=f.parent.canReplaceWith(u,u+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function da(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(e)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let f=n.doc.resolve(o.start-2);l=new Gn(f,f,o.depth),o.endIndex<o.parent.childCount&&(o=new Gn(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=us(l,e,t,o);return c?(r&&r(pa(n.tr,o,c,a,e).scrollIntoView()),!0):!1}}function pa(e,t,n,r,i){let s=w.empty;for(let f=n.length-1;f>=0;f--)s=w.from(n[f].type.create(n[f].attrs,s));e.step(new et(t.start-(r?2:0),t.end,t.start,t.end,new O(s,0,0),n.length,!0));let o=0;for(let f=0;f<n.length;f++)n[f].type==i&&(o=f+1);let a=n.length-o,l=t.start+n.length-(r?2:0),c=t.parent;for(let f=t.startIndex,u=t.endIndex,d=!0;f<u;f++,d=!1)!d&&se(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(f).nodeSize;return e}function ha(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?ma(t,n,e,s):va(t,n,s):!0:!1}}function ma(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new et(s-1,o,s,o,new O(w.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Gn(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=le(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return Xt(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function va(e,t,n){let r=e.tr,i=n.parent;for(let v=n.end,y=n.endIndex-1,b=n.startIndex;y>b;y--)v-=i.child(y).nodeSize,r.delete(v-1,v+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),f=s.index(-1);if(!c.canReplace(f+(a?0:1),f+1,o.content.append(l?w.empty:w.from(i))))return!1;let u=s.pos,d=u+o.nodeSize;return r.step(new et(u-(a?1:0),d+(l?1:0),u+1,d-1,new O((a?w.empty:w.from(i.copy(w.empty))).append(l?w.empty:w.from(i.copy(w.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function ga(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,f=w.from(c?e.create():null),u=new O(w.from(e.create(null,w.from(a.type.create(null,f)))),c?3:1,0),d=s.start,v=s.end;n(t.tr.step(new et(d-(c?3:1),v,d,v,u,1,!0)).scrollIntoView())}return!0}}function _s(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class ya{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...f)=>{const u=l(...f)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!t,c=t||s.tr,f=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(r).map(([d,v])=>[d,(...b)=>{const C=this.buildProps(c,n),M=v(...b)(C);return a.push(M),u}])),run:f};return u}createCan(t){const{rawCommands:n,state:r}=this,i=!1,s=t||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...f)=>c(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(t,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i;s.storedMarks&&t.setStoredMarks(s.storedMarks);const a={tr:t,editor:i,view:o,state:_s({state:s,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...f)=>c(...f)(a)]))}};return a}}function kt(e,t,n){return e.config[t]===void 0&&e.parent?kt(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?kt(e.parent,t,n):null}):e.config[t]}function ba(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Y(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function xa(e){return typeof e=="function"}function te(e,t=void 0,...n){return xa(e)?t?e.bind(t)(...n):e(...n):e}function wa(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ca(e){return Object.prototype.toString.call(e).slice(8,-1)}function In(e){return Ca(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Ss(e,t){const n={...e};return In(e)&&In(t)&&Object.keys(t).forEach(r=>{In(t[r])?r in e?n[r]=Ss(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}let ce=class qn{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(kt(this,"addOptions",{name:this.name}))),this.storage=te(kt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new qn(t)}configure(t={}){const n=this.extend();return n.options=Ss(this.options,t),n.storage=te(kt(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new qn(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=te(kt(n,"addOptions",{name:n.name})),n.storage=te(kt(n,"addStorage",{name:n.name,options:n.options})),n}};function _a(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return e.nodesBetween(r,i,(c,f,u,d)=>{var v;const y=o==null?void 0:o[c.type.name];y?(c.isBlock&&!l&&(a+=s,l=!0),u&&(a+=y({node:c,pos:f,parent:u,index:d,range:t}))):c.isText?(a+=(v=c==null?void 0:c.text)===null||v===void 0?void 0:v.slice(Math.max(r,f)-f,i-f),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function Sa(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}ce.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Ne({key:new Pe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(f=>f.$from.pos)),a=Math.max(...s.map(f=>f.$to.pos)),l=Sa(n);return _a(r,{from:o,to:a},{textSerializers:l})}}})]}});const ka=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),$a=(e=!1)=>({commands:t})=>t.setContent("",e),Oa=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:f}=t,u=c.resolve(f.map(l)),d=c.resolve(f.map(l+a.nodeSize)),v=u.blockRange(d);if(!v)return;const y=le(v);if(a.type.isTextblock){const{defaultType:b}=u.parent.contentMatchAt(u.index());t.setNodeMarkup(v.start,b)}(y||y===0)&&t.lift(v,y)})}),!0},Ma=e=>t=>e(t),Ea=()=>({state:e,dispatch:t})=>sa(e,t),Ta=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1},Aa=e=>({tr:t,state:n,dispatch:r})=>{const i=Y(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);t.delete(l,c).scrollIntoView()}return!0}return!1},Ia=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Na=()=>({state:e,dispatch:t})=>qo(e,t),Pa=()=>({commands:e})=>e.keyboardShortcut("Enter"),La=()=>({state:e,dispatch:t})=>ia(e,t);function ln(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:wa(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function Kn(e,t,n={}){return e.find(r=>r.type===t&&ln(r.attrs,n))}function Da(e,t,n={}){return!!Kn(e,t,n)}function ks(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&r.offset!==0&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const i=Kn([...r.node.marks],t,n);if(!i)return;let s=r.index,o=e.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(Kn([...r.node.marks],t,n);s>0&&i.isInSet(e.parent.child(s-1).marks);)s-=1,o-=e.parent.child(s).nodeSize;for(;a<e.parent.childCount&&Da([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Pt(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const Ra=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Pt(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:f}=a;if(i){const u=ks(l,s,t);if(u&&u.from<=c&&u.to>=f){const d=J.create(o,u.from,u.to);n.setSelection(d)}}return!0},Fa=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function $s(e){return e instanceof J}function jt(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Ba(e,t=null){if(!t)return null;const n=L.atStart(e),r=L.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?J.create(e,jt(0,i,s),jt(e.content.size,i,s)):J.create(e,jt(t,i,s),jt(t,i,s))}function _n(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const za=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{_n()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!$s(n.state.selection))return o(),!0;const a=Ba(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},ja=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),Ha=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t);function ti(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function cn(e,t,n){if(n={slice:!0,parseOptions:{},...n},typeof e=="object"&&e!==null)try{return Array.isArray(e)&&e.length>0?w.fromArray(e.map(r=>t.nodeFromJSON(r))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),cn("",t,n)}if(typeof e=="string"){const r=sn.fromSchema(t);return n.slice?r.parseSlice(ti(e),n.parseOptions).content:r.parse(ti(e),n.parseOptions)}return cn("",t,n)}function Ja(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof ft||i instanceof et))return;const s=e.mapping.maps[r];let o=0;s.forEach((a,l,c,f)=>{o===0&&(o=f)}),e.setSelection(L.near(e.doc.resolve(o),n))}const Wa=e=>e.toString().startsWith("<"),Ga=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const o=cn(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof e=="number"?{from:e,to:e}:e,c=!0,f=!0;if((Wa(o)?o:[o]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,f=f?d.isBlock:!1}),a===l&&f){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}c?Array.isArray(t)?r.insertText(t.map(d=>d.text||"").join(""),a,l):typeof t=="object"&&t&&t.text?r.insertText(t.text,a,l):r.insertText(t,a,l):r.replaceWith(a,l,o),n.updateSelection&&Ja(r,r.steps.length-1,-1)}return!0},Ua=()=>({state:e,dispatch:t})=>ta(e,t),qa=()=>({state:e,dispatch:t})=>ea(e,t),Ka=()=>({state:e,dispatch:t})=>Zo(e,t),Za=()=>({state:e,dispatch:t})=>Vo(e,t);function Os(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Xa(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_n()||Os()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Ya=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=Xa(e).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const f=c.map(r.mapping);f&&i&&r.maybeStep(f)}),!0};function yr(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Y(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(u,d)=>{if(u.isText)return;const v=Math.max(r,d),y=Math.min(i,d+u.nodeSize);a.push({node:u,from:v,to:y})});const l=i-r,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>ln(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,d)=>u+d.to-d.from,0)>=l}const Va=(e,t={})=>({state:n,dispatch:r})=>{const i=Y(e,n.schema);return yr(n,i,t)?na(n,r):!1},Qa=()=>({state:e,dispatch:t})=>oa(e,t),tl=e=>({state:t,dispatch:n})=>{const r=Y(e,t.schema);return ha(r)(t,n)},el=()=>({state:e,dispatch:t})=>ra(e,t);function Ms(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function ei(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}const nl=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Ms(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(s=Y(e,r.schema)),a==="mark"&&(o=Pt(e,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,f)=>{s&&s===c.type&&n.setNodeMarkup(f,void 0,ei(c.attrs,t)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&n.addMark(f,f+c.nodeSize,o.create(ei(u.attrs,t)))})})}),!0):!1},rl=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),il=()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),sl=()=>({state:e,dispatch:t})=>Xo(e,t),ol=()=>({state:e,dispatch:t})=>Qo(e,t),al=()=>({state:e,dispatch:t})=>aa(e,t),ll=()=>({state:e,dispatch:t})=>fa(e,t),cl=()=>({state:e,dispatch:t})=>ca(e,t);function fl(e,t,n={}){return cn(e,t,{slice:!1,parseOptions:n})}const ul=(e,t=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=fl(e,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!t),!0};function dl(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function pl(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function br(e){return t=>pl(t.$from,e)}function hl(e,t){const n=Pt(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Qe(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function ml(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Pt(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>ln(u.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:u,$to:d})=>{const v=u.pos,y=d.pos;e.doc.nodesBetween(v,y,(b,C)=>{if(!b.isText&&!b.marks.length)return;const M=Math.max(v,C),z=Math.min(y,C+b.nodeSize),H=z-M;o+=H,a.push(...b.marks.map(X=>({mark:X,from:M,to:z})))})}),o===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>ln(u.mark.attrs,n,{strict:!1})).reduce((u,d)=>u+d.to-d.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,d)=>u+d.to-d.from,0);return(l>0?l+c:l)>=o}function ni(e,t){const{nodeExtensions:n}=ba(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=te(kt(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function vl(e,t,n){var r;const{selection:i}=t;let s=null;if($s(i)&&(s=i.$cursor),s){const a=(r=e.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(f,u,d)=>{if(c)return!1;if(f.isInline){const v=!d||d.type.allowsMarkType(n),y=!!n.isInSet(f.marks)||!f.marks.some(b=>b.type.excludes(n));c=v&&y}return!c}),c})}const gl=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Pt(e,r.schema);if(i)if(o){const c=hl(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const f=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(f,u,(d,v)=>{const y=Math.max(v,f),b=Math.min(v+d.nodeSize,u);d.marks.find(M=>M.type===l)?d.marks.forEach(M=>{l===M.type&&n.addMark(y,b,l.create({...M.attrs,...t}))}):n.addMark(y,b,l.create(t))})});return vl(r,n,l)},yl=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),bl=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Y(e,n.schema);return s.isTextblock?i().command(({commands:o})=>Qr(s,t)(n)?!0:o.clearNodes()).command(({state:o})=>Qr(s,t)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},xl=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=jt(e,0,r.content.size),s=D.create(r,i);t.setSelection(s)}return!0},wl=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=J.atStart(r).from,a=J.atEnd(r).to,l=jt(i,o,a),c=jt(s,o,a),f=J.create(r,l,c);t.setSelection(f)}return!0},Cl=e=>({state:t,dispatch:n})=>{const r=Y(e,t.schema);return ga(r)(t,n)};function ri(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}const _l=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,c=i.extensionManager.attributes,f=Qe(c,a.node().type.name,a.node().attrs);if(s instanceof D&&s.node.isBlock)return!a.parentOffset||!se(o,a.pos)?!1:(r&&(e&&ri(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const u=l.parentOffset===l.parent.content.size;s instanceof J&&t.deleteSelection();const d=a.depth===0?void 0:dl(a.node(-1).contentMatchAt(a.indexAfter(-1)));let v=u&&d?[{type:d,attrs:f}]:void 0,y=se(t.doc,t.mapping.map(a.pos),1,v);if(!v&&!y&&se(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(y=!0,v=d?[{type:d,attrs:f}]:void 0),y&&(t.split(t.mapping.map(a.pos),1,v),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const b=t.mapping.map(a.before()),C=t.doc.resolve(b);a.node(-1).canReplaceWith(C.index(),C.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}e&&ri(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return!0},Sl=e=>({tr:t,state:n,dispatch:r,editor:i})=>{var s;const o=Y(e,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const f=a.node(-1);if(f.type!==o)return!1;const u=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let C=w.empty;const M=a.index(-1)?1:a.index(-2)?2:3;for(let W=a.depth-M;W>=a.depth-3;W-=1)C=w.from(a.node(W).copy(C));const z=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,H=Qe(u,a.node().type.name,a.node().attrs),X=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(H))||void 0;C=C.append(w.from(o.createAndFill(null,X)||void 0));const K=a.before(a.depth-(M-1));t.replace(K,a.after(-z),new O(C,4-M,0));let Z=-1;t.doc.nodesBetween(K,t.doc.content.size,(W,tt)=>{if(Z>-1)return!1;W.isTextblock&&W.content.size===0&&(Z=tt+1)}),Z>-1&&t.setSelection(J.near(t.doc.resolve(Z))),t.scrollIntoView()}return!0}const d=l.pos===a.end()?f.contentMatchAt(0).defaultType:null,v=Qe(u,f.type.name,f.attrs),y=Qe(u,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const b=d?[{type:o,attrs:v},{type:d,attrs:y}]:[{type:o,attrs:v}];if(!se(t.doc,a.pos,2))return!1;if(r){const{selection:C,storedMarks:M}=n,{splittableMarks:z}=i.extensionManager,H=M||C.$to.parentOffset&&C.$from.marks();if(t.split(a.pos,2,b).scrollIntoView(),!H||!r)return!0;const X=H.filter(K=>z.includes(K.type.name));t.ensureMarks(X)}return!0},Nn=(e,t)=>{const n=br(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Xt(e.doc,n.pos)&&e.join(n.pos),!0},Pn=(e,t)=>{const n=br(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Xt(e.doc,r)&&e.join(r),!0},kl=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:f})=>{const{extensions:u,splittableMarks:d}=i.extensionManager,v=Y(e,o.schema),y=Y(t,o.schema),{selection:b,storedMarks:C}=o,{$from:M,$to:z}=b,H=M.blockRange(z),X=C||b.$to.parentOffset&&b.$from.marks();if(!H)return!1;const K=br(Z=>ni(Z.type.name,u))(b);if(H.depth>=1&&K&&H.depth-K.depth<=1){if(K.node.type===v)return c.liftListItem(y);if(ni(K.node.type.name,u)&&v.validContent(K.node.content)&&a)return l().command(()=>(s.setNodeMarkup(K.pos,v),!0)).command(()=>Nn(s,v)).command(()=>Pn(s,v)).run()}return!n||!X||!a?l().command(()=>f().wrapInList(v,r)?!0:c.clearNodes()).wrapInList(v,r).command(()=>Nn(s,v)).command(()=>Pn(s,v)).run():l().command(()=>{const Z=f().wrapInList(v,r),W=X.filter(tt=>d.includes(tt.type.name));return s.ensureMarks(W),Z?!0:c.clearNodes()}).wrapInList(v,r).command(()=>Nn(s,v)).command(()=>Pn(s,v)).run()},$l=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Pt(e,r.schema);return ml(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},Ol=(e,t,n={})=>({state:r,commands:i})=>{const s=Y(e,r.schema),o=Y(t,r.schema);return yr(r,s,n)?i.setNode(o):i.setNode(s,n)},Ml=(e,t={})=>({state:n,commands:r})=>{const i=Y(e,n.schema);return yr(n,i,t)?r.lift(i):r.wrapIn(i,t)},El=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Tl=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},Al=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=Pt(e,r.schema),{$from:c,empty:f,ranges:u}=a;if(!i)return!0;if(f&&o){let{from:d,to:v}=a;const y=(s=c.marks().find(C=>C.type===l))===null||s===void 0?void 0:s.attrs,b=ks(c,l,y);b&&(d=b.from,v=b.to),n.removeMark(d,v,l)}else u.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},Il=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Ms(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(s=Y(e,r.schema)),a==="mark"&&(o=Pt(e,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,f=l.$to.pos;r.doc.nodesBetween(c,f,(u,d)=>{s&&s===u.type&&n.setNodeMarkup(d,void 0,{...u.attrs,...t}),o&&u.marks.length&&u.marks.forEach(v=>{if(o===v.type){const y=Math.max(d,c),b=Math.min(d+u.nodeSize,f);n.addMark(y,b,o.create({...v.attrs,...t}))}})})}),!0):!1},Nl=(e,t={})=>({state:n,dispatch:r})=>{const i=Y(e,n.schema);return ua(i,t)(n,r)},Pl=(e,t={})=>({state:n,dispatch:r})=>{const i=Y(e,n.schema);return da(i,t)(n,r)};var Ll=Object.freeze({__proto__:null,blur:ka,clearContent:$a,clearNodes:Oa,command:Ma,createParagraphNear:Ea,deleteCurrentNode:Ta,deleteNode:Aa,deleteRange:Ia,deleteSelection:Na,enter:Pa,exitCode:La,extendMarkRange:Ra,first:Fa,focus:za,forEach:ja,insertContent:Ha,insertContentAt:Ga,joinUp:Ua,joinDown:qa,joinBackward:Ka,joinForward:Za,keyboardShortcut:Ya,lift:Va,liftEmptyBlock:Qa,liftListItem:tl,newlineInCode:el,resetAttributes:nl,scrollIntoView:rl,selectAll:il,selectNodeBackward:sl,selectNodeForward:ol,selectParentNode:al,selectTextblockEnd:ll,selectTextblockStart:cl,setContent:ul,setMark:gl,setMeta:yl,setNode:bl,setNodeSelection:xl,setTextSelection:wl,sinkListItem:Cl,splitBlock:_l,splitListItem:Sl,toggleList:kl,toggleMark:$l,toggleNode:Ol,toggleWrap:Ml,undoInputRule:El,unsetAllMarks:Tl,unsetMark:Al,updateAttributes:Il,wrapIn:Nl,wrapInList:Pl});ce.create({name:"commands",addCommands(){return{...Ll}}});ce.create({name:"editable",addProseMirrorPlugins(){return[new Ne({key:new Pe("editable"),props:{editable:()=>this.editor.options.editable}})]}});ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Ne({key:new Pe("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}});ce.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:f,$anchor:u}=l,{pos:d,parent:v}=u,y=L.atStart(c).from===d;return!f||!y||!v.type.isTextblock||v.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _n()||Os()?s:i},addProseMirrorPlugins(){return[new Ne({key:new Pe("clearDocument"),appendTransaction:(e,t,n)=>{if(!(e.some(y=>y.docChanged)&&!t.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=t.selection,a=L.atStart(t.doc).from,l=L.atEnd(t.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const u=n.tr,d=_s({state:n,transaction:u}),{commands:v}=new ya({editor:this.editor,state:d});if(v.clearNodes(),!!u.steps.length)return u}})]}});ce.create({name:"tabindex",addProseMirrorPlugins(){return[new Ne({key:new Pe("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Dl{constructor(t,n,r){this.isDragging=!1,this.component=t,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var n,r,i,s,o,a,l;const{view:c}=this.editor,f=t.target,u=f.nodeType===3?(n=f.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):f.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(f)||!u)return;let d=0,v=0;if(this.dom!==u){const C=this.dom.getBoundingClientRect(),M=u.getBoundingClientRect(),z=(i=t.offsetX)!==null&&i!==void 0?i:(s=t.nativeEvent)===null||s===void 0?void 0:s.offsetX,H=(o=t.offsetY)!==null&&o!==void 0?o:(a=t.nativeEvent)===null||a===void 0?void 0:a.offsetY;d=M.x-C.x+z,v=M.y-C.y+H}(l=t.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,d,v);const y=D.create(c.state.doc,this.getPos()),b=c.state.tr.setSelection(y);c.dispatch(b)}stopEvent(t){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const r=t.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const s=t.type.startsWith("drag"),o=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!o&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,f=!!this.node.type.spec.draggable,u=D.isSelectable(this.node),d=t.type==="copy",v=t.type==="paste",y=t.type==="cut",b=t.type==="mousedown";if(!f&&u&&s&&t.preventDefault(),f&&s&&!c)return t.preventDefault(),!1;if(f&&l&&!c&&b){const C=r.closest("[data-drag-handle]");C&&(this.dom===C||this.dom.contains(C))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||o||d||v||y||b&&u)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&_n()&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return n.setNodeMarkup(r,void 0,{...this.node.attrs,...t}),!0})}deleteNode(){const t=this.getPos(),n=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:n})}}/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */var st=Object.freeze({}),T=Array.isArray;function k(e){return e==null}function m(e){return e!=null}function j(e){return e===!0}function Rl(e){return e===!1}function Le(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="boolean"}function F(e){return typeof e=="function"}function V(e){return e!==null&&typeof e=="object"}var xr=Object.prototype.toString;function ot(e){return xr.call(e)==="[object Object]"}function Fl(e){return xr.call(e)==="[object RegExp]"}function Es(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function Zn(e){return m(e)&&typeof e.then=="function"&&typeof e.catch=="function"}function Bl(e){return e==null?"":Array.isArray(e)||ot(e)&&e.toString===xr?JSON.stringify(e,null,2):String(e)}function Oe(e){var t=parseFloat(e);return isNaN(t)?e:t}function mt(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(s){return n[s.toLowerCase()]}:function(s){return n[s]}}mt("slot,component",!0);var zl=mt("key,ref,slot,slot-scope,is");function Lt(e,t){var n=e.length;if(n){if(t===e[n-1]){e.length=n-1;return}var r=e.indexOf(t);if(r>-1)return e.splice(r,1)}}var jl=Object.prototype.hasOwnProperty;function Q(e,t){return jl.call(e,t)}function Yt(e){var t=Object.create(null);return function(r){var i=t[r];return i||(t[r]=e(r))}}var Hl=/-(\w)/g,Gt=Yt(function(e){return e.replace(Hl,function(t,n){return n?n.toUpperCase():""})}),Jl=Yt(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),Wl=/\B([A-Z])/g,De=Yt(function(e){return e.replace(Wl,"-$1").toLowerCase()});function Gl(e,t){function n(r){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,r):e.call(t)}return n._length=e.length,n}function Ul(e,t){return e.bind(t)}var Ts=Function.prototype.bind?Ul:Gl;function Xn(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function R(e,t){for(var n in t)e[n]=t[n];return e}function As(e){for(var t={},n=0;n<e.length;n++)e[n]&&R(t,e[n]);return t}function q(e,t,n){}var Je=function(e,t,n){return!1},Is=function(e){return e};function Ut(e,t){if(e===t)return!0;var n=V(e),r=V(t);if(n&&r)try{var i=Array.isArray(e),s=Array.isArray(t);if(i&&s)return e.length===t.length&&e.every(function(l,c){return Ut(l,t[c])});if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!i&&!s){var o=Object.keys(e),a=Object.keys(t);return o.length===a.length&&o.every(function(l){return Ut(e[l],t[l])})}else return!1}catch{return!1}else return!n&&!r?String(e)===String(t):!1}function Ns(e,t){for(var n=0;n<e.length;n++)if(Ut(e[n],t))return n;return-1}function fn(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function ql(e,t){return e===t?e===0&&1/e!==1/t:e===e||t===t}var ii="data-server-rendered",Sn=["component","directive","filter"],Ps=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],dt={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Je,isReservedAttr:Je,isUnknownElement:Je,getTagNamespace:q,parsePlatformTagName:Is,mustUseProp:Je,async:!0,_lifecycleHooks:Ps},Kl=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Ls(e){var t=(e+"").charCodeAt(0);return t===36||t===95}function Et(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Zl=new RegExp("[^".concat(Kl.source,".$_\\d]"));function Xl(e){if(!Zl.test(e)){var t=e.split(".");return function(n){for(var r=0;r<t.length;r++){if(!n)return;n=n[t[r]]}return n}}}var Yl="__proto__"in{},lt=typeof window<"u",pt=lt&&window.navigator.userAgent.toLowerCase(),fe=pt&&/msie|trident/.test(pt),ue=pt&&pt.indexOf("msie 9.0")>0,Ds=pt&&pt.indexOf("edge/")>0;pt&&pt.indexOf("android")>0;var Vl=pt&&/iphone|ipad|ipod|ios/.test(pt),si=pt&&pt.match(/firefox\/(\d+)/),Yn={}.watch,Rs=!1;if(lt)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Rs=!0}}),window.addEventListener("test-passive",null,oi)}catch{}var We,Re=function(){return We===void 0&&(!lt&&typeof global<"u"?We=global.process&&global.process.env.VUE_ENV==="server":We=!1),We},un=lt&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return typeof e=="function"&&/native code/.test(e.toString())}var Fe=typeof Symbol<"u"&&oe(Symbol)&&typeof Reflect<"u"&&oe(Reflect.ownKeys),Me;typeof Set<"u"&&oe(Set)?Me=Set:Me=function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(t){return this.set[t]===!0},e.prototype.add=function(t){this.set[t]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var _e=null;function Tt(e){e===void 0&&(e=null),e||_e&&_e._scope.off(),_e=e,e&&e._scope.on()}var at=function(){function e(t,n,r,i,s,o,a,l){this.tag=t,this.data=n,this.children=r,this.text=i,this.elm=s,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=l,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),Ht=function(e){e===void 0&&(e="");var t=new at;return t.text=e,t.isComment=!0,t};function ne(e){return new at(void 0,void 0,void 0,String(e))}function Vn(e){var t=new at(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ql=0,tn=[],tc=function(){for(var e=0;e<tn.length;e++){var t=tn[e];t.subs=t.subs.filter(function(n){return n}),t._pending=!1}tn.length=0},At=function(){function e(){this._pending=!1,this.id=Ql++,this.subs=[]}return e.prototype.addSub=function(t){this.subs.push(t)},e.prototype.removeSub=function(t){this.subs[this.subs.indexOf(t)]=null,this._pending||(this._pending=!0,tn.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(t){for(var n=this.subs.filter(function(o){return o}),r=0,i=n.length;r<i;r++){var s=n[r];s.update()}},e}();At.target=null;var en=[];function de(e){en.push(e),At.target=e}function pe(){en.pop(),At.target=en[en.length-1]}var Fs=Array.prototype,dn=Object.create(Fs),ec=["push","pop","shift","unshift","splice","sort","reverse"];ec.forEach(function(e){var t=Fs[e];Et(dn,e,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=t.apply(this,r),o=this.__ob__,a;switch(e){case"push":case"unshift":a=r;break;case"splice":a=r.slice(2);break}return a&&o.observeArray(a),o.dep.notify(),s})});var ai=Object.getOwnPropertyNames(dn),Bs={},wr=!0;function It(e){wr=e}var nc={notify:q,depend:q,addSub:q,removeSub:q},li=function(){function e(t,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!1),this.value=t,this.shallow=n,this.mock=r,this.dep=r?nc:new At,this.vmCount=0,Et(t,"__ob__",this),T(t)){if(!r)if(Yl)t.__proto__=dn;else for(var i=0,s=ai.length;i<s;i++){var o=ai[i];Et(t,o,dn[o])}n||this.observeArray(t)}else for(var a=Object.keys(t),i=0;i<a.length;i++){var o=a[i];qt(t,o,Bs,void 0,n,r)}}return e.prototype.observeArray=function(t){for(var n=0,r=t.length;n<r;n++)wt(t[n],!1,this.mock)},e}();function wt(e,t,n){if(e&&Q(e,"__ob__")&&e.__ob__ instanceof li)return e.__ob__;if(wr&&(n||!Re())&&(T(e)||ot(e))&&Object.isExtensible(e)&&!e.__v_skip&&!yt(e)&&!(e instanceof at))return new li(e,t,n)}function qt(e,t,n,r,i,s){var o=new At,a=Object.getOwnPropertyDescriptor(e,t);if(!(a&&a.configurable===!1)){var l=a&&a.get,c=a&&a.set;(!l||c)&&(n===Bs||arguments.length===2)&&(n=e[t]);var f=!i&&wt(n,!1,s);return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var d=l?l.call(e):n;return At.target&&(o.depend(),f&&(f.dep.depend(),T(d)&&js(d))),yt(d)&&!i?d.value:d},set:function(d){var v=l?l.call(e):n;if(ql(v,d)){if(c)c.call(e,d);else{if(l)return;if(!i&&yt(v)&&!yt(d)){v.value=d;return}else n=d}f=!i&&wt(d,!1,s),o.notify()}}}),o}}function Cr(e,t,n){if(!_r(e)){var r=e.__ob__;return T(e)&&Es(t)?(e.length=Math.max(e.length,t),e.splice(t,1,n),r&&!r.shallow&&r.mock&&wt(n,!1,!0),n):t in e&&!(t in Object.prototype)?(e[t]=n,n):e._isVue||r&&r.vmCount?n:r?(qt(r.value,t,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(e[t]=n,n)}}function zs(e,t){if(T(e)&&Es(t)){e.splice(t,1);return}var n=e.__ob__;e._isVue||n&&n.vmCount||_r(e)||Q(e,t)&&(delete e[t],n&&n.dep.notify())}function js(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),T(t)&&js(t)}function Hs(e){return rc(e,!0),Et(e,"__v_isShallow",!0),e}function rc(e,t){_r(e)||wt(e,t,Re())}function _r(e){return!!(e&&e.__v_isReadonly)}function yt(e){return!!(e&&e.__v_isRef===!0)}function Qn(e,t,n){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var r=t[n];if(yt(r))return r.value;var i=r&&r.__ob__;return i&&i.dep.depend(),r},set:function(r){var i=t[n];yt(i)&&!yt(r)?i.value=r:t[n]=r}})}var rt,ic=function(){function e(t){t===void 0&&(t=!1),this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=rt,!t&&rt&&(this.index=(rt.scopes||(rt.scopes=[])).push(this)-1)}return e.prototype.run=function(t){if(this.active){var n=rt;try{return rt=this,t()}finally{rt=n}}},e.prototype.on=function(){rt=this},e.prototype.off=function(){rt=this.parent},e.prototype.stop=function(t){if(this.active){var n=void 0,r=void 0;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].teardown();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}},e}();function sc(e,t){t===void 0&&(t=rt),t&&t.active&&t.effects.push(e)}function oc(e){var t=e._provided,n=e.$parent&&e.$parent._provided;return n===t?e._provided=Object.create(n):t}var ci=Yt(function(e){var t=e.charAt(0)==="&";e=t?e.slice(1):e;var n=e.charAt(0)==="~";e=n?e.slice(1):e;var r=e.charAt(0)==="!";return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}});function tr(e,t){function n(){var r=n.fns;if(T(r))for(var i=r.slice(),s=0;s<i.length;s++)Nt(i[s],null,arguments,t,"v-on handler");else return Nt(r,null,arguments,t,"v-on handler")}return n.fns=e,n}function Js(e,t,n,r,i,s){var o,a,l,c;for(o in e)a=e[o],l=t[o],c=ci(o),k(a)||(k(l)?(k(a.fns)&&(a=e[o]=tr(a,s)),j(c.once)&&(a=e[o]=i(c.name,a,c.capture)),n(c.name,a,c.capture,c.passive,c.params)):a!==l&&(l.fns=a,e[o]=l));for(o in t)k(e[o])&&(c=ci(o),r(c.name,t[o],c.capture))}function Ot(e,t,n){e instanceof at&&(e=e.data.hook||(e.data.hook={}));var r,i=e[t];function s(){n.apply(this,arguments),Lt(r.fns,s)}k(i)?r=tr([s]):m(i.fns)&&j(i.merged)?(r=i,r.fns.push(s)):r=tr([i,s]),r.merged=!0,e[t]=r}function ac(e,t,n){var r=t.options.props;if(!k(r)){var i={},s=e.attrs,o=e.props;if(m(s)||m(o))for(var a in r){var l=De(a);fi(i,o,a,l,!0)||fi(i,s,a,l,!1)}return i}}function fi(e,t,n,r,i){if(m(t)){if(Q(t,n))return e[n]=t[n],i||delete t[n],!0;if(Q(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function lc(e){for(var t=0;t<e.length;t++)if(T(e[t]))return Array.prototype.concat.apply([],e);return e}function Sr(e){return Le(e)?[ne(e)]:T(e)?Ws(e):void 0}function me(e){return m(e)&&m(e.text)&&Rl(e.isComment)}function Ws(e,t){var n=[],r,i,s,o;for(r=0;r<e.length;r++)i=e[r],!(k(i)||typeof i=="boolean")&&(s=n.length-1,o=n[s],T(i)?i.length>0&&(i=Ws(i,"".concat(t||"","_").concat(r)),me(i[0])&&me(o)&&(n[s]=ne(o.text+i[0].text),i.shift()),n.push.apply(n,i)):Le(i)?me(o)?n[s]=ne(o.text+i):i!==""&&n.push(ne(i)):me(i)&&me(o)?n[s]=ne(o.text+i.text):(j(e._isVList)&&m(i.tag)&&k(i.key)&&m(t)&&(i.key="__vlist".concat(t,"_").concat(r,"__")),n.push(i)));return n}function cc(e,t){var n=null,r,i,s,o;if(T(e)||typeof e=="string")for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if(typeof e=="number")for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(V(e))if(Fe&&e[Symbol.iterator]){n=[];for(var a=e[Symbol.iterator](),l=a.next();!l.done;)n.push(t(l.value,n.length)),l=a.next()}else for(s=Object.keys(e),n=new Array(s.length),r=0,i=s.length;r<i;r++)o=s[r],n[r]=t(e[o],o,r);return m(n)||(n=[]),n._isVList=!0,n}function fc(e,t,n,r){var i=this.$scopedSlots[e],s;i?(n=n||{},r&&(n=R(R({},r),n)),s=i(n)||(F(t)?t():t)):s=this.$slots[e]||(F(t)?t():t);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},s):s}function uc(e){return yn(this.$options,"filters",e)||Is}function ui(e,t){return T(e)?e.indexOf(t)===-1:e!==t}function dc(e,t,n,r,i){var s=dt.keyCodes[t]||n;return i&&r&&!dt.keyCodes[t]?ui(i,r):s?ui(s,e):r?De(r)!==t:e===void 0}function pc(e,t,n,r,i){if(n&&V(n)){T(n)&&(n=As(n));var s=void 0,o=function(l){if(l==="class"||l==="style"||zl(l))s=e;else{var c=e.attrs&&e.attrs.type;s=r||dt.mustUseProp(t,c,l)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var f=Gt(l),u=De(l);if(!(f in s)&&!(u in s)&&(s[l]=n[l],i)){var d=e.on||(e.on={});d["update:".concat(l)]=function(v){n[l]=v}}};for(var a in n)o(a)}return e}function hc(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),Gs(r,"__static__".concat(e),!1)),r}function mc(e,t,n){return Gs(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function Gs(e,t,n){if(T(e))for(var r=0;r<e.length;r++)e[r]&&typeof e[r]!="string"&&di(e[r],"".concat(t,"_").concat(r),n);else di(e,t,n)}function di(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function vc(e,t){if(t&&ot(t)){var n=e.on=e.on?R({},e.on):{};for(var r in t){var i=n[r],s=t[r];n[r]=i?[].concat(i,s):s}}return e}function Us(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var s=e[i];T(s)?Us(s,t,n):s&&(s.proxy&&(s.fn.proxy=!0),t[s.key]=s.fn)}return r&&(t.$key=r),t}function gc(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];typeof r=="string"&&r&&(e[t[n]]=t[n+1])}return e}function yc(e,t){return typeof e=="string"?t+e:e}function qs(e){e._o=mc,e._n=Oe,e._s=Bl,e._l=cc,e._t=fc,e._q=Ut,e._i=Ns,e._m=hc,e._f=uc,e._k=dc,e._b=pc,e._v=ne,e._e=Ht,e._u=Us,e._g=vc,e._d=gc,e._p=yc}function kr(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var s=e[r],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,(s.context===t||s.fnContext===t)&&o&&o.slot!=null){var a=o.slot,l=n[a]||(n[a]=[]);s.tag==="template"?l.push.apply(l,s.children||[]):l.push(s)}else(n.default||(n.default=[])).push(s)}for(var c in n)n[c].every(bc)&&delete n[c];return n}function bc(e){return e.isComment&&!e.asyncFactory||e.text===" "}function Ee(e){return e.isComment&&e.asyncFactory}function Se(e,t,n,r){var i,s=Object.keys(n).length>0,o=t?!!t.$stable:!s,a=t&&t.$key;if(!t)i={};else{if(t._normalized)return t._normalized;if(o&&r&&r!==st&&a===r.$key&&!s&&!r.$hasNormal)return r;i={};for(var l in t)t[l]&&l[0]!=="$"&&(i[l]=xc(e,n,l,t[l]))}for(var c in n)c in i||(i[c]=wc(n,c));return t&&Object.isExtensible(t)&&(t._normalized=i),Et(i,"$stable",o),Et(i,"$key",a),Et(i,"$hasNormal",s),i}function xc(e,t,n,r){var i=function(){var s=_e;Tt(e);var o=arguments.length?r.apply(null,arguments):r({});o=o&&typeof o=="object"&&!T(o)?[o]:Sr(o);var a=o&&o[0];return Tt(s),o&&(!a||o.length===1&&a.isComment&&!Ee(a))?void 0:o};return r.proxy&&Object.defineProperty(t,n,{get:i,enumerable:!0,configurable:!0}),i}function wc(e,t){return function(){return e[t]}}function Cc(e){var t=e.$options,n=t.setup;if(n){var r=e._setupContext=_c(e);Tt(e),de();var i=Nt(n,null,[e._props||Hs({}),r],e,"setup");if(pe(),Tt(),F(i))t.render=i;else if(V(i))if(e._setupState=i,i.__sfc){var o=e._setupProxy={};for(var s in i)s!=="__sfc"&&Qn(o,i,s)}else for(var s in i)Ls(s)||Qn(e,i,s)}}function _c(e){return{get attrs(){if(!e._attrsProxy){var t=e._attrsProxy={};Et(t,"_v_attr_proxy",!0),pn(t,e.$attrs,st,e,"$attrs")}return e._attrsProxy},get listeners(){if(!e._listenersProxy){var t=e._listenersProxy={};pn(t,e.$listeners,st,e,"$listeners")}return e._listenersProxy},get slots(){return kc(e)},emit:Ts(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach(function(n){return Qn(e,t,n)})}}}function pn(e,t,n,r,i){var s=!1;for(var o in t)o in e?t[o]!==n[o]&&(s=!0):(s=!0,Sc(e,o,r,i));for(var o in e)o in t||(s=!0,delete e[o]);return s}function Sc(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[r][t]}})}function kc(e){return e._slotsProxy||Ks(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function Ks(e,t){for(var n in t)e[n]=t[n];for(var n in e)n in t||delete e[n]}function $c(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=kr(t._renderChildren,r),e.$scopedSlots=n?Se(e.$parent,n.data.scopedSlots,e.$slots):st,e._c=function(s,o,a,l){return hn(e,s,o,a,l,!1)},e.$createElement=function(s,o,a,l){return hn(e,s,o,a,l,!0)};var i=n&&n.data;qt(e,"$attrs",i&&i.attrs||st,null,!0),qt(e,"$listeners",t._parentListeners||st,null,!0)}var er=null;function Oc(e){qs(e.prototype),e.prototype.$nextTick=function(t){return $r(t,this)},e.prototype._render=function(){var t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&t._isMounted&&(t.$scopedSlots=Se(t.$parent,i.data.scopedSlots,t.$slots,t.$scopedSlots),t._slotsProxy&&Ks(t._slotsProxy,t.$scopedSlots)),t.$vnode=i;var s;try{Tt(t),er=t,s=r.call(t._renderProxy,t.$createElement)}catch(o){Kt(o,t,"render"),s=t._vnode}finally{er=null,Tt()}return T(s)&&s.length===1&&(s=s[0]),s instanceof at||(s=Ht()),s.parent=i,s}}function Ln(e,t){return(e.__esModule||Fe&&e[Symbol.toStringTag]==="Module")&&(e=e.default),V(e)?t.extend(e):e}function Mc(e,t,n,r,i){var s=Ht();return s.asyncFactory=e,s.asyncMeta={data:t,context:n,children:r,tag:i},s}function Ec(e,t){if(j(e.error)&&m(e.errorComp))return e.errorComp;if(m(e.resolved))return e.resolved;var n=er;if(n&&m(e.owners)&&e.owners.indexOf(n)===-1&&e.owners.push(n),j(e.loading)&&m(e.loadingComp))return e.loadingComp;if(n&&!m(e.owners)){var r=e.owners=[n],i=!0,s=null,o=null;n.$on("hook:destroyed",function(){return Lt(r,n)});var a=function(u){for(var d=0,v=r.length;d<v;d++)r[d].$forceUpdate();u&&(r.length=0,s!==null&&(clearTimeout(s),s=null),o!==null&&(clearTimeout(o),o=null))},l=fn(function(u){e.resolved=Ln(u,t),i?r.length=0:a(!0)}),c=fn(function(u){m(e.errorComp)&&(e.error=!0,a(!0))}),f=e(l,c);return V(f)&&(Zn(f)?k(e.resolved)&&f.then(l,c):Zn(f.component)&&(f.component.then(l,c),m(f.error)&&(e.errorComp=Ln(f.error,t)),m(f.loading)&&(e.loadingComp=Ln(f.loading,t),f.delay===0?e.loading=!0:s=setTimeout(function(){s=null,k(e.resolved)&&k(e.error)&&(e.loading=!0,a(!1))},f.delay||200)),m(f.timeout)&&(o=setTimeout(function(){o=null,k(e.resolved)&&c(null)},f.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}function Zs(e){if(T(e))for(var t=0;t<e.length;t++){var n=e[t];if(m(n)&&(m(n.componentOptions)||Ee(n)))return n}}var Tc=1,Xs=2;function hn(e,t,n,r,i,s){return(T(n)||Le(n))&&(i=r,r=n,n=void 0),j(s)&&(i=Xs),Ac(e,t,n,r,i)}function Ac(e,t,n,r,i){if(m(n)&&m(n.__ob__)||(m(n)&&m(n.is)&&(t=n.is),!t))return Ht();T(r)&&F(r[0])&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),i===Xs?r=Sr(r):i===Tc&&(r=lc(r));var s,o;if(typeof t=="string"){var a=void 0;o=e.$vnode&&e.$vnode.ns||dt.getTagNamespace(t),dt.isReservedTag(t)?s=new at(dt.parsePlatformTagName(t),n,r,void 0,void 0,e):(!n||!n.pre)&&m(a=yn(e.$options,"components",t))?s=xi(a,n,e,r,t):s=new at(t,n,r,void 0,void 0,e)}else s=xi(t,n,e,r);return T(s)?s:m(s)?(m(o)&&Ys(s,o),m(n)&&Ic(n),s):Ht()}function Ys(e,t,n){if(e.ns=t,e.tag==="foreignObject"&&(t=void 0,n=!0),m(e.children))for(var r=0,i=e.children.length;r<i;r++){var s=e.children[r];m(s.tag)&&(k(s.ns)||j(n)&&s.tag!=="svg")&&Ys(s,t,n)}}function Ic(e){V(e.style)&&mn(e.style),V(e.class)&&mn(e.class)}function Kt(e,t,n){de();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var s=0;s<i.length;s++)try{var o=i[s].call(r,e,t,n)===!1;if(o)return}catch(a){pi(a,r,"errorCaptured hook")}}pi(e,t,n)}finally{pe()}}function Nt(e,t,n,r,i){var s;try{s=n?e.apply(t,n):e.call(t),s&&!s._isVue&&Zn(s)&&!s._handled&&(s.catch(function(o){return Kt(o,r,i+" (Promise/async)")}),s._handled=!0)}catch(o){Kt(o,r,i)}return s}function pi(e,t,n){if(dt.errorHandler)try{return dt.errorHandler.call(null,e,t,n)}catch(r){r!==e&&hi(r)}hi(e)}function hi(e,t,n){if(lt&&typeof console<"u")console.error(e);else throw e}var nr=!1,rr=[],ir=!1;function Ge(){ir=!1;var e=rr.slice(0);rr.length=0;for(var t=0;t<e.length;t++)e[t]()}var xe;if(typeof Promise<"u"&&oe(Promise)){var Nc=Promise.resolve();xe=function(){Nc.then(Ge),Vl&&setTimeout(q)},nr=!0}else if(!fe&&typeof MutationObserver<"u"&&(oe(MutationObserver)||MutationObserver.toString()==="[object MutationObserverConstructor]")){var Ue=1,Pc=new MutationObserver(Ge),mi=document.createTextNode(String(Ue));Pc.observe(mi,{characterData:!0}),xe=function(){Ue=(Ue+1)%2,mi.data=String(Ue)},nr=!0}else typeof setImmediate<"u"&&oe(setImmediate)?xe=function(){setImmediate(Ge)}:xe=function(){setTimeout(Ge,0)};function $r(e,t){var n;if(rr.push(function(){if(e)try{e.call(t)}catch(r){Kt(r,t,"nextTick")}else n&&n(t)}),ir||(ir=!0,xe()),!e&&typeof Promise<"u")return new Promise(function(r){n=r})}var Lc="2.7.14",vi=new Me;function mn(e){return nn(e,vi),vi.clear(),e}function nn(e,t){var n,r,i=T(e);if(!(!i&&!V(e)||e.__v_skip||Object.isFrozen(e)||e instanceof at)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(i)for(n=e.length;n--;)nn(e[n],t);else if(yt(e))nn(e.value,t);else for(r=Object.keys(e),n=r.length;n--;)nn(e[r[n]],t)}}var Dc=0,Or=function(){function e(t,n,r,i,s){sc(this,rt&&!rt._vm?rt:t?t._scope:void 0),(this.vm=t)&&s&&(t._watcher=this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++Dc,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Me,this.newDepIds=new Me,this.expression="",F(n)?this.getter=n:(this.getter=Xl(n),this.getter||(this.getter=q)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){de(this);var t,n=this.vm;try{t=this.getter.call(n,n)}catch(r){if(this.user)Kt(r,n,'getter for watcher "'.concat(this.expression,'"'));else throw r}finally{this.deep&&mn(t),pe(),this.cleanupDeps()}return t},e.prototype.addDep=function(t){var n=t.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(t),this.depIds.has(n)||t.addSub(this))},e.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var n=this.deps[t];this.newDepIds.has(n.id)||n.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Vc(this)},e.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||V(t)||this.deep){var n=this.value;if(this.value=t,this.user){var r='callback for watcher "'.concat(this.expression,'"');Nt(this.cb,this.vm,[t,n],this.vm,r)}else this.cb.call(this.vm,t,n)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&Lt(this.vm._scope.effects,this),this.active){for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}();function Rc(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Vs(e,t)}var Te;function Fc(e,t){Te.$on(e,t)}function Bc(e,t){Te.$off(e,t)}function zc(e,t){var n=Te;return function r(){var i=t.apply(null,arguments);i!==null&&n.$off(e,r)}}function Vs(e,t,n){Te=e,Js(t,n||{},Fc,Bc,zc,e),Te=void 0}function jc(e){var t=/^hook:/;e.prototype.$on=function(n,r){var i=this;if(T(n))for(var s=0,o=n.length;s<o;s++)i.$on(n[s],r);else(i._events[n]||(i._events[n]=[])).push(r),t.test(n)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(n,r){var i=this;function s(){i.$off(n,s),r.apply(i,arguments)}return s.fn=r,i.$on(n,s),i},e.prototype.$off=function(n,r){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(T(n)){for(var s=0,o=n.length;s<o;s++)i.$off(n[s],r);return i}var a=i._events[n];if(!a)return i;if(!r)return i._events[n]=null,i;for(var l,c=a.length;c--;)if(l=a[c],l===r||l.fn===r){a.splice(c,1);break}return i},e.prototype.$emit=function(n){var r=this,i=r._events[n];if(i){i=i.length>1?Xn(i):i;for(var s=Xn(arguments,1),o='event handler for "'.concat(n,'"'),a=0,l=i.length;a<l;a++)Nt(i[a],r,s,r,o)}return r}}var Jt=null;function Qs(e){var t=Jt;return Jt=e,function(){Jt=t}}function Hc(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._provided=n?n._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Jc(e){e.prototype._update=function(t,n){var r=this,i=r.$el,s=r._vnode,o=Qs(r);r._vnode=t,s?r.$el=r.__patch__(s,t):r.$el=r.__patch__(r.$el,t,n,!1),o(),i&&(i.__vue__=null),r.$el&&(r.$el.__vue__=r);for(var a=r;a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode;)a.$parent.$el=a.$el,a=a.$parent},e.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},e.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){ht(t,"beforeDestroy"),t._isBeingDestroyed=!0;var n=t.$parent;n&&!n._isBeingDestroyed&&!t.$options.abstract&&Lt(n.$children,t),t._scope.stop(),t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),ht(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Wc(e,t,n){e.$el=t,e.$options.render||(e.$options.render=Ht),ht(e,"beforeMount");var r;r=function(){e._update(e._render(),n)};var i={before:function(){e._isMounted&&!e._isDestroyed&&ht(e,"beforeUpdate")}};new Or(e,r,q,i,!0),n=!1;var s=e._preWatchers;if(s)for(var o=0;o<s.length;o++)s[o].run();return e.$vnode==null&&(e._isMounted=!0,ht(e,"mounted")),e}function Gc(e,t,n,r,i){var s=r.data.scopedSlots,o=e.$scopedSlots,a=!!(s&&!s.$stable||o!==st&&!o.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),l=!!(i||e.$options._renderChildren||a),c=e.$vnode;e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=i;var f=r.data.attrs||st;e._attrsProxy&&pn(e._attrsProxy,f,c.data&&c.data.attrs||st,e,"$attrs")&&(l=!0),e.$attrs=f,n=n||st;var u=e.$options._parentListeners;if(e._listenersProxy&&pn(e._listenersProxy,n,u||st,e,"$listeners"),e.$listeners=e.$options._parentListeners=n,Vs(e,n,u),t&&e.$options.props){It(!1);for(var d=e._props,v=e.$options._propKeys||[],y=0;y<v.length;y++){var b=v[y],C=e.$options.props;d[b]=Nr(b,C,t,e)}It(!0),e.$options.propsData=t}l&&(e.$slots=kr(i,r.context),e.$forceUpdate())}function to(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Mr(e,t){if(t){if(e._directInactive=!1,to(e))return}else if(e._directInactive)return;if(e._inactive||e._inactive===null){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Mr(e.$children[n]);ht(e,"activated")}}function eo(e,t){if(!(t&&(e._directInactive=!0,to(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)eo(e.$children[n]);ht(e,"deactivated")}}function ht(e,t,n,r){r===void 0&&(r=!0),de();var i=_e;r&&Tt(e);var s=e.$options[t],o="".concat(t," hook");if(s)for(var a=0,l=s.length;a<l;a++)Nt(s[a],e,n||null,e,o);e._hasHookEvent&&e.$emit("hook:"+t),r&&Tt(i),pe()}var bt=[],Er=[],vn={},sr=!1,Tr=!1,re=0;function Uc(){re=bt.length=Er.length=0,vn={},sr=Tr=!1}var no=0,or=Date.now;if(lt&&!fe){var Dn=window.performance;Dn&&typeof Dn.now=="function"&&or()>document.createEvent("Event").timeStamp&&(or=function(){return Dn.now()})}var qc=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function Kc(){no=or(),Tr=!0;var e,t;for(bt.sort(qc),re=0;re<bt.length;re++)e=bt[re],e.before&&e.before(),t=e.id,vn[t]=null,e.run();var n=Er.slice(),r=bt.slice();Uc(),Yc(n),Zc(r),tc(),un&&dt.devtools&&un.emit("flush")}function Zc(e){for(var t=e.length;t--;){var n=e[t],r=n.vm;r&&r._watcher===n&&r._isMounted&&!r._isDestroyed&&ht(r,"updated")}}function Xc(e){e._inactive=!1,Er.push(e)}function Yc(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Mr(e[t],!0)}function Vc(e){var t=e.id;if(vn[t]==null&&!(e===At.target&&e.noRecurse)){if(vn[t]=!0,!Tr)bt.push(e);else{for(var n=bt.length-1;n>re&&bt[n].id>e.id;)n--;bt.splice(n+1,0,e)}sr||(sr=!0,$r(Kc))}}function Qc(e){var t=e.$options.provide;if(t){var n=F(t)?t.call(e):t;if(!V(n))return;for(var r=oc(e),i=Fe?Reflect.ownKeys(n):Object.keys(n),s=0;s<i.length;s++){var o=i[s];Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(n,o))}}}function tf(e){var t=ro(e.$options.inject,e);t&&(It(!1),Object.keys(t).forEach(function(n){qt(e,n,t[n])}),It(!0))}function ro(e,t){if(e){for(var n=Object.create(null),r=Fe?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var s=r[i];if(s!=="__ob__"){var o=e[s].from;if(o in t._provided)n[s]=t._provided[o];else if("default"in e[s]){var a=e[s].default;n[s]=F(a)?a.call(t):a}}}return n}}function Ar(e,t,n,r,i){var s=this,o=i.options,a;Q(r,"_uid")?(a=Object.create(r),a._original=r):(a=r,r=r._original);var l=j(o._compiled),c=!l;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||st,this.injections=ro(o.inject,r),this.slots=function(){return s.$slots||Se(r,e.scopedSlots,s.$slots=kr(n,r)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Se(r,e.scopedSlots,this.slots())}}),l&&(this.$options=o,this.$slots=this.slots(),this.$scopedSlots=Se(r,e.scopedSlots,this.$slots)),o._scopeId?this._c=function(f,u,d,v){var y=hn(a,f,u,d,v,c);return y&&!T(y)&&(y.fnScopeId=o._scopeId,y.fnContext=r),y}:this._c=function(f,u,d,v){return hn(a,f,u,d,v,c)}}qs(Ar.prototype);function ef(e,t,n,r,i){var s=e.options,o={},a=s.props;if(m(a))for(var l in a)o[l]=Nr(l,a,t||st);else m(n.attrs)&&yi(o,n.attrs),m(n.props)&&yi(o,n.props);var c=new Ar(n,o,i,r,e),f=s.render.call(null,c._c,c);if(f instanceof at)return gi(f,n,c.parent,s);if(T(f)){for(var u=Sr(f)||[],d=new Array(u.length),v=0;v<u.length;v++)d[v]=gi(u[v],n,c.parent,s);return d}}function gi(e,t,n,r,i){var s=Vn(e);return s.fnContext=n,s.fnOptions=r,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function yi(e,t){for(var n in t)e[Gt(n)]=t[n]}function gn(e){return e.name||e.__name||e._componentTag}var Ir={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Ir.prepatch(n,n)}else{var r=e.componentInstance=nf(e,Jt);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;Gc(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,ht(n,"mounted")),e.data.keepAlive&&(t._isMounted?Xc(n):Mr(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?eo(t,!0):t.$destroy())}},bi=Object.keys(Ir);function xi(e,t,n,r,i){if(!k(e)){var s=n.$options._base;if(V(e)&&(e=s.extend(e)),typeof e=="function"){var o;if(k(e.cid)&&(o=e,e=Ec(o,s),e===void 0))return Mc(o,t,n,r,i);t=t||{},Lr(e),m(t.model)&&of(e.options,t);var a=ac(t,e);if(j(e.options.functional))return ef(e,a,t,n,r);var l=t.on;if(t.on=t.nativeOn,j(e.options.abstract)){var c=t.slot;t={},c&&(t.slot=c)}rf(t);var f=gn(e.options)||i,u=new at("vue-component-".concat(e.cid).concat(f?"-".concat(f):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:a,listeners:l,tag:i,children:r},o);return u}}}function nf(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return m(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function rf(e){for(var t=e.hook||(e.hook={}),n=0;n<bi.length;n++){var r=bi[n],i=t[r],s=Ir[r];i!==s&&!(i&&i._merged)&&(t[r]=i?sf(s,i):s)}}function sf(e,t){var n=function(r,i){e(r,i),t(r,i)};return n._merged=!0,n}function of(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),s=i[r],o=t.model.callback;m(s)?(T(s)?s.indexOf(o)===-1:s!==o)&&(i[r]=[o].concat(s)):i[r]=o}var af=q,vt=dt.optionMergeStrategies;function Ae(e,t,n){if(n===void 0&&(n=!0),!t)return e;for(var r,i,s,o=Fe?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)r=o[a],r!=="__ob__"&&(i=e[r],s=t[r],!n||!Q(e,r)?Cr(e,r,s):i!==s&&ot(i)&&ot(s)&&Ae(i,s));return e}function wi(e,t,n){return n?function(){var i=F(t)?t.call(n,n):t,s=F(e)?e.call(n,n):e;return i?Ae(i,s):s}:t?e?function(){return Ae(F(t)?t.call(this,this):t,F(e)?e.call(this,this):e)}:t:e}vt.data=function(e,t,n){return n?wi(e,t,n):t&&typeof t!="function"?e:wi(e,t)};function lf(e,t){var n=t?e?e.concat(t):T(t)?t:[t]:e;return n&&cf(n)}function cf(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t}Ps.forEach(function(e){vt[e]=lf});function ff(e,t,n,r){var i=Object.create(e||null);return t?R(i,t):i}Sn.forEach(function(e){vt[e+"s"]=ff});vt.watch=function(e,t,n,r){if(e===Yn&&(e=void 0),t===Yn&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};R(i,e);for(var s in t){var o=i[s],a=t[s];o&&!T(o)&&(o=[o]),i[s]=o?o.concat(a):T(a)?a:[a]}return i};vt.props=vt.methods=vt.inject=vt.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return R(i,e),t&&R(i,t),i};vt.provide=function(e,t){return e?function(){var n=Object.create(null);return Ae(n,F(e)?e.call(this):e),t&&Ae(n,F(t)?t.call(this):t,!1),n}:t};var uf=function(e,t){return t===void 0?e:t};function df(e,t){var n=e.props;if(n){var r={},i,s,o;if(T(n))for(i=n.length;i--;)s=n[i],typeof s=="string"&&(o=Gt(s),r[o]={type:null});else if(ot(n))for(var a in n)s=n[a],o=Gt(a),r[o]=ot(s)?s:{type:s};e.props=r}}function pf(e,t){var n=e.inject;if(n){var r=e.inject={};if(T(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(ot(n))for(var s in n){var o=n[s];r[s]=ot(o)?R({from:s},o):{from:o}}}}function hf(e){var t=e.directives;if(t)for(var n in t){var r=t[n];F(r)&&(t[n]={bind:r,update:r})}}function Zt(e,t,n){if(F(t)&&(t=t.options),df(t),pf(t),hf(t),!t._base&&(t.extends&&(e=Zt(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Zt(e,t.mixins[r],n);var s={},o;for(o in e)a(o);for(o in t)Q(e,o)||a(o);function a(l){var c=vt[l]||uf;s[l]=c(e[l],t[l],n,l)}return s}function yn(e,t,n,r){if(typeof n=="string"){var i=e[t];if(Q(i,n))return i[n];var s=Gt(n);if(Q(i,s))return i[s];var o=Jl(s);if(Q(i,o))return i[o];var a=i[n]||i[s]||i[o];return a}}function Nr(e,t,n,r){var i=t[e],s=!Q(n,e),o=n[e],a=_i(Boolean,i.type);if(a>-1){if(s&&!Q(i,"default"))o=!1;else if(o===""||o===De(e)){var l=_i(String,i.type);(l<0||a<l)&&(o=!0)}}if(o===void 0){o=mf(r,i,e);var c=wr;It(!0),wt(o),It(c)}return o}function mf(e,t,n){if(Q(t,"default")){var r=t.default;return e&&e.$options.propsData&&e.$options.propsData[n]===void 0&&e._props[n]!==void 0?e._props[n]:F(r)&&ar(t.type)!=="Function"?r.call(e):r}}var vf=/^\s*function (\w+)/;function ar(e){var t=e&&e.toString().match(vf);return t?t[1]:""}function Ci(e,t){return ar(e)===ar(t)}function _i(e,t){if(!T(t))return Ci(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ci(t[n],e))return n;return-1}var $t={enumerable:!0,configurable:!0,get:q,set:q};function Pr(e,t,n){$t.get=function(){return this[t][n]},$t.set=function(i){this[t][n]=i},Object.defineProperty(e,n,$t)}function gf(e){var t=e.$options;if(t.props&&yf(e,t.props),Cc(e),t.methods&&_f(e,t.methods),t.data)bf(e);else{var n=wt(e._data={});n&&n.vmCount++}t.computed&&Cf(e,t.computed),t.watch&&t.watch!==Yn&&Sf(e,t.watch)}function yf(e,t){var n=e.$options.propsData||{},r=e._props=Hs({}),i=e.$options._propKeys=[],s=!e.$parent;s||It(!1);var o=function(l){i.push(l);var c=Nr(l,t,n,e);qt(r,l,c),l in e||Pr(e,"_props",l)};for(var a in t)o(a);It(!0)}function bf(e){var t=e.$options.data;t=e._data=F(t)?xf(t,e):t||{},ot(t)||(t={});var n=Object.keys(t),r=e.$options.props;e.$options.methods;for(var i=n.length;i--;){var s=n[i];r&&Q(r,s)||Ls(s)||Pr(e,"_data",s)}var o=wt(t);o&&o.vmCount++}function xf(e,t){de();try{return e.call(t,t)}catch(n){return Kt(n,t,"data()"),{}}finally{pe()}}var wf={lazy:!0};function Cf(e,t){var n=e._computedWatchers=Object.create(null),r=Re();for(var i in t){var s=t[i],o=F(s)?s:s.get;r||(n[i]=new Or(e,o||q,q,wf)),i in e||io(e,i,s)}}function io(e,t,n){var r=!Re();F(n)?($t.get=r?Si(t):ki(n),$t.set=q):($t.get=n.get?r&&n.cache!==!1?Si(t):ki(n.get):q,$t.set=n.set||q),Object.defineProperty(e,t,$t)}function Si(e){return function(){var n=this._computedWatchers&&this._computedWatchers[e];if(n)return n.dirty&&n.evaluate(),At.target&&n.depend(),n.value}}function ki(e){return function(){return e.call(this,this)}}function _f(e,t){e.$options.props;for(var n in t)e[n]=typeof t[n]!="function"?q:Ts(t[n],e)}function Sf(e,t){for(var n in t){var r=t[n];if(T(r))for(var i=0;i<r.length;i++)lr(e,n,r[i]);else lr(e,n,r)}}function lr(e,t,n,r){return ot(n)&&(r=n,n=n.handler),typeof n=="string"&&(n=e[n]),e.$watch(t,n,r)}function kf(e){var t={};t.get=function(){return this._data};var n={};n.get=function(){return this._props},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Cr,e.prototype.$delete=zs,e.prototype.$watch=function(r,i,s){var o=this;if(ot(i))return lr(o,r,i,s);s=s||{},s.user=!0;var a=new Or(o,r,i,s);if(s.immediate){var l='callback for immediate watcher "'.concat(a.expression,'"');de(),Nt(i,o,[a.value],o,l),pe()}return function(){a.teardown()}}}var $f=0;function Of(e){e.prototype._init=function(t){var n=this;n._uid=$f++,n._isVue=!0,n.__v_skip=!0,n._scope=new ic(!0),n._scope._vm=!0,t&&t._isComponent?Mf(n,t):n.$options=Zt(Lr(n.constructor),t||{},n),n._renderProxy=n,n._self=n,Hc(n),Rc(n),$c(n),ht(n,"beforeCreate",void 0,!1),tf(n),gf(n),Qc(n),ht(n,"created"),n.$options.el&&n.$mount(n.$options.el)}}function Mf(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Lr(e){var t=e.options;if(e.super){var n=Lr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=Ef(e);i&&R(e.extendOptions,i),t=e.options=Zt(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Ef(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function B(e){this._init(e)}Of(B);kf(B);jc(B);Jc(B);Oc(B);function Tf(e){e.use=function(t){var n=this._installedPlugins||(this._installedPlugins=[]);if(n.indexOf(t)>-1)return this;var r=Xn(arguments,1);return r.unshift(this),F(t.install)?t.install.apply(t,r):F(t)&&t.apply(null,r),n.push(t),this}}function Af(e){e.mixin=function(t){return this.options=Zt(this.options,t),this}}function If(e){e.cid=0;var t=1;e.extend=function(n){n=n||{};var r=this,i=r.cid,s=n._Ctor||(n._Ctor={});if(s[i])return s[i];var o=gn(n)||gn(r.options),a=function(c){this._init(c)};return a.prototype=Object.create(r.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Zt(r.options,n),a.super=r,a.options.props&&Nf(a),a.options.computed&&Pf(a),a.extend=r.extend,a.mixin=r.mixin,a.use=r.use,Sn.forEach(function(l){a[l]=r[l]}),o&&(a.options.components[o]=a),a.superOptions=r.options,a.extendOptions=n,a.sealedOptions=R({},a.options),s[i]=a,a}}function Nf(e){var t=e.options.props;for(var n in t)Pr(e.prototype,"_props",n)}function Pf(e){var t=e.options.computed;for(var n in t)io(e.prototype,n,t[n])}function Lf(e){Sn.forEach(function(t){e[t]=function(n,r){return r?(t==="component"&&ot(r)&&(r.name=r.name||n,r=this.options._base.extend(r)),t==="directive"&&F(r)&&(r={bind:r,update:r}),this.options[t+"s"][n]=r,r):this.options[t+"s"][n]}})}function $i(e){return e&&(gn(e.Ctor.options)||e.tag)}function qe(e,t){return T(e)?e.indexOf(t)>-1:typeof e=="string"?e.split(",").indexOf(t)>-1:Fl(e)?e.test(t):!1}function Oi(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var s in n){var o=n[s];if(o){var a=o.name;a&&!t(a)&&cr(n,s,r,i)}}}function cr(e,t,n,r){var i=e[t];i&&(!r||i.tag!==r.tag)&&i.componentInstance.$destroy(),e[t]=null,Lt(n,t)}var Mi=[String,RegExp,Array],Df={name:"keep-alive",abstract:!0,props:{include:Mi,exclude:Mi,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,r=e.vnodeToCache,i=e.keyToCache;if(r){var s=r.tag,o=r.componentInstance,a=r.componentOptions;t[i]={name:$i(a),tag:s,componentInstance:o},n.push(i),this.max&&n.length>parseInt(this.max)&&cr(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)cr(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",function(t){Oi(e,function(n){return qe(t,n)})}),this.$watch("exclude",function(t){Oi(e,function(n){return!qe(t,n)})})},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Zs(e),n=t&&t.componentOptions;if(n){var r=$i(n),i=this,s=i.include,o=i.exclude;if(s&&(!r||!qe(s,r))||o&&r&&qe(o,r))return t;var a=this,l=a.cache,c=a.keys,f=t.key==null?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;l[f]?(t.componentInstance=l[f].componentInstance,Lt(c,f),c.push(f)):(this.vnodeToCache=t,this.keyToCache=f),t.data.keepAlive=!0}return t||e&&e[0]}},Rf={KeepAlive:Df};function Ff(e){var t={};t.get=function(){return dt},Object.defineProperty(e,"config",t),e.util={warn:af,extend:R,mergeOptions:Zt,defineReactive:qt},e.set=Cr,e.delete=zs,e.nextTick=$r,e.observable=function(n){return wt(n),n},e.options=Object.create(null),Sn.forEach(function(n){e.options[n+"s"]=Object.create(null)}),e.options._base=e,R(e.options.components,Rf),Tf(e),Af(e),If(e),Lf(e)}Ff(B);Object.defineProperty(B.prototype,"$isServer",{get:Re});Object.defineProperty(B.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}});Object.defineProperty(B,"FunctionalRenderContext",{value:Ar});B.version=Lc;var Bf=mt("style,class"),zf=mt("input,textarea,option,select,progress"),jf=function(e,t,n){return n==="value"&&zf(e)&&t!=="button"||n==="selected"&&e==="option"||n==="checked"&&e==="input"||n==="muted"&&e==="video"},so=mt("contenteditable,draggable,spellcheck"),Hf=mt("events,caret,typing,plaintext-only"),Jf=function(e,t){return bn(t)||t==="false"?"false":e==="contenteditable"&&Hf(t)?t:"true"},Wf=mt("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),fr="http://www.w3.org/1999/xlink",Dr=function(e){return e.charAt(5)===":"&&e.slice(0,5)==="xlink"},oo=function(e){return Dr(e)?e.slice(6,e.length):""},bn=function(e){return e==null||e===!1};function Gf(e){for(var t=e.data,n=e,r=e;m(r.componentInstance);)r=r.componentInstance._vnode,r&&r.data&&(t=Ei(r.data,t));for(;m(n=n.parent);)n&&n.data&&(t=Ei(t,n.data));return Uf(t.staticClass,t.class)}function Ei(e,t){return{staticClass:Rr(e.staticClass,t.staticClass),class:m(e.class)?[e.class,t.class]:t.class}}function Uf(e,t){return m(e)||m(t)?Rr(e,Fr(t)):""}function Rr(e,t){return e?t?e+" "+t:e:t||""}function Fr(e){return Array.isArray(e)?qf(e):V(e)?Kf(e):typeof e=="string"?e:""}function qf(e){for(var t="",n,r=0,i=e.length;r<i;r++)m(n=Fr(e[r]))&&n!==""&&(t&&(t+=" "),t+=n);return t}function Kf(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var Zf={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Xf=mt("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Br=mt("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ao=function(e){return Xf(e)||Br(e)};function Yf(e){if(Br(e))return"svg";if(e==="math")return"math"}var Ke=Object.create(null);function Vf(e){if(!lt)return!0;if(ao(e))return!1;if(e=e.toLowerCase(),Ke[e]!=null)return Ke[e];var t=document.createElement(e);return e.indexOf("-")>-1?Ke[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Ke[e]=/HTMLUnknownElement/.test(t.toString())}var ur=mt("text,number,password,search,email,tel,url");function Qf(e){if(typeof e=="string"){var t=document.querySelector(e);return t||document.createElement("div")}else return e}function tu(e,t){var n=document.createElement(e);return e!=="select"||t.data&&t.data.attrs&&t.data.attrs.multiple!==void 0&&n.setAttribute("multiple","multiple"),n}function eu(e,t){return document.createElementNS(Zf[e],t)}function nu(e){return document.createTextNode(e)}function ru(e){return document.createComment(e)}function iu(e,t,n){e.insertBefore(t,n)}function su(e,t){e.removeChild(t)}function ou(e,t){e.appendChild(t)}function au(e){return e.parentNode}function lu(e){return e.nextSibling}function cu(e){return e.tagName}function fu(e,t){e.textContent=t}function uu(e,t){e.setAttribute(t,"")}var du=Object.freeze({__proto__:null,createElement:tu,createElementNS:eu,createTextNode:nu,createComment:ru,insertBefore:iu,removeChild:su,appendChild:ou,parentNode:au,nextSibling:lu,tagName:cu,setTextContent:fu,setStyleScope:uu}),pu={create:function(e,t){ie(t)},update:function(e,t){e.data.ref!==t.data.ref&&(ie(e,!0),ie(t))},destroy:function(e){ie(e,!0)}};function ie(e,t){var n=e.data.ref;if(m(n)){var r=e.context,i=e.componentInstance||e.elm,s=t?null:i,o=t?void 0:i;if(F(n)){Nt(n,r,[s],r,"template ref function");return}var a=e.data.refInFor,l=typeof n=="string"||typeof n=="number",c=yt(n),f=r.$refs;if(l||c){if(a){var u=l?f[n]:n.value;t?T(u)&&Lt(u,i):T(u)?u.includes(i)||u.push(i):l?(f[n]=[i],Ti(r,n,f[n])):n.value=[i]}else if(l){if(t&&f[n]!==i)return;f[n]=o,Ti(r,n,s)}else if(c){if(t&&n.value!==i)return;n.value=s}}}}function Ti(e,t,n){var r=e._setupState;r&&Q(r,t)&&(yt(r[t])?r[t].value=n:r[t]=n)}var Mt=new at("",{},[]),ve=["create","activate","update","remove","destroy"];function Rt(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&m(e.data)===m(t.data)&&hu(e,t)||j(e.isAsyncPlaceholder)&&k(t.asyncFactory.error))}function hu(e,t){if(e.tag!=="input")return!0;var n,r=m(n=e.data)&&m(n=n.attrs)&&n.type,i=m(n=t.data)&&m(n=n.attrs)&&n.type;return r===i||ur(r)&&ur(i)}function mu(e,t,n){var r,i,s={};for(r=t;r<=n;++r)i=e[r].key,m(i)&&(s[i]=r);return s}function vu(e){var t,n,r={},i=e.modules,s=e.nodeOps;for(t=0;t<ve.length;++t)for(r[ve[t]]=[],n=0;n<i.length;++n)m(i[n][ve[t]])&&r[ve[t]].push(i[n][ve[t]]);function o(h){return new at(s.tagName(h).toLowerCase(),{},[],void 0,h)}function a(h,p){function g(){--g.listeners===0&&l(h)}return g.listeners=p,g}function l(h){var p=s.parentNode(h);m(p)&&s.removeChild(p,h)}function c(h,p,g,x,S,A,$){if(m(h.elm)&&m(A)&&(h=A[$]=Vn(h)),h.isRootInsert=!S,!f(h,p,g,x)){var E=h.data,I=h.children,N=h.tag;m(N)?(h.elm=h.ns?s.createElementNS(h.ns,N):s.createElement(N,h),M(h),y(h,I,p),m(E)&&C(h,p),v(g,h.elm,x)):j(h.isComment)?(h.elm=s.createComment(h.text),v(g,h.elm,x)):(h.elm=s.createTextNode(h.text),v(g,h.elm,x))}}function f(h,p,g,x){var S=h.data;if(m(S)){var A=m(h.componentInstance)&&S.keepAlive;if(m(S=S.hook)&&m(S=S.init)&&S(h,!1),m(h.componentInstance))return u(h,p),v(g,h.elm,x),j(A)&&d(h,p,g,x),!0}}function u(h,p){m(h.data.pendingInsert)&&(p.push.apply(p,h.data.pendingInsert),h.data.pendingInsert=null),h.elm=h.componentInstance.$el,b(h)?(C(h,p),M(h)):(ie(h),p.push(h))}function d(h,p,g,x){for(var S,A=h;A.componentInstance;)if(A=A.componentInstance._vnode,m(S=A.data)&&m(S=S.transition)){for(S=0;S<r.activate.length;++S)r.activate[S](Mt,A);p.push(A);break}v(g,h.elm,x)}function v(h,p,g){m(h)&&(m(g)?s.parentNode(g)===h&&s.insertBefore(h,p,g):s.appendChild(h,p))}function y(h,p,g){if(T(p))for(var x=0;x<p.length;++x)c(p[x],g,h.elm,null,!0,p,x);else Le(h.text)&&s.appendChild(h.elm,s.createTextNode(String(h.text)))}function b(h){for(;h.componentInstance;)h=h.componentInstance._vnode;return m(h.tag)}function C(h,p){for(var g=0;g<r.create.length;++g)r.create[g](Mt,h);t=h.data.hook,m(t)&&(m(t.create)&&t.create(Mt,h),m(t.insert)&&p.push(h))}function M(h){var p;if(m(p=h.fnScopeId))s.setStyleScope(h.elm,p);else for(var g=h;g;)m(p=g.context)&&m(p=p.$options._scopeId)&&s.setStyleScope(h.elm,p),g=g.parent;m(p=Jt)&&p!==h.context&&p!==h.fnContext&&m(p=p.$options._scopeId)&&s.setStyleScope(h.elm,p)}function z(h,p,g,x,S,A){for(;x<=S;++x)c(g[x],A,h,p,!1,g,x)}function H(h){var p,g,x=h.data;if(m(x))for(m(p=x.hook)&&m(p=p.destroy)&&p(h),p=0;p<r.destroy.length;++p)r.destroy[p](h);if(m(p=h.children))for(g=0;g<h.children.length;++g)H(h.children[g])}function X(h,p,g){for(;p<=g;++p){var x=h[p];m(x)&&(m(x.tag)?(K(x),H(x)):l(x.elm))}}function K(h,p){if(m(p)||m(h.data)){var g,x=r.remove.length+1;for(m(p)?p.listeners+=x:p=a(h.elm,x),m(g=h.componentInstance)&&m(g=g._vnode)&&m(g.data)&&K(g,p),g=0;g<r.remove.length;++g)r.remove[g](h,p);m(g=h.data.hook)&&m(g=g.remove)?g(h,p):p()}else l(h.elm)}function Z(h,p,g,x,S){for(var A=0,$=0,E=p.length-1,I=p[0],N=p[E],P=g.length-1,G=g[0],ct=g[P],Dt,_t,St,Hr,kn=!S;A<=E&&$<=P;)k(I)?I=p[++A]:k(N)?N=p[--E]:Rt(I,G)?(tt(I,G,x,g,$),I=p[++A],G=g[++$]):Rt(N,ct)?(tt(N,ct,x,g,P),N=p[--E],ct=g[--P]):Rt(I,ct)?(tt(I,ct,x,g,P),kn&&s.insertBefore(h,I.elm,s.nextSibling(N.elm)),I=p[++A],ct=g[--P]):Rt(N,G)?(tt(N,G,x,g,$),kn&&s.insertBefore(h,N.elm,I.elm),N=p[--E],G=g[++$]):(k(Dt)&&(Dt=mu(p,A,E)),_t=m(G.key)?Dt[G.key]:W(G,p,A,E),k(_t)?c(G,x,h,I.elm,!1,g,$):(St=p[_t],Rt(St,G)?(tt(St,G,x,g,$),p[_t]=void 0,kn&&s.insertBefore(h,St.elm,I.elm)):c(G,x,h,I.elm,!1,g,$)),G=g[++$]);A>E?(Hr=k(g[P+1])?null:g[P+1].elm,z(h,Hr,g,$,P,x)):$>P&&X(p,A,E)}function W(h,p,g,x){for(var S=g;S<x;S++){var A=p[S];if(m(A)&&Rt(h,A))return S}}function tt(h,p,g,x,S,A){if(h!==p){m(p.elm)&&m(x)&&(p=x[S]=Vn(p));var $=p.elm=h.elm;if(j(h.isAsyncPlaceholder)){m(p.asyncFactory.resolved)?Vt(h.elm,p,g):p.isAsyncPlaceholder=!0;return}if(j(p.isStatic)&&j(h.isStatic)&&p.key===h.key&&(j(p.isCloned)||j(p.isOnce))){p.componentInstance=h.componentInstance;return}var E,I=p.data;m(I)&&m(E=I.hook)&&m(E=E.prepatch)&&E(h,p);var N=h.children,P=p.children;if(m(I)&&b(p)){for(E=0;E<r.update.length;++E)r.update[E](h,p);m(E=I.hook)&&m(E=E.update)&&E(h,p)}k(p.text)?m(N)&&m(P)?N!==P&&Z($,N,P,g,A):m(P)?(m(h.text)&&s.setTextContent($,""),z($,null,P,0,P.length-1,g)):m(N)?X(N,0,N.length-1):m(h.text)&&s.setTextContent($,""):h.text!==p.text&&s.setTextContent($,p.text),m(I)&&m(E=I.hook)&&m(E=E.postpatch)&&E(h,p)}}function he(h,p,g){if(j(g)&&m(h.parent))h.parent.data.pendingInsert=p;else for(var x=0;x<p.length;++x)p[x].data.hook.insert(p[x])}var Be=mt("attrs,class,staticClass,staticStyle,key");function Vt(h,p,g,x){var S,A=p.tag,$=p.data,E=p.children;if(x=x||$&&$.pre,p.elm=h,j(p.isComment)&&m(p.asyncFactory))return p.isAsyncPlaceholder=!0,!0;if(m($)&&(m(S=$.hook)&&m(S=S.init)&&S(p,!0),m(S=p.componentInstance)))return u(p,g),!0;if(m(A)){if(m(E))if(!h.hasChildNodes())y(p,E,g);else if(m(S=$)&&m(S=S.domProps)&&m(S=S.innerHTML)){if(S!==h.innerHTML)return!1}else{for(var I=!0,N=h.firstChild,P=0;P<E.length;P++){if(!N||!Vt(N,E[P],g,x)){I=!1;break}N=N.nextSibling}if(!I||N)return!1}if(m($)){var G=!1;for(var ct in $)if(!Be(ct)){G=!0,C(p,g);break}!G&&$.class&&mn($.class)}}else h.data!==p.text&&(h.data=p.text);return!0}return function(p,g,x,S){if(k(g)){m(p)&&H(p);return}var A=!1,$=[];if(k(p))A=!0,c(g,$);else{var E=m(p.nodeType);if(!E&&Rt(p,g))tt(p,g,$,null,null,S);else{if(E){if(p.nodeType===1&&p.hasAttribute(ii)&&(p.removeAttribute(ii),x=!0),j(x)&&Vt(p,g,$))return he(g,$,!0),p;p=o(p)}var I=p.elm,N=s.parentNode(I);if(c(g,$,I._leaveCb?null:N,s.nextSibling(I)),m(g.parent))for(var P=g.parent,G=b(g);P;){for(var ct=0;ct<r.destroy.length;++ct)r.destroy[ct](P);if(P.elm=g.elm,G){for(var Dt=0;Dt<r.create.length;++Dt)r.create[Dt](Mt,P);var _t=P.data.hook.insert;if(_t.merged)for(var St=1;St<_t.fns.length;St++)_t.fns[St]()}else ie(P);P=P.parent}m(N)?X([p],0,0):m(p.tag)&&H(p)}}return he(g,$,A),g.elm}}var gu={create:Rn,update:Rn,destroy:function(t){Rn(t,Mt)}};function Rn(e,t){(e.data.directives||t.data.directives)&&yu(e,t)}function yu(e,t){var n=e===Mt,r=t===Mt,i=Ai(e.data.directives,e.context),s=Ai(t.data.directives,t.context),o=[],a=[],l,c,f;for(l in s)c=i[l],f=s[l],c?(f.oldValue=c.value,f.oldArg=c.arg,ge(f,"update",t,e),f.def&&f.def.componentUpdated&&a.push(f)):(ge(f,"bind",t,e),f.def&&f.def.inserted&&o.push(f));if(o.length){var u=function(){for(var d=0;d<o.length;d++)ge(o[d],"inserted",t,e)};n?Ot(t,"insert",u):u()}if(a.length&&Ot(t,"postpatch",function(){for(var d=0;d<a.length;d++)ge(a[d],"componentUpdated",t,e)}),!n)for(l in i)s[l]||ge(i[l],"unbind",e,e,r)}var bu=Object.create(null);function Ai(e,t){var n=Object.create(null);if(!e)return n;var r,i;for(r=0;r<e.length;r++){if(i=e[r],i.modifiers||(i.modifiers=bu),n[xu(i)]=i,t._setupState&&t._setupState.__sfc){var s=i.def||yn(t,"_setupState","v-"+i.name);typeof s=="function"?i.def={bind:s,update:s}:i.def=s}i.def=i.def||yn(t.$options,"directives",i.name)}return n}function xu(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function ge(e,t,n,r,i){var s=e.def&&e.def[t];if(s)try{s(n.elm,e,n,r,i)}catch(o){Kt(o,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var wu=[pu,gu];function Ii(e,t){var n=t.componentOptions;if(!(m(n)&&n.Ctor.options.inheritAttrs===!1)&&!(k(e.data.attrs)&&k(t.data.attrs))){var r,i,s,o=t.elm,a=e.data.attrs||{},l=t.data.attrs||{};(m(l.__ob__)||j(l._v_attr_proxy))&&(l=t.data.attrs=R({},l));for(r in l)i=l[r],s=a[r],s!==i&&Ni(o,r,i,t.data.pre);(fe||Ds)&&l.value!==a.value&&Ni(o,"value",l.value);for(r in a)k(l[r])&&(Dr(r)?o.removeAttributeNS(fr,oo(r)):so(r)||o.removeAttribute(r))}}function Ni(e,t,n,r){r||e.tagName.indexOf("-")>-1?Pi(e,t,n):Wf(t)?bn(n)?e.removeAttribute(t):(n=t==="allowfullscreen"&&e.tagName==="EMBED"?"true":t,e.setAttribute(t,n)):so(t)?e.setAttribute(t,Jf(t,n)):Dr(t)?bn(n)?e.removeAttributeNS(fr,oo(t)):e.setAttributeNS(fr,t,n):Pi(e,t,n)}function Pi(e,t,n){if(bn(n))e.removeAttribute(t);else{if(fe&&!ue&&e.tagName==="TEXTAREA"&&t==="placeholder"&&n!==""&&!e.__ieph){var r=function(i){i.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Cu={create:Ii,update:Ii};function Li(e,t){var n=t.elm,r=t.data,i=e.data;if(!(k(r.staticClass)&&k(r.class)&&(k(i)||k(i.staticClass)&&k(i.class)))){var s=Gf(t),o=n._transitionClasses;m(o)&&(s=Rr(s,Fr(o))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var _u={create:Li,update:Li},Fn="__r",Bn="__c";function Su(e){if(m(e[Fn])){var t=fe?"change":"input";e[t]=[].concat(e[Fn],e[t]||[]),delete e[Fn]}m(e[Bn])&&(e.change=[].concat(e[Bn],e.change||[]),delete e[Bn])}var Ie;function ku(e,t,n){var r=Ie;return function i(){var s=t.apply(null,arguments);s!==null&&lo(e,i,n,r)}}var $u=nr&&!(si&&Number(si[1])<=53);function Ou(e,t,n,r){if($u){var i=no,s=t;t=s._wrapper=function(o){if(o.target===o.currentTarget||o.timeStamp>=i||o.timeStamp<=0||o.target.ownerDocument!==document)return s.apply(this,arguments)}}Ie.addEventListener(e,t,Rs?{capture:n,passive:r}:n)}function lo(e,t,n,r){(r||Ie).removeEventListener(e,t._wrapper||t,n)}function zn(e,t){if(!(k(e.data.on)&&k(t.data.on))){var n=t.data.on||{},r=e.data.on||{};Ie=t.elm||e.elm,Su(n),Js(n,r,Ou,lo,ku,t.context),Ie=void 0}}var Mu={create:zn,update:zn,destroy:function(e){return zn(e,Mt)}},Ze;function Di(e,t){if(!(k(e.data.domProps)&&k(t.data.domProps))){var n,r,i=t.elm,s=e.data.domProps||{},o=t.data.domProps||{};(m(o.__ob__)||j(o._v_attr_proxy))&&(o=t.data.domProps=R({},o));for(n in s)n in o||(i[n]="");for(n in o){if(r=o[n],n==="textContent"||n==="innerHTML"){if(t.children&&(t.children.length=0),r===s[n])continue;i.childNodes.length===1&&i.removeChild(i.childNodes[0])}if(n==="value"&&i.tagName!=="PROGRESS"){i._value=r;var a=k(r)?"":String(r);Eu(i,a)&&(i.value=a)}else if(n==="innerHTML"&&Br(i.tagName)&&k(i.innerHTML)){Ze=Ze||document.createElement("div"),Ze.innerHTML="<svg>".concat(r,"</svg>");for(var l=Ze.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}else if(r!==s[n])try{i[n]=r}catch{}}}}function Eu(e,t){return!e.composing&&(e.tagName==="OPTION"||Tu(e,t)||Au(e,t))}function Tu(e,t){var n=!0;try{n=document.activeElement!==e}catch{}return n&&e.value!==t}function Au(e,t){var n=e.value,r=e._vModifiers;if(m(r)){if(r.number)return Oe(n)!==Oe(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var Iu={create:Di,update:Di},Nu=Yt(function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach(function(i){if(i){var s=i.split(r);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t});function jn(e){var t=co(e.style);return e.staticStyle?R(e.staticStyle,t):t}function co(e){return Array.isArray(e)?As(e):typeof e=="string"?Nu(e):e}function Pu(e,t){var n={},r;if(t)for(var i=e;i.componentInstance;)i=i.componentInstance._vnode,i&&i.data&&(r=jn(i.data))&&R(n,r);(r=jn(e.data))&&R(n,r);for(var s=e;s=s.parent;)s.data&&(r=jn(s.data))&&R(n,r);return n}var Lu=/^--/,Ri=/\s*!important$/,Fi=function(e,t,n){if(Lu.test(t))e.style.setProperty(t,n);else if(Ri.test(n))e.style.setProperty(De(t),n.replace(Ri,""),"important");else{var r=Du(t);if(Array.isArray(n))for(var i=0,s=n.length;i<s;i++)e.style[r]=n[i];else e.style[r]=n}},Bi=["Webkit","Moz","ms"],Xe,Du=Yt(function(e){if(Xe=Xe||document.createElement("div").style,e=Gt(e),e!=="filter"&&e in Xe)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Bi.length;n++){var r=Bi[n]+t;if(r in Xe)return r}});function zi(e,t){var n=t.data,r=e.data;if(!(k(n.staticStyle)&&k(n.style)&&k(r.staticStyle)&&k(r.style))){var i,s,o=t.elm,a=r.staticStyle,l=r.normalizedStyle||r.style||{},c=a||l,f=co(t.data.style)||{};t.data.normalizedStyle=m(f.__ob__)?R({},f):f;var u=Pu(t,!0);for(s in c)k(u[s])&&Fi(o,s,"");for(s in u)i=u[s],i!==c[s]&&Fi(o,s,i??"")}}var Ru={create:zi,update:zi},fo=/\s+/;function uo(e,t){if(!(!t||!(t=t.trim())))if(e.classList)t.indexOf(" ")>-1?t.split(fo).forEach(function(r){return e.classList.add(r)}):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function po(e,t){if(!(!t||!(t=t.trim())))if(e.classList)t.indexOf(" ")>-1?t.split(fo).forEach(function(i){return e.classList.remove(i)}):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" ".concat(e.getAttribute("class")||""," "),r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function ho(e){if(e){if(typeof e=="object"){var t={};return e.css!==!1&&R(t,ji(e.name||"v")),R(t,e),t}else if(typeof e=="string")return ji(e)}}var ji=Yt(function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}}),mo=lt&&!ue,ee="transition",Hn="animation",rn="transition",xn="transitionend",dr="animation",vo="animationend";mo&&(window.ontransitionend===void 0&&window.onwebkittransitionend!==void 0&&(rn="WebkitTransition",xn="webkitTransitionEnd"),window.onanimationend===void 0&&window.onwebkitanimationend!==void 0&&(dr="WebkitAnimation",vo="webkitAnimationEnd"));var Hi=lt?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function go(e){Hi(function(){Hi(e)})}function Wt(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),uo(e,t))}function xt(e,t){e._transitionClasses&&Lt(e._transitionClasses,t),po(e,t)}function yo(e,t,n){var r=bo(e,t),i=r.type,s=r.timeout,o=r.propCount;if(!i)return n();var a=i===ee?xn:vo,l=0,c=function(){e.removeEventListener(a,f),n()},f=function(u){u.target===e&&++l>=o&&c()};setTimeout(function(){l<o&&c()},s+1),e.addEventListener(a,f)}var Fu=/\b(transform|all)(,|$)/;function bo(e,t){var n=window.getComputedStyle(e),r=(n[rn+"Delay"]||"").split(", "),i=(n[rn+"Duration"]||"").split(", "),s=Ji(r,i),o=(n[dr+"Delay"]||"").split(", "),a=(n[dr+"Duration"]||"").split(", "),l=Ji(o,a),c,f=0,u=0;t===ee?s>0&&(c=ee,f=s,u=i.length):t===Hn?l>0&&(c=Hn,f=l,u=a.length):(f=Math.max(s,l),c=f>0?s>l?ee:Hn:null,u=c?c===ee?i.length:a.length:0);var d=c===ee&&Fu.test(n[rn+"Property"]);return{type:c,timeout:f,propCount:u,hasTransform:d}}function Ji(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(n,r){return Wi(n)+Wi(e[r])}))}function Wi(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function pr(e,t){var n=e.elm;m(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=ho(e.data.transition);if(!k(r)&&!(m(n._enterCb)||n.nodeType!==1)){for(var i=r.css,s=r.type,o=r.enterClass,a=r.enterToClass,l=r.enterActiveClass,c=r.appearClass,f=r.appearToClass,u=r.appearActiveClass,d=r.beforeEnter,v=r.enter,y=r.afterEnter,b=r.enterCancelled,C=r.beforeAppear,M=r.appear,z=r.afterAppear,H=r.appearCancelled,X=r.duration,K=Jt,Z=Jt.$vnode;Z&&Z.parent;)K=Z.context,Z=Z.parent;var W=!K._isMounted||!e.isRootInsert;if(!(W&&!M&&M!=="")){var tt=W&&c?c:o,he=W&&u?u:l,Be=W&&f?f:a,Vt=W&&C||d,h=W&&F(M)?M:v,p=W&&z||y,g=W&&H||b,x=Oe(V(X)?X.enter:X),S=i!==!1&&!ue,A=zr(h),$=n._enterCb=fn(function(){S&&(xt(n,Be),xt(n,he)),$.cancelled?(S&&xt(n,tt),g&&g(n)):p&&p(n),n._enterCb=null});e.data.show||Ot(e,"insert",function(){var E=n.parentNode,I=E&&E._pending&&E._pending[e.key];I&&I.tag===e.tag&&I.elm._leaveCb&&I.elm._leaveCb(),h&&h(n,$)}),Vt&&Vt(n),S&&(Wt(n,tt),Wt(n,he),go(function(){xt(n,tt),$.cancelled||(Wt(n,Be),A||(wo(x)?setTimeout($,x):yo(n,s,$)))})),e.data.show&&(t&&t(),h&&h(n,$)),!S&&!A&&$()}}}function xo(e,t){var n=e.elm;m(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=ho(e.data.transition);if(k(r)||n.nodeType!==1)return t();if(m(n._leaveCb))return;var i=r.css,s=r.type,o=r.leaveClass,a=r.leaveToClass,l=r.leaveActiveClass,c=r.beforeLeave,f=r.leave,u=r.afterLeave,d=r.leaveCancelled,v=r.delayLeave,y=r.duration,b=i!==!1&&!ue,C=zr(f),M=Oe(V(y)?y.leave:y),z=n._leaveCb=fn(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(xt(n,a),xt(n,l)),z.cancelled?(b&&xt(n,o),d&&d(n)):(t(),u&&u(n)),n._leaveCb=null});v?v(H):H();function H(){z.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),c&&c(n),b&&(Wt(n,o),Wt(n,l),go(function(){xt(n,o),z.cancelled||(Wt(n,a),C||(wo(M)?setTimeout(z,M):yo(n,s,z)))})),f&&f(n,z),!b&&!C&&z())}}function wo(e){return typeof e=="number"&&!isNaN(e)}function zr(e){if(k(e))return!1;var t=e.fns;return m(t)?zr(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Gi(e,t){t.data.show!==!0&&pr(t)}var Bu=lt?{create:Gi,activate:Gi,remove:function(e,t){e.data.show!==!0?xo(e,t):t()}}:{},zu=[Cu,_u,Mu,Iu,Ru,Bu],ju=zu.concat(wu),Hu=vu({nodeOps:du,modules:ju});ue&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&jr(e,"input")});var Co={inserted:function(e,t,n,r){n.tag==="select"?(r.elm&&!r.elm._vOptions?Ot(n,"postpatch",function(){Co.componentUpdated(e,t,n)}):Ui(e,t,n.context),e._vOptions=[].map.call(e.options,wn)):(n.tag==="textarea"||ur(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Ju),e.addEventListener("compositionend",Zi),e.addEventListener("change",Zi),ue&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if(n.tag==="select"){Ui(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,wn);if(i.some(function(o,a){return!Ut(o,r[a])})){var s=e.multiple?t.value.some(function(o){return Ki(o,i)}):t.value!==t.oldValue&&Ki(t.value,i);s&&jr(e,"change")}}}};function Ui(e,t,n){qi(e,t),(fe||Ds)&&setTimeout(function(){qi(e,t)},0)}function qi(e,t,n){var r=t.value,i=e.multiple;if(!(i&&!Array.isArray(r))){for(var s,o,a=0,l=e.options.length;a<l;a++)if(o=e.options[a],i)s=Ns(r,wn(o))>-1,o.selected!==s&&(o.selected=s);else if(Ut(wn(o),r)){e.selectedIndex!==a&&(e.selectedIndex=a);return}i||(e.selectedIndex=-1)}}function Ki(e,t){return t.every(function(n){return!Ut(n,e)})}function wn(e){return"_value"in e?e._value:e.value}function Ju(e){e.target.composing=!0}function Zi(e){e.target.composing&&(e.target.composing=!1,jr(e.target,"input"))}function jr(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function hr(e){return e.componentInstance&&(!e.data||!e.data.transition)?hr(e.componentInstance._vnode):e}var Wu={bind:function(e,t,n){var r=t.value;n=hr(n);var i=n.data&&n.data.transition,s=e.__vOriginalDisplay=e.style.display==="none"?"":e.style.display;r&&i?(n.data.show=!0,pr(n,function(){e.style.display=s})):e.style.display=r?s:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!=!i){n=hr(n);var s=n.data&&n.data.transition;s?(n.data.show=!0,r?pr(n,function(){e.style.display=e.__vOriginalDisplay}):xo(n,function(){e.style.display="none"})):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},Gu={model:Co,show:Wu},_o={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function mr(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?mr(Zs(t.children)):e}function So(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var r in i)t[Gt(r)]=i[r];return t}function Xi(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Uu(e){for(;e=e.parent;)if(e.data.transition)return!0}function qu(e,t){return t.key===e.key&&t.tag===e.tag}var Ku=function(e){return e.tag||Ee(e)},Zu=function(e){return e.name==="show"},Xu={name:"transition",props:_o,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Ku),!!n.length)){var r=this.mode,i=n[0];if(Uu(this.$vnode))return i;var s=mr(i);if(!s)return i;if(this._leaving)return Xi(e,i);var o="__transition-".concat(this._uid,"-");s.key=s.key==null?s.isComment?o+"comment":o+s.tag:Le(s.key)?String(s.key).indexOf(o)===0?s.key:o+s.key:s.key;var a=(s.data||(s.data={})).transition=So(this),l=this._vnode,c=mr(l);if(s.data.directives&&s.data.directives.some(Zu)&&(s.data.show=!0),c&&c.data&&!qu(s,c)&&!Ee(c)&&!(c.componentInstance&&c.componentInstance._vnode.isComment)){var f=c.data.transition=R({},a);if(r==="out-in")return this._leaving=!0,Ot(f,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()}),Xi(e,i);if(r==="in-out"){if(Ee(s))return l;var u,d=function(){u()};Ot(a,"afterEnter",d),Ot(a,"enterCancelled",d),Ot(f,"delayLeave",function(v){u=v})}}return i}}},ko=R({tag:String,moveClass:String},_o);delete ko.mode;var Yu={props:ko,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Qs(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],s=this.children=[],o=So(this),a=0;a<i.length;a++){var l=i[a];l.tag&&l.key!=null&&String(l.key).indexOf("__vlist")!==0&&(s.push(l),n[l.key]=l,(l.data||(l.data={})).transition=o)}if(r){for(var c=[],f=[],a=0;a<r.length;a++){var l=r[a];l.data.transition=o,l.data.pos=l.elm.getBoundingClientRect(),n[l.key]?c.push(l):f.push(l)}this.kept=e(t,null,c),this.removed=f}return e(t,null,s)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";!e.length||!this.hasMove(e[0].elm,t)||(e.forEach(Vu),e.forEach(Qu),e.forEach(td),this._reflow=document.body.offsetHeight,e.forEach(function(n){if(n.data.moved){var r=n.elm,i=r.style;Wt(r,t),i.transform=i.WebkitTransform=i.transitionDuration="",r.addEventListener(xn,r._moveCb=function s(o){o&&o.target!==r||(!o||/transform$/.test(o.propertyName))&&(r.removeEventListener(xn,s),r._moveCb=null,xt(r,t))})}}))},methods:{hasMove:function(e,t){if(!mo)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(i){po(n,i)}),uo(n,t),n.style.display="none",this.$el.appendChild(n);var r=bo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function Vu(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Qu(e){e.data.newPos=e.elm.getBoundingClientRect()}function td(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),s.transitionDuration="0s"}}var ed={Transition:Xu,TransitionGroup:Yu};B.config.mustUseProp=jf;B.config.isReservedTag=ao;B.config.isReservedAttr=Bf;B.config.getTagNamespace=Yf;B.config.isUnknownElement=Vf;R(B.options.directives,Gu);R(B.options.components,ed);B.prototype.__patch__=lt?Hu:q;B.prototype.$mount=function(e,t){return e=e&&lt?Qf(e):void 0,Wc(this,e,t)};lt&&setTimeout(function(){dt.devtools&&un&&un.emit("init",B)},0);const nd={props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(e){return e(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},attrs:{"data-node-view-wrapper":""},on:{dragstart:this.onDragStart}},this.$slots.default)}};class rd{constructor(t,n){const r=typeof t=="function"?t:B.extend(t);this.ref=new r(n).$mount()}get element(){return this.ref.$el}updateProps(t={}){var n,r,i;if(!this.ref.$props)return;const s=(i=(r=(n=this.ref.$props.editor)===null||n===void 0?void 0:n.contentComponent)===null||r===void 0?void 0:r.$options._base)!==null&&i!==void 0?i:B,o=s.config.silent;s.config.silent=!0,Object.entries(t).forEach(([a,l])=>{this.ref.$props[a]=l}),s.config.silent=o}destroy(){this.ref.$destroy()}}class id extends Dl{mount(){var t,n;const r={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(a={})=>this.updateAttributes(a),deleteNode:()=>this.deleteNode()},i=this.onDragStart.bind(this);this.decorationClasses=B.observable({value:this.getDecorationClasses()});const o=((n=(t=this.editor.contentComponent)===null||t===void 0?void 0:t.$options._base)!==null&&n!==void 0?n:B).extend(this.component).extend({props:Object.keys(r),provide:()=>({onDragStart:i,decorationClasses:this.decorationClasses})});this.renderer=new rd(o,{parent:this.editor.contentComponent,propsData:r})}get dom(){if(!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")||this.dom}update(t,n){const r=i=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(i)};if(typeof this.options.update=="function"){const i=this.node,s=this.decorations;return this.node=t,this.decorations=n,this.options.update({oldNode:i,oldDecorations:s,newNode:t,newDecorations:n,updateProps:()=>r({node:t,decorations:n})})}return t.type!==this.node.type?!1:(t===this.node&&this.decorations===n||(this.node=t,this.decorations=n,r({node:t,decorations:n})),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}getDecorationClasses(){return this.decorations.map(t=>t.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy()}}function sd(e,t){return n=>n.editor.contentComponent?new id(e,n,t):{}}function Ct(e,t,n,r,i,s,o,a){var l=typeof e=="function"?e.options:e;t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),s&&(l._scopeId="data-v-"+s);var c;if(o?(c=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),i&&i.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var f=l.render;l.render=function(v,y){return c.call(y),f(v,y)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}const od={components:{NodeViewWrapper:nd},props:["editor","node","decorations","selected","extension","getPos","updateAttributes","deleteNode"],computed:{display(){return console.log(this.values),this.values.type},values(){return this.node},bard(){return this.extension.options.bard},config(){return _.findWhere(this.spotConfigs,{handle:this.values.type})||{}},groupConfigs(){return console.log(this.bard,this.bard.config),this.bard.config.bts_spots},spotConfigs(){return _.reduce(this.groupConfigs,(e,t)=>e.concat(t.sets),[])}}};var ad=function(){var t=this,n=t._self._c;return n("node-view-wrapper",{staticClass:"bts-spot shadow-md"},[t._v(" "+t._s(t.display)+" "),n("div",{attrs:{"data-drag-handle":""}},[t._v("↔️")])])},ld=[],cd=Ct(od,ad,ld,!1,null,null,null,null);const fd=cd.exports,{Node:ud}=Statamic.$bard.tiptap.core,dd=ud.create({name:"btsSpot",group:"inline",inline:!0,selectable:!0,draggable:!0,defining:!1,addOptions(){return{bard:{}}},addNodeView(){return sd(fd)},parseHTML(){return[{tag:"bts-spot"}]},renderHTML({HTMLAttributes:e}){return["bts-spot",e]},addCommands(){return{btsInsertSpot:()=>({commands:e})=>e.insertContent(this.type.create())}}}),{Extension:pd}=Statamic.$bard.tiptap.core,hd=pd.create({name:"btsCore",addOptions(){return{bard:{},attr:null,stylesExts:[]}},addGlobalAttributes(){const{attr:e,stylesExts:t}=this.options;return[{types:t,attributes:{[e]:{parseHTML:n=>n.getAttribute("data-bts-style"),renderHTML:n=>({["data-bts-style"]:n[e]})}}}]},addCommands(){return{btsToggleHeading:e=>({commands:t})=>t.toggleNode("heading","paragraph",e),btsToggleParagraph:e=>({commands:t})=>t.toggleNode("paragraph","paragraph",e),btsToggleLink:e=>({commands:t,editor:n})=>n.isActive("link",e)?t.resetAttributes("link","class"):t.updateAttributes("link",e),btsToggleList:(e,t)=>({commands:n,editor:r,chain:i})=>r.isActive(t,e)?n.toggleList(t,"listItem"):r.isActive(t)?n.updateAttributes(t,e):i().toggleList(t,"listItem").updateAttributes(t,e).run(),btsToggleBulletList:e=>({commands:t})=>t.btsToggleList(e,"bulletList"),btsToggleOrderedList:e=>({commands:t})=>t.btsToggleList(e,"orderedList")}},onUpdate(){this.options.bard.$emit("bts-update")},onSelectionUpdate(){this.options.bard.$emit("bts-update")}}),{Extension:md}=Statamic.$bard.tiptap.core,vd=md.create({name:"btsOverrides",addOptions(){return{bard:{},stylesExts:[],stylesMenuOptions:{}}},onCreate(){const{bard:e,stylesExts:t,stylesMenuOptions:n}=this.options,r=[...t.includes("heading")?["h1","h2","h3","h4","h5","h6"]:[],...t.includes("bulletList")?["unorderedlist"]:[],...t.includes("orderedList")?["orderedlist"]:[]];if(e.buttons.forEach(i=>{r.includes(i.name)&&(i.args={...i.args||{},class:null}),i.name==="unorderedlist"&&t.includes("bulletList")&&(i.command=(s,o)=>s.chain().focus().btsToggleBulletList(o).run()),i.name==="orderedlist"&&t.includes("orderedList")&&(i.command=(s,o)=>s.chain().focus().btsToggleOrderedList(o).run())}),e.buttons.find(i=>i.name==="bts_styles")){const i=(e.config.bts_styles||[]).filter(s=>Object.keys(n).includes(s));e.buttons.forEach(s=>{i.includes(s.name)&&(s.visible=()=>!1)})}}}),{Plugin:gd,PluginKey:yd}=Statamic.$bard.tiptap.pm.state,{Decoration:bd,DecorationSet:xd}=Statamic.$bard.tiptap.pm.view,{Extension:wd}=Statamic.$bard.tiptap.core,Cd=wd.create({name:"btsDefaults",addOptions(){return{bard:{},store:null,defaultsCpExts:{}}},addProseMirrorPlugins(){const{bard:e,defaultsCpExts:t}=this.options,n=e.config.bts_defaults||"standard",r=t[n];return r===void 0||!r.length?[]:[new gd({key:new yd("btsDefaults"),props:{attributes:{"data-bts-defaults":n},decorations(i){const s=[];return i.doc.descendants((o,a)=>{o.type.name==="btsDiv"&&s.push(bd.node(a,a+o.nodeSize,{"data-bts-defaults":n}))}),xd.create(i.doc,s)}}})]}}),Ye=e=>e.replaceAll("_","-").replaceAll(/(.)(?=[A-Z])/g,"$1-").toLowerCase(),{Extension:_d,getNodeAttributes:vp}=Statamic.$bard.tiptap.core,Sd=_d.create({name:"btsAttributes",addOptions(){return{attributesExts:{},attributes:{}}},addGlobalAttributes(){const{attributes:e}=this.options,t={true:(r,i)=>({rendered:!0}),false:(r,i)=>({rendered:!1}),class:(r,i)=>({parseHTML:s=>s.getAttribute(`data-bts-attribute-${Ye(r)}`),renderHTML:s=>({[`data-bts-attribute-${Ye(r)}`]:s[r]})}),style:(r,i)=>({parseHTML:s=>s.style[Ye(r)],renderHTML:s=>s[r]!==void 0&&s[r]!==null?{style:`${Ye(r)}: ${s[r]}`}:null})},n=Object.entries(e).reduce((r,[i,s])=>{const o=s.ext;return r[o]={...r[o]||{},...s.attrs},r},{});return Object.entries(n).map(([r,i])=>({types:[r],attributes:Object.fromEntries(Object.entries(i).filter(([s,o])=>o.extra).map(([s,o])=>[s,{default:typeof o.default<"u"?o.default:null,...typeof o.rendered<"u"?t[o.rendered.toString()](s,o):t.true()}]))}))},addCommands(){const{attributesExts:e}=this.options;return{btsAttributesFetch:()=>({state:t})=>{const{from:n,to:r}=t.selection,i=[];return t.doc.nodesBetween(n,n+1,s=>{e.includes(s.type.name)?i.push({kind:"node",type:s.type.name,attrs:{...s.attrs}}):s.type.name==="text"&&s.marks.forEach(o=>{e.includes(o.type.name)&&i.push({kind:"mark",type:o.type.name,attrs:{...o.attrs}})})}),{info:{from:n,to:r},items:i.reverse()}},btsAttributesApply:({info:t,items:n})=>({state:r,chain:i})=>{const{from:s,to:o}=r.selection;if(s!==t.from||o!==t.to)return;let a=i().focus();return n.forEach(l=>{l.kind==="mark"&&(a=a.extendMarkRange(l.type)),a=a.updateAttributes(l.type,l.attrs)}),a.setTextSelection({from:s,to:o}).run()}}}}),kd={props:{item:Object,config:{},bard:{},editor:{},btsOptions:{}},computed:{active(){if(this.item.hasOwnProperty("active"))return this.item.active(this.editor,this.item.args);const e=this.item.hasOwnProperty("activeName")?"activeName":"name",t=this.item[e];return this.editor.isActive(t,this.item.args)},visible(){return this.item.hasOwnProperty("btsMenuVisible")?this.item.btsMenuVisible(this.editor,this.item.args):!0},previewType(){var e;return((e=this.item.btsStyle)==null?void 0:e.type)||Object.values(this.btsOptions.types).find(t=>t.button===this.item.name).name},previewStyle(){var e;return(e=this.item.btsStyle)==null?void 0:e[this.btsOptions.store]}},methods:{click(){this.item.command(this.editor,this.item.args),this.$emit("picked")}}};var $d=function(){var t=this,n=t._self._c;return t.visible?n("button",{staticClass:"bts-styles-item",class:{active:t.active},on:{click:t.click}},[n(t.previewType==="ordered_list"?"ol":"div",{tag:"component"},[n("div",{staticClass:"bts-preview",attrs:{"data-bts-type":t.previewType,"data-bts-style":t.previewStyle}},[t._v(" "+t._s(t.item.text)+" ")])])],1):t._e()},Od=[],Md=Ct(kd,$d,Od,!1,null,null,null,null);const Ed=Md.exports,Td={components:{StylesItem:Ed},props:{config:{},bard:{},editor:{},btsOptions:{},items:[]},created(){this.bard.$on("bts-update",this.close)},beforeDestroy(){this.bard.$off("bts-update",this.close)},methods:{close(){this.$emit("close")}},computed:{previewDefaults(){return this.bard.config.bts_defaults||"standard"}}};var Ad=function(){var t=this,n=t._self._c;return n("div",{staticClass:"bts-styles",attrs:{"data-bts-defaults":t.previewDefaults}},[t.items.length?n("div",{staticClass:"bts-styles-items"},t._l(t.items,function(r){return n("StylesItem",{key:r.name,attrs:{item:r,config:t.config,bard:t.bard,editor:t.editor,btsOptions:t.btsOptions},on:{picked:function(i){return t.$emit("picked")}}})}),1):n("div",{staticClass:"p-8 w-40 text-center text-gray-400"},[n("svg",{staticClass:"w-12 h-12",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{staticStyle:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},attrs:{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",stroke:"currentColor"}})])])])},Id=[],Nd=Ct(Td,Ad,Id,!1,null,null,null,null);const Pd=Nd.exports,Ld={mixins:[BardToolbarButton],components:{StylesMenu:Pd},data(){return{panelActive:!1,activeItem:null}},created(){this.type==="text"&&(this.updateActiveItem(),this.bard.$on("bts-update",this.updateActiveItem))},beforeDestroy(){this.type==="text"&&this.bard.$off("bts-update",this.updateActiveItem)},computed:{items(){const e=this.bard.buttons,t=(this.config.bts_styles||[]).filter(n=>Object.keys(this.button.btsOptions.stylesMenuOptions).includes(n));return e.filter(n=>typeof n=="object"&&t.includes(n.name))},type(){return this.config.bts_styles_button}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&(this.togglePanel(),this.$refs.popover.close())},updateActiveItem(){this.activeItem=this.items.find(e=>{if(e.hasOwnProperty("active"))return e.active(this.editor,e.args);const t=e.hasOwnProperty("activeName")?"activeName":"name",n=e[t];return this.editor.isActive(n,e.args)})}}};var Dd=function(){var t=this,n=t._self._c;return n("popover",{ref:"popover",attrs:{placement:"bottom-start",clickaway:!0},on:{closed:t.closePanel},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.type==="icon"?t.button.text:void 0,expression:"type === 'icon' ? button.text : undefined"}],staticClass:"bard-toolbar-button",class:{"bts-styles-button-icon":t.type==="icon","bts-styles-button-text":t.type==="text"},attrs:{"aria-label":t.button.text},on:{click:t.togglePanel}},[t.type==="icon"?n("div",{staticClass:"flex items-center",domProps:{innerHTML:t._s(t.button.html)}}):t._e(),t.type==="text"?n("span",[t._v(t._s(t.activeItem?t.activeItem.text:t.button.text))]):t._e()])]},proxy:!0},{key:"default",fn:function(){return[t.panelActive?n("StylesMenu",{attrs:{config:t.config,bard:t.bard,editor:t.editor,btsOptions:t.button.btsOptions,items:t.items},on:{close:t.closePanel,picked:t.closePanel}}):t._e()]},proxy:!0}])})},Rd=[],Fd=Ct(Ld,Dd,Rd,!1,null,null,null,null);const Bd=Fd.exports,zd={props:{value:null}};var jd=function(){var t=this,n=t._self._c;return n("input",{attrs:{type:"text"},domProps:{value:t.value},on:{input:function(r){return t.$emit("input",r.target.value!==""?r.target.value:null)}}})},Hd=[],Jd=Ct(zd,jd,Hd,!1,null,null,null,null);const Wd=Jd.exports,Gd={components:{TextInput:Wd},props:{config:{},bard:{},editor:{},btsOptions:{}},data(){const{info:e,items:t}=this.editor.commands.btsAttributesFetch();return{activeItem:0,info:e,items:t}},created(){this.bard.$on("bts-update",this.close)},beforeDestroy(){this.bard.$off("bts-update",this.close)},methods:{display(e){return this.btsOptions.types.getByItem(e).display},attrs(e){return this.btsOptions.attributes[this.btsOptions.types.getByItem(e).name].attrs},apply(){this.editor.commands.btsAttributesApply({info:this.info,items:this.items}),this.$emit("applied")},close(){this.$emit("close")},trueValue(e){var t;return((t=e.values)==null?void 0:t.true)!==void 0?e.values.true:!0},falseValue(e){var t;return((t=e.values)==null?void 0:t.false)!==void 0?e.values.false:e.rendered?null:!1}}};var Ud=function(){var t=this,n=t._self._c;return n("div",{staticClass:"bts-attributes"},[t.items.length?n("div",[t._l(t.items,function(r,i){return n("div",[n("div",{staticClass:"px-4 py-3 title-case border-b flex items-center cursor-pointer",class:{"text-gray-700":t.activeItem!==i},on:{click:function(s){t.activeItem=i}}},[n("svg",{staticClass:"w-4 h-4 bts-attributes-arrow text-gray-700",class:{"rotate-90":t.activeItem===i},attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}})]),t._v(" "+t._s(t.__(t.display(r)))+" ")]),t.activeItem===i?n("div",{staticClass:"p-4 pt-1 border-b"},t._l(t.attrs(r),function(s,o){return n("div",{staticClass:"mt-3"},[s.field==="select"?n("label",{staticClass:"font-normal"},[n("div",{staticClass:"text-sm leading-none"},[t._v(t._s(s.display||o))]),n("select",{directives:[{name:"model",rawName:"v-model",value:r.attrs[o],expression:"item.attrs[name]"}],staticClass:"mt-2 h-8 px-1 border rounded shadow-inner bg-gray-100 text-gray-800 w-full text-sm bts-border-gray-450",on:{change:function(a){var l=Array.prototype.filter.call(a.target.options,function(c){return c.selected}).map(function(c){var f="_value"in c?c._value:c.value;return f});t.$set(r.attrs,o,a.target.multiple?l:l[0])}}},[s.clearable?n("option",{domProps:{value:null}}):t._e(),t._l(s.options,function(a,l){return n("option",{domProps:{value:l}},[t._v(t._s(a))])})],2)]):s.field==="toggle"?n("label",{staticClass:"flex items-baseline font-normal"},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.attrs[o],expression:"item.attrs[name]"}],attrs:{type:"checkbox","true-value":t.trueValue(s),"false-value":t.falseValue(s)},domProps:{checked:Array.isArray(r.attrs[o])?t._i(r.attrs[o],null)>-1:t._q(r.attrs[o],t.trueValue(s))},on:{change:function(a){var l=r.attrs[o],c=a.target,f=c.checked?t.trueValue(s):t.falseValue(s);if(Array.isArray(l)){var u=null,d=t._i(l,u);c.checked?d<0&&t.$set(r.attrs,o,l.concat([u])):d>-1&&t.$set(r.attrs,o,l.slice(0,d).concat(l.slice(d+1)))}else t.$set(r.attrs,o,f)}}}),n("div",{staticClass:"text-sm ml-1"},[t._v(t._s(s.display||o))])]):n("label",{staticClass:"font-normal"},[n("div",{staticClass:"text-sm leading-none"},[t._v(t._s(s.display||o))]),n("TextInput",{staticClass:"mt-2 h-8 p-2 bg-gray-100 text-gray-800 w-full border bts-border-gray-450 rounded shadow-inner text-sm",attrs:{type:"text"},model:{value:r.attrs[o],callback:function(a){t.$set(r.attrs,o,a)},expression:"item.attrs[name]"}})],1)])}),0):t._e()])}),n("div",{staticClass:"bg-gray-100 rounded-b-md flex items-center justify-end space-x-3 font-normal p-2"},[n("button",{staticClass:"text-xs text-gray-600 hover:text-gray-800",on:{click:t.close}},[t._v(" "+t._s(t.__("Cancel"))+" ")]),n("button",{staticClass:"btn btn-sm",on:{click:t.apply}},[t._v(" "+t._s(t.__("Apply"))+" ")])])],2):n("div",{staticClass:"p-8 text-center text-gray-400"},[n("svg",{staticClass:"w-12 h-12",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{staticStyle:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},attrs:{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",stroke:"currentColor"}})])])])},qd=[],Kd=Ct(Gd,Ud,qd,!1,null,null,null,null);const Zd=Kd.exports,Xd={mixins:[BardToolbarButton],components:{AttributesPanel:Zd},data(){return{panelActive:!1}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&(this.togglePanel(),this.$refs.popover.close())}}};var Yd=function(){var t=this,n=t._self._c;return n("popover",{ref:"popover",attrs:{placement:"bottom-start",clickaway:!0},on:{closed:t.closePanel},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.button.text,expression:"button.text"}],staticClass:"bard-toolbar-button",attrs:{"aria-label":t.button.text},domProps:{innerHTML:t._s(t.button.html)},on:{click:t.togglePanel}})]},proxy:!0},{key:"default",fn:function(){return[t.panelActive?n("AttributesPanel",{attrs:{config:t.config,bard:t.bard,editor:t.editor,btsOptions:t.button.btsOptions},on:{applied:t.closePanel,close:t.closePanel}}):t._e()]},proxy:!0}])})},Vd=[],Qd=Ct(Xd,Yd,Vd,!1,null,null,null,null);const tp=Qd.exports,ep={props:{sets:Array},data(){return{selectedGroupHandle:null,search:null,selectionIndex:0,keybindings:[]}},computed:{showSearch(){return!this.hasMultipleGroups||!this.selectedGroup},showGroupBreadcrumb(){return this.hasMultipleGroups&&this.selectedGroup},showGroups(){return this.hasMultipleGroups&&!this.selectedGroup&&!this.search},hasMultipleSets(){return this.sets.reduce((e,t)=>e+t.sets.length,0)>1},hasMultipleGroups(){return this.sets.length>1},selectedGroup(){return this.sets.find(e=>e.handle===this.selectedGroupHandle)},selectedGroupDisplayText(){return this.selectedGroup?this.selectedGroup.display||this.selectedGroup.handle:null},visibleSets(){if(!this.selectedGroup&&!this.search)return[];let e=this.selectedGroup?this.selectedGroup.sets:this.sets.reduce((t,n)=>t.concat(n.sets),[]);return this.search?e.filter(t=>t.display.toLowerCase().includes(this.search.toLowerCase())||t.handle.toLowerCase().includes(this.search.toLowerCase())):e},items(){let e=[];return this.showGroups&&this.sets.forEach(t=>{e.push({...t,type:"group"})}),this.visibleSets.forEach(t=>{e.push({...t,type:"set"})}),e},noSearchResults(){return this.search&&this.visibleSets.length===0}},watch:{search(){this.selectionIndex=0}},methods:{addSet(e){this.$emit("added",e),this.unselectGroup(),this.search=null,this.$refs.popover.close()},selectGroup(e){this.selectedGroupHandle=e,this.selectionIndex=0},unselectGroup(){this.selectedGroupHandle=null},opened(){this.$refs.search.focus(),this.sets.length===1&&(this.selectedGroupHandle=this.sets[0].handle),this.bindKeys()},closed(){this.unbindKeys()},bindKeys(){this.keybindings=[this.$keys.bindGlobal("up",e=>this.keypressUp(e)),this.$keys.bindGlobal("down",e=>this.keypressDown(e)),this.$keys.bindGlobal("enter",e=>this.keypressEnter(e))]},unbindKeys(){this.keybindings.forEach(e=>e.destroy()),this.keybindings=[]},keypressUp(e){e.preventDefault(),this.selectionIndex=this.selectionIndex===0?this.items.length-1:this.selectionIndex-1},keypressDown(e){e.preventDefault(),this.selectionIndex=this.selectionIndex===this.items.length-1?0:this.selectionIndex+1},keypressEnter(e){e.preventDefault();const t=this.items[this.selectionIndex];t.type==="group"?this.selectGroup(t.handle):this.addSet(t.handle)},triggerWasClicked(){this.hasMultipleSets||this.addSet(this.sets[0].sets[0].handle)}}};var np=function(){var t=this,n=t._self._c;return n("popover",{ref:"popover",staticClass:"set-picker select-none",attrs:{placement:"bottom-start",disabled:!t.hasMultipleSets},on:{opened:t.opened,closed:t.closed,click:t.triggerWasClicked,"clicked-away":function(r){return t.$emit("clicked-away",r)}},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._t("trigger")]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticClass:"set-picker-header p-3 border-b text-xs flex items-center"},[n("input",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"},{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",staticClass:"py-1 px-2 border rounded w-full",attrs:{type:"text",placeholder:t.__("Search Sets")},domProps:{value:t.search},on:{input:function(r){r.target.composing||(t.search=r.target.value)}}}),t.showGroupBreadcrumb?n("div",{staticClass:"flex items-center text-gray-700 font-medium"},[n("button",{staticClass:"hover:text-gray-900 ml-2.5 rounded",on:{click:t.unselectGroup}},[t._v(" "+t._s(t.__("Groups"))+" ")]),n("svg-icon",{staticClass:"w-4 h-4",attrs:{name:"micro/chevron-right"}}),n("span",[t._v(t._s(t.selectedGroupDisplayText))])],1):t._e()]),n("div",{staticClass:"p-1 max-h-80 overflow-auto"},[t._l(t.items,function(r,i){return n("div",{key:r.handle,staticClass:"cursor-pointer rounded",class:{"bg-gray-200":t.selectionIndex===i},on:{mouseover:function(s){t.selectionIndex=i}}},[r.type==="group"?n("div",{staticClass:"flex items-center group px-2 py-1.5 rounded-md",on:{click:function(s){return t.selectGroup(r.handle)}}},[n("div",{staticClass:"h-9 w-9 rounded bg-white border border-gray-600 mr-2 p-2"},[n("svg-icon",{staticClass:"text-gray-800",attrs:{name:r.icon?`plump/${r.icon}`:"folder-generic"}})],1),n("div",{staticClass:"flex-1"},[n("div",{staticClass:"text-md font-medium text-gray-800 truncate w-52"},[t._v(t._s(r.display||r.handle))]),r.instructions?n("div",{staticClass:"text-2xs text-gray-700 truncate w-52"},[t._v(t._s(r.instructions))]):t._e()]),n("svg-icon",{staticClass:"text-gray-600 group-hover:text-gray-800",attrs:{name:"micro/chevron-right-thin"}})],1):t._e(),r.type==="set"?n("div",{staticClass:"flex items-center group px-2 py-1.5 rounded-md",on:{click:function(s){return t.addSet(r.handle)}}},[n("div",{staticClass:"h-9 w-9 rounded bg-white border border-gray-600 mr-2 p-2"},[n("svg-icon",{staticClass:"text-gray-800",attrs:{name:r.icon?`plump/${r.icon}`:"light/add"}})],1),n("div",{staticClass:"flex-1"},[n("div",{staticClass:"text-md font-medium text-gray-800 truncate w-52"},[t._v(t._s(r.display||r.handle))]),r.instructions?n("div",{staticClass:"text-2xs text-gray-700 truncate w-52"},[t._v(t._s(r.instructions))]):t._e()])]):t._e()])}),t.noSearchResults?n("div",{staticClass:"text-center text-gray-600 text-xs p-3"},[t._v(" "+t._s(t.__("No results"))+" ")]):t._e()],2)]},proxy:!0}],null,!0)})},rp=[],ip=Ct(ep,np,rp,!1,null,null,null,null);const sp=ip.exports,op={mixins:[BardToolbarButton],components:{SetPicker:sp},data(){return{pickerActive:!1,activeItem:null}},computed:{groupConfigs(){return this.config.bts_spots},spotConfigs(){return reduce(this.groupConfigs,(e,t)=>e.concat(t.sets),[])}},methods:{togglePicker(){this.pickerActive=!this.pickerActive},closePicker(){this.pickerActive&&(this.togglePicker(),this.$refs.popover.close())},buttonClicked(){this.spotConfigs.length===1&&this.addSpot(this.spotConfigs[0].handle)}}};var ap=function(){var t=this,n=t._self._c;return n("set-picker",{attrs:{sets:t.groupConfigs},on:{"clicked-away":t.toggleClose},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.button.text,expression:"button.text"}],staticClass:"bard-toolbar-button",attrs:{"aria-label":t.button.text},on:{click:t.buttonClicked}},[n("div",{staticClass:"flex items-center",domProps:{innerHTML:t._s(t.button.html)}})])]},proxy:!0}])})},lp=[],cp=Ct(op,ap,lp,!1,null,null,null,null);const fp=cp.exports;let Yi=0;const Vi={letter:e=>{const t={heading:"H",paragraph:"P",btsSpan:"T"}[e.ext]??"S",n={H:'<path d="M2,6.594L6.857,6.594L6.857,1.429C6.857,0.956 7.241,0.571 7.714,0.571C8.187,0.571 8.571,0.956 8.571,1.429L8.571,14.571C8.571,15.044 8.187,15.429 7.714,15.429C7.241,15.429 6.857,15.044 6.857,14.571L6.857,8.309L2,8.309L2,14.571C2,15.044 1.616,15.429 1.143,15.429C0.67,15.429 0.286,15.044 0.286,14.571L0.286,1.429C0.286,0.956 0.67,0.571 1.143,0.571C1.616,0.571 2,0.956 2,1.429L2,6.594Z" />',P:'<path d="M1.153,0.666C0.672,0.666 0.275,1.063 0.275,1.544L0.275,14.565C0.275,15.045 0.672,15.443 1.174,15.443C1.654,15.443 2.052,15.045 2.052,14.565L2.052,9.674C2.699,9.737 3.078,9.764 3.894,9.764C5.586,9.764 6.489,9.325 7.409,8.427C8.308,7.528 8.768,6.441 8.768,5.166C8.768,3.85 8.35,2.763 7.514,1.906C6.657,1.049 5.67,0.631 3.747,0.631C3.058,0.631 2.428,0.645 1.153,0.666ZM2.052,2.338C2.971,2.317 3.35,2.303 3.914,2.303C6.172,2.303 6.887,3.369 6.887,5.145C6.887,6.985 5.984,8.092 3.831,8.092C3.204,8.092 2.846,8.044 2.052,7.981L2.052,2.338Z" />',T:'<path d="M9.492,2.338C9.931,2.338 10.307,1.941 10.307,1.502C10.307,1.063 9.931,0.666 9.492,0.666L1.104,0.666C0.665,0.666 0.289,1.063 0.289,1.502C0.289,1.941 0.665,2.338 1.104,2.338L4.41,2.338L4.41,14.565C4.41,15.045 4.807,15.443 5.308,15.443C5.789,15.443 6.186,15.045 6.186,14.565L6.186,2.338L9.492,2.338Z" />',S:'<path d="M4.081,15.505C5.274,15.505 6.265,15.129 7.073,14.398C7.862,13.666 8.266,12.726 8.266,11.534C8.266,6.539 1.989,7.898 1.989,4.282C1.989,2.965 2.888,2.129 4.301,2.129C5.017,2.129 5.715,2.359 6.357,2.798C6.522,2.903 6.669,2.944 6.779,2.944C7.018,2.944 7.22,2.819 7.385,2.547C7.477,2.443 7.514,2.296 7.514,2.108C7.514,1.816 7.422,1.586 7.22,1.44C6.321,0.792 5.311,0.457 4.21,0.457C3.017,0.457 2.08,0.813 1.383,1.544C0.685,2.276 0.337,3.195 0.337,4.282C0.337,9.131 6.614,7.981 6.614,11.555C6.614,12.976 5.513,13.833 4.1,13.833C3.347,13.833 2.466,13.415 1.456,12.558C1.328,12.454 1.199,12.412 1.034,12.412C0.796,12.412 0.612,12.517 0.465,12.726C0.355,12.872 0.3,13.06 0.3,13.248C0.3,13.499 0.373,13.687 0.52,13.833C1.677,14.941 2.87,15.505 4.081,15.505Z" />'}[t],r=e.ident;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="bts-icon-letter">
                ${n}
                <text text-anchor="middle" x="12.75" y="14.5" style="font-size: 10px; stroke-width: 1px; stroke: currentColor">${r}</text>
            </svg>
        `},square:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <rect width="15" height="15" x="0.5" y="0.5" rx="3" stroke-width="1" stroke="currentColor" fill="none" />
                <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${e.ident}</text>
            </svg>
        `,"square-solid":e=>{const t=e.ident,n=`bts-mask-${Yi++}`;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <mask id="${n}">
                    <rect width="16" height="16" fill="white" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${t}</text>
                </mask>
                <rect width="15" height="15" x="0.5" y="0.5" rx="3" stroke-width="1" stroke="currentColor" mask="url(#${n})" />
            </svg>
        `},circle:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" fill="none" />
                <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${e.ident}</text>
            </svg>
        `,"circle-solid":e=>{const t=e.ident,n=`bts-mask-${Yi++}`;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <mask id="${n}">
                    <rect width="16" height="16" fill="white" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${t}</text>
                </mask>
                <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" mask="url(#${n})" />
            </svg>
        `},"bullet-list":e=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2.333,1C2.882,1 3.333,1.451 3.333,2L3.333,3.333C3.333,3.882 2.882,4.333 2.333,4.333L1,4.333C0.451,4.333 0,3.882 0,3.333L0,2C-0,1.451 0.451,1 1,1L2.333,1ZM2.333,6.333C2.882,6.333 3.333,6.785 3.333,7.333L3.333,8.667C3.333,9.215 2.882,9.667 2.333,9.667L1,9.667C0.451,9.667 0,9.215 0,8.667L0,7.333C-0,6.785 0.451,6.333 1,6.333L2.333,6.333ZM2.333,11.667C2.882,11.667 3.333,12.118 3.333,12.667L3.333,14C3.333,14.549 2.882,15 2.333,15L1,15C0.451,15 0,14.549 0,14L0,12.667C-0,12.118 0.451,11.667 1,11.667L2.333,11.667Z" />
                <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${e.ident}</text>
            </svg>
        `,"ordered-list":e=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M1.473,11.5C0.873,11.5 0.343,11.907 0.187,12.487C0.175,12.529 0.169,12.573 0.169,12.617C0.169,12.891 0.395,13.117 0.67,13.117C0.896,13.117 1.095,12.965 1.153,12.747C1.192,12.602 1.324,12.501 1.473,12.5C1.656,12.5 1.807,12.65 1.807,12.833C1.807,13.016 1.656,13.167 1.473,13.167C1.199,13.167 0.973,13.392 0.973,13.667C0.973,13.941 1.199,14.167 1.473,14.167C1.656,14.167 1.807,14.317 1.807,14.5C1.809,14.514 1.809,14.529 1.809,14.543C1.809,14.728 1.658,14.879 1.473,14.879C1.305,14.879 1.162,14.753 1.14,14.587C1.09,14.358 0.886,14.194 0.652,14.194C0.377,14.194 0.152,14.42 0.152,14.694C0.152,14.751 0.161,14.807 0.18,14.86C0.345,15.427 0.869,15.82 1.46,15.82C2.187,15.82 2.786,15.226 2.793,14.5C2.795,14.236 2.716,13.978 2.567,13.76C2.533,13.702 2.533,13.631 2.567,13.573C2.716,13.356 2.795,13.097 2.793,12.833C2.793,12.107 2.2,11.507 1.473,11.5ZM2.833,7.167C2.833,6.435 2.231,5.833 1.5,5.833C0.769,5.833 0.167,6.435 0.167,7.167C0.17,7.44 0.394,7.663 0.667,7.667C0.94,7.663 1.163,7.44 1.167,7.167C1.167,6.984 1.317,6.833 1.5,6.833C1.683,6.833 1.833,6.984 1.833,7.167C1.834,7.322 1.779,7.473 1.68,7.593L0.273,9.333C0.156,9.483 0.133,9.687 0.213,9.86C0.297,10.034 0.474,10.145 0.667,10.147L2.333,10.147C2.608,10.147 2.833,9.921 2.833,9.647C2.833,9.372 2.608,9.147 2.333,9.147L2.053,9.147C1.991,9.146 1.934,9.109 1.907,9.053C1.87,8.999 1.87,8.928 1.907,8.873L2.447,8.207C2.686,7.912 2.822,7.546 2.833,7.167ZM2.667,3.5L2.5,3.5C2.409,3.5 2.333,3.425 2.333,3.333L2.333,1.08C2.33,0.578 1.916,0.167 1.413,0.167L1,0.167C0.726,0.167 0.5,0.392 0.5,0.667C0.5,0.941 0.726,1.167 1,1.167L1.167,1.167C1.258,1.167 1.333,1.242 1.333,1.333L1.333,3.333C1.333,3.425 1.258,3.5 1.167,3.5L1,3.5C0.726,3.5 0.5,3.726 0.5,4C0.5,4.274 0.726,4.5 1,4.5L2.667,4.5C2.941,4.5 3.167,4.274 3.167,4C3.167,3.726 2.941,3.5 2.667,3.5Z" />
                <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${e.ident}</text>
            </svg>
        `,link:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M10.031,7.51C9.534,8.211 9.615,9.178 10.223,9.786L10.562,10.125L10.126,10.562L9.786,10.222C9.178,9.614 8.211,9.533 7.51,10.031L7.3,10.18C6.802,10.534 6.365,10.967 6.007,11.463C5.419,12.28 5.51,13.413 6.222,14.125L7.351,15.254C8.063,15.966 9.196,16.057 10.013,15.469C10.509,15.111 10.943,14.674 11.298,14.175L11.461,13.945C11.951,13.256 11.87,12.305 11.272,11.707L10.915,11.35L11.351,10.914L11.709,11.271C12.306,11.869 13.257,11.949 13.947,11.46L14.177,11.296C14.675,10.942 15.112,10.508 15.47,10.012C16.058,9.195 15.967,8.062 15.255,7.35L14.126,6.221C13.414,5.51 12.281,5.419 11.464,6.007C10.968,6.364 10.534,6.801 10.179,7.3L10.031,7.51L10.031,7.51ZM12.141,10.125L12.499,10.483C12.713,10.696 13.053,10.725 13.3,10.55L13.53,10.386C13.929,10.103 14.278,9.756 14.564,9.359C14.833,8.985 14.791,8.466 14.466,8.141L13.336,7.011C13.01,6.686 12.491,6.644 12.117,6.913C11.721,7.199 11.373,7.548 11.09,7.947L10.941,8.156C10.757,8.415 10.787,8.772 11.012,8.996L11.351,9.335L11.729,8.957C11.835,8.848 11.98,8.787 12.131,8.787C12.438,8.787 12.69,9.039 12.69,9.345C12.69,9.496 12.628,9.641 12.519,9.746L12.141,10.125ZM9.336,11.351L8.964,11.723C8.859,11.828 8.8,11.97 8.8,12.118C8.8,12.424 9.053,12.676 9.359,12.676C9.507,12.676 9.65,12.617 9.754,12.512L10.126,12.141L10.483,12.498C10.697,12.712 10.725,13.053 10.55,13.299L10.386,13.53C10.103,13.929 9.756,14.278 9.36,14.563C8.986,14.833 8.467,14.791 8.141,14.465L7.012,13.336C6.686,13.011 6.644,12.492 6.913,12.118C7.199,11.721 7.548,11.373 7.947,11.09L8.157,10.941C8.415,10.758 8.772,10.788 8.996,11.013L9.336,11.352L9.336,11.351Z" style="fill-rule:evenodd" />
                <text text-anchor="middle" x="5" y="8" style="font-size: 11px;">${e.ident}</text>
            </svg>
        `,symbol:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <text text-anchor="middle" x="8" y="16" style="font-size: 23px;">${e.ident}</text>
            </svg>
        `},up=e=>{let t;return e.icon?t=e.icon:e.ext==="link"?t="link":e.ext==="bulletList"?t="bullet-list":e.ext==="orderedList"?t="ordered-list":e.ext==="btsDiv"?t="square":t="letter",Vi[t]?Vi[t](e):t},dp={styles:`
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="16" viewBox="0 0 22 16" fill="currentColor" style="width: 22px;">
            <path d="M11.755,14.91C11.924,15.311 12.198,15.5 12.598,15.5C13.125,15.5 13.462,15.079 13.462,14.594C13.462,14.488 13.441,14.363 13.399,14.236L7.774,1.216C7.584,0.732 7.247,0.5 6.762,0.5C6.278,0.5 5.941,0.732 5.73,1.216L0.084,14.299C0.021,14.468 0,14.594 0,14.679C0,15.121 0.316,15.5 0.843,15.5C1.222,15.5 1.496,15.311 1.643,14.91L3.329,10.887L10.049,10.887L11.755,14.91ZM4.045,9.201L6.699,2.902L9.354,9.201L4.045,9.201ZM13.883,12.571C13.883,14.363 15.042,15.5 16.791,15.5C18.076,15.5 19.088,15.037 19.824,14.13L19.824,14.762C19.824,15.162 20.183,15.5 20.625,15.5C21.068,15.5 21.426,15.163 21.426,14.762L21.426,9.538C21.426,6.946 20.393,5.662 17.781,5.662C16.959,5.662 16.074,5.851 15.169,6.23C14.895,6.336 14.747,6.567 14.747,6.904C14.747,7.01 14.768,7.094 14.811,7.199C14.937,7.473 15.147,7.621 15.463,7.621C15.572,7.621 15.679,7.599 15.779,7.557C16.432,7.304 17.064,7.179 17.676,7.179C19.424,7.179 19.824,8.147 19.824,10.17C19.255,9.77 18.476,9.559 17.465,9.559C15.358,9.559 13.883,10.696 13.883,12.571ZM19.824,12.762C19.129,13.583 18.329,13.983 17.38,13.983C16.306,13.983 15.674,13.414 15.674,12.488C15.674,11.476 16.58,10.929 17.696,10.929C18.518,10.929 19.235,11.139 19.824,11.561L19.824,12.762Z" />
        </svg>
    `,attributes:`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M5.611,14.098L15.267,4.442C15.416,4.29 15.5,4.085 15.5,3.872C15.5,3.664 15.416,3.465 15.267,3.32L12.671,0.733C12.522,0.585 12.321,0.501 12.111,0.501C11.901,0.501 11.7,0.585 11.551,0.733L1.879,10.372C1.421,11.781 0.969,13.193 0.524,14.606C0.508,14.667 0.5,14.73 0.5,14.793C0.5,15.176 0.791,15.499 1.138,15.499C1.563,15.499 1.963,15.341 5.611,14.098ZM2.887,11.314L4.667,13.094L2.027,13.966L2.887,11.314ZM3.683,10.342L12.111,1.943L14.056,3.881L5.641,12.299L3.683,10.342Z" />
        </svg>
    `,spots:`
        <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><circle cx="8" cy="8" r="8"/></svg>
    `},Jn=e=>dp[e];class pp{constructor(t){t.types=this.bootTypeManager(t.types),this.bootExtensions(t).bootStyleButtons(t).bootStylesButton(t).bootAttributesButton(t).bootSpotsButton(t).bootCss(t)}bootTypeManager(t){return t.getByItem=function(n){return Object.values(this).find(function(r){const i=Array.isArray(r.parameters)?{}:r.parameters,s=Object.fromEntries(Object.entries(n.attrs).filter(([o])=>i.hasOwnProperty(o)));return r.extension===n.type&&JSON.stringify(s)===JSON.stringify(i)})},t}bootExtensions(t){return Statamic.$bard.addExtension(({bard:n})=>hd.configure({...t,bard:n})),Statamic.$bard.addExtension(({bard:n})=>Cd.configure({...t,bard:n})),Statamic.$bard.addExtension(({bard:n})=>vd.configure({...t,bard:n})),Statamic.$bard.addExtension(()=>Oo),t.pro&&(Statamic.$bard.addExtension(()=>Sd.configure(t)),Statamic.$bard.addExtension(()=>Eo),Statamic.$bard.addExtension(()=>dd)),this}bootStyleButtons(t){return Statamic.$bard.buttons((n,r)=>{Object.entries(t.styles).forEach(([i,s])=>{const o=t.types[s.type],a=up(s),l={name:i,text:s.name,args:{[t.attr]:s[t.store],...o.parameters},html:a,active:(c,f)=>c.isActive(o.extension,f),visible:o.active_visible?c=>c.isActive(o.extension):()=>!0,btsMenuVisible:o.active_visible?c=>c.isActive(o.extension):()=>!0,command:(c,f)=>c.chain().focus()[o.command](f).run(),btsStyle:s};n.splice(n.indexOf(i),0,r(l))})}),this}bootStylesButton(t){return t.pro?(Statamic.$bard.buttons((n,r)=>{n.splice(n.indexOf("bts_styles"),0,r({name:"bts_styles",text:__("Style"),component:Bd,html:Jn("styles"),btsOptions:t}))}),this):this}bootAttributesButton(t){return t.pro?(Statamic.$bard.buttons((n,r)=>{n.splice(n.indexOf("bts_attributes"),0,r({name:"bts_attributes",text:__("Attributes"),component:tp,html:Jn("attributes"),btsOptions:t}))}),this):this}bootSpotsButton(t){return t.pro?(Statamic.$bard.buttons((n,r)=>{n.splice(n.indexOf("bts_attributes"),0,r({name:"bts_spots",text:__("Spots"),component:fp,html:Jn("spots"),btsOptions:t}))}),this):this}bootCss(t){const n=[...this.gatherDefaultsCss(t),...this.gatherStylesCss(t)],r=document.createElement("style");return r.appendChild(document.createTextNode(n.join(" "))),document.body.appendChild(r),this}gatherDefaultsCss(t){const n=[],r=".bard-fieldtype-wrapper .bard-content";return Object.entries(t.defaults).forEach(([i,s])=>{Object.entries(s.dflts).forEach(([o,a])=>{const l=t.types[a.type].selector;a.cp_css&&n.push(...this.parseCss([`.bts-styles[data-bts-defaults="${i}"] .bts-preview[data-bts-type="${a.type}"]:not([data-bts-style])`,`${r}[data-bts-defaults="${i}"] > ${l}:not([data-bts-style])`],a.cp_css)),a.cp_badge&&n.push(...this.parseCss([`${r}[data-bts-defaults="${i}"] > ${l}:not([data-bts-style])::before`],{"&":{content:`"${__(t.types[a.type].display)}"`}}))})}),n}gatherStylesCss(t){const n=[],r=".bard-fieldtype-wrapper .bard-content";return Object.entries(t.styles).forEach(([i,s])=>{const o=t.types[s.type].selector;s.cp_css&&n.push(...this.parseCss([`.bts-preview[data-bts-style="${s[t.store]}"]`,`${r} ${o}[data-bts-style="${s[t.store]}"]`],s.cp_css)),s.cp_badge&&n.push(...this.parseCss([`${r} ${o}[data-bts-style="${s[t.store]}"]::before`],{"&":{content:`"${s.name}"`}}))}),n}parseCss(t,n){return n===void 0?[]:(typeof n=="string"&&(n={"&":n}),Object.entries(n).map(([r,i])=>{const s=t.map(a=>r.includes("&")?r.replace("&",a):`${a} ${r}`).join(", "),o=typeof i=="object"?Object.entries(i).map(([a,l])=>`${a}: ${l};`).join(""):i;return`${s} { ${o} }`}))}}Statamic.booting(()=>{new pp(Statamic.$config.get("bard-texstyle"))});
