const W=e=>{const{Mark:t}=e.core;return t.create({name:"btsSpan",excludes:"",parseHTML(){return[{tag:"span[data-bts-style]"}]},renderHTML({HTMLAttributes:s}){return["span",s,0]},addCommands(){return{btsToggleSpan:s=>({commands:r})=>r.toggleMark(this.name,s)}}})},Q=e=>{const{Node:t}=e.core;return t.create({name:"btsDiv",content:"block+",group:"root",defining:!1,parseHTML(){return[{tag:"div[data-bts-style]"}]},renderHTML({HTMLAttributes:s}){return["div",{class:"bard-content",...s},0]},addCommands(){return{btsToggleDiv:s=>({editor:r,commands:o})=>r.isActive(this.name,s)?o.lift(this.name):r.isActive(this.name)?o.updateAttributes(this.name,s):(console.log(123),o.wrapIn(this.name,s))}}})},X=e=>{const{Node:t}=e.core;return t.create({name:"btsHidden",content:"block+",group:"root",defining:!1,parseHTML(){return[{tag:"div[data-bts-hidden]"}]},renderHTML({HTMLAttributes:s}){return["div",{"data-bts-hidden":"",class:"bard-content",...s},0]},addCommands(){return{btsToggleHidden:s=>({editor:r,commands:o})=>r.isActive(this.name,s)?o.lift(this.name):r.isActive(this.name)?o.updateAttributes(this.name,s):o.wrapIn(this.name,s)}}})},{Alert:ht,AuthCard:bt,Avatar:mt,Badge:ft,Button:D,ButtonGroup:gt,Calendar:vt,Card:Ct,CardList:yt,CardListItem:xt,CardPanel:wt,CharacterCounter:_t,Checkbox:kt,CheckboxGroup:Pt,CodeEditor:Lt,Combobox:St,CommandPaletteItem:At,ConfirmationModal:Ot,Context:Mt,ContextFooter:Tt,ContextHeader:$t,ContextItem:Bt,ContextLabel:Et,ContextMenu:Ht,ContextSeparator:It,CreateForm:jt,DatePicker:Dt,DateRangePicker:Rt,Description:Vt,DocsCallout:Ft,DragHandle:Nt,Dropdown:Zt,DropdownItem:zt,DropdownLabel:Ut,DropdownMenu:qt,DropdownSeparator:Gt,DropdownFooter:Jt,DropdownHeader:Kt,Editable:Wt,ErrorMessage:Qt,EmptyStateItem:Xt,EmptyStateMenu:Yt,Field:es,Header:ts,Heading:ss,HoverCard:ns,Icon:Y,Input:rs,InputGroup:is,InputGroupAppend:os,InputGroupPrepend:as,Label:ls,Listing:cs,ListingCustomizeColumns:ds,ListingFilters:us,ListingHeaderCell:ps,ListingPagination:hs,ListingPresets:bs,ListingPresetTrigger:ms,ListingRowActions:fs,ListingSearch:gs,ListingTable:vs,ListingTableBody:Cs,ListingTableHead:ys,ListingToggleAll:xs,LivePreview:ws,LivePreviewPopout:_s,Modal:ks,ModalClose:Ps,ModalTitle:Ls,Pagination:Ss,Panel:As,PanelFooter:Os,PanelHeader:Ms,Popover:z,PublishComponents:Ts,PublishContainer:$s,publishContextKey:Bs,injectPublishContext:ee,PublishField:Es,PublishFields:te,PublishFieldsProvider:se,PublishForm:Hs,PublishLocalizations:Is,PublishSections:js,PublishTabs:Ds,Radio:Rs,RadioGroup:Vs,Select:Fs,Separator:Ns,Slider:Zs,Skeleton:zs,SplitterGroup:Us,SplitterPanel:qs,SplitterResizeHandle:Gs,StatusIndicator:Js,Subheading:Ks,Switch:Ws,TabContent:Qs,Stack:U,StackClose:Xs,StackHeader:Ys,StackFooter:q,StackContent:G,Table:en,TableCell:tn,TableColumn:sn,TableColumns:nn,TableRow:rn,TableRows:on,TabList:an,TabProvider:ln,Tabs:cn,TabTrigger:dn,Textarea:un,TimePicker:pn,ToggleGroup:hn,ToggleItem:bn,Widget:mn,registerIconSet:fn,registerIconSetFromStrings:gn}=__STATAMIC__.ui,R={methods:{updatePinMeta(e,t){this.bard.updateMeta({...this.bard.meta,btsPins:{...this.bard.meta.btsPins,existing:{...this.bard.meta.btsPins.existing,[e]:t}}})},pastePin(e){const t=e.id,s=uniqid(),r=e.values,o=this.bard.meta.btsPins?.existing[t]||this.bard.meta.btsPins?.defaults[r.type]||{};return setTimeout(()=>{this.updatePinMeta(s,o)},0),{id:s,values:r}}}},ne=window.Vue,{BaseTransition:vn,BaseTransitionPropsValidators:Cn,Comment:yn,DeprecationTypes:xn,EffectScope:wn,ErrorCodes:_n,ErrorTypeStrings:kn,Fragment:$,KeepAlive:Pn,ReactiveEffect:Ln,Static:Sn,Suspense:An,Teleport:On,Text:Mn,TrackOpTypes:Tn,Transition:$n,TransitionGroup:Bn,TriggerOpTypes:En,VueElement:Hn,__esModule:In,assertNumber:jn,callWithAsyncErrorHandling:Dn,callWithErrorHandling:Rn,camelize:Vn,capitalize:Fn,cloneVNode:Nn,compatUtils:Zn,compile:zn,computed:Un,createApp:qn,createBlock:f,createCommentVNode:v,createElementBlock:p,createElementVNode:m,createHydrationRenderer:Gn,createPropsRestProxy:Jn,createRenderer:Kn,createSSRApp:Wn,createSlots:Qn,createStaticVNode:Xn,createTextVNode:T,createVNode:_,customRef:Yn,defineAsyncComponent:er,defineComponent:tr,defineCustomElement:sr,defineEmits:nr,defineExpose:rr,defineModel:ir,defineOptions:or,defineProps:ar,defineSSRCustomElement:lr,defineSlots:cr,devtools:dr,effect:ur,effectScope:pr,getCurrentInstance:hr,getCurrentScope:br,getCurrentWatcher:mr,getTransitionRawChildren:fr,guardReactiveProps:gr,h:vr,handleError:Cr,hasInjectionContext:yr,hydrate:xr,hydrateOnIdle:wr,hydrateOnInteraction:_r,hydrateOnMediaQuery:kr,hydrateOnVisible:Pr,initCustomFormatter:Lr,initDirectivesForSSR:Sr,inject:Ar,isMemoSame:Or,isProxy:Mr,isReactive:Tr,isReadonly:$r,isRef:Br,isRuntimeOnly:Er,isShallow:Hr,isVNode:Ir,markRaw:jr,mergeDefaults:Dr,mergeModels:Rr,mergeProps:Vr,nextTick:Fr,normalizeClass:A,normalizeProps:Nr,normalizeStyle:Zr,onActivated:zr,onBeforeMount:Ur,onBeforeUnmount:qr,onBeforeUpdate:Gr,onDeactivated:Jr,onErrorCaptured:Kr,onMounted:Wr,onRenderTracked:Qr,onRenderTriggered:Xr,onScopeDispose:Yr,onServerPrefetch:ei,onUnmounted:ti,onUpdated:si,onWatcherCleanup:ni,openBlock:c,popScopeId:ri,provide:ii,proxyRefs:oi,pushScopeId:ai,queuePostFlushCb:li,reactive:ci,readonly:di,ref:ui,registerRuntimeCompiler:pi,render:hi,renderList:I,renderSlot:bi,resolveComponent:b,resolveDirective:j,resolveDynamicComponent:re,resolveFilter:mi,resolveTransitionHooks:fi,setBlockTracking:gi,setDevtoolsHook:vi,setTransitionHooks:Ci,shallowReactive:yi,shallowReadonly:xi,shallowRef:wi,ssrContextKey:_i,ssrUtils:ki,stop:Pi,toDisplayString:L,toHandlerKey:Li,toHandlers:Si,toRaw:Ai,toRef:Oi,toRefs:Mi,toValue:Ti,transformVNodeArgs:$i,triggerRef:Bi,unref:Ei,useAttrs:Hi,useCssModule:Ii,useCssVars:ji,useHost:Di,useId:Ri,useModel:Vi,useSSRContext:Fi,useShadowRoot:Ni,useSlots:Zi,useTemplateRef:zi,useTransitionState:Ui,vModelCheckbox:qi,vModelDynamic:Gi,vModelRadio:Ji,vModelSelect:Ki,vModelText:Wi,vShow:Qi,version:Xi,warn:Yi,watch:eo,watchEffect:to,watchPostEffect:so,watchSyncEffect:no,withAsyncContext:ro,withCtx:h,withDefaults:io,withDirectives:B,withKeys:oo,withMemo:ao,withModifiers:lo,withScopeId:co}=ne,O=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s},ie={components:{Stack:U,StackContent:G,StackFooter:q,Fields:te,FieldsProvider:se},mixins:[R],props:{editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Array,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0}},data(){return{panelActive:!1,previews:{},initializing:!0}},created(){const{previews:e}=ee();this.previews=e},mounted(){this.$nextTick(()=>{this.initializing=!1})},computed:{fields(){return this.config.publishFields||[]},display(){return this.config.display||this.values.type},icon(){return this.config.icon},id(){return this.node.attrs.id},values(){return this.node.attrs.values},meta(){return this.bard.meta.btsPins.existing[this.id]||{}},fieldPathPrefix(){const e=this.bard.fieldPathPrefix,t=this.bard.handle;return`${e?`${e}.${t}`:t}.${this.path}`},metaPathPrefix(){const e=this.bard.metaPathPrefix,t=this.bard.handle;return`${e?`${e}.${t}`:t}.btsPins.existing.${this.id}`},parentName(){return this.bard.name},index(){const e=this.editor.view.state.doc.resolve(this.getPos());return Array(e.depth+1).fill(null).map((t,s)=>e.index(s))},path(){const e=this.index.length-1;return this.index.map((t,s)=>s===e?`${t}.attrs.values`:`${t}.content`).join(".")},hasError(){return Object.keys(this.bard.publishContainer.errors).some(e=>e.startsWith(this.fieldPathPrefix))},bard(){return this.extension.options.bard},config(){return this.pinConfigs.find(e=>e.handle===this.values.type)||{}},pinConfigs(){return Object.values(this.extension.options.pins)},isReadOnly(){return this.bard.isReadOnly},isUnknown(){return Object.keys(this.meta).length===0},isInvalid(){return Object.keys(this.config).length===0},decorationSpecs(){return Object.assign({},...this.decorations.map(e=>e.type.spec))},withinSelection(){return this.decorationSpecs.withinSelection},previewText(){return Object.entries(data_get(this.previews,this.fieldPathPrefix)||{}).filter(([e,t])=>e.endsWith("_")?(e=e.substr(0,e.length-1),(this.fields.find(r=>r.handle===e)||{}).preview):!1).map(([e,t])=>t).filter(e=>["null","[]","{}",""].includes(JSON.stringify(e))?null:e).map(e=>typeof e=="object"&&e.constructor.name==="PreviewHtml"?e.html:typeof e=="string"?escapeHtml(e):Array.isArray(e)&&typeof e[0]=="string"?escapeHtml(e.join(", ")):escapeHtml(JSON.stringify(e))).join(" / ")}},methods:{updated(e,t){const s={...this.values,[e]:t};this.updateAttributes({values:s})},metaUpdated(e,t){this.updatePinMeta(this.id,{...this.meta,[e]:t})}}},oe={key:0,class:"bts-pin-invalid"},ae={key:1,class:"bts-pin-invalid"},le={class:"bts-pin-button"},ce=["innerHTML"],de=["innerHTML"],ue={key:3,class:"hidden"};function pe(e,t,s,r,o,n){const a=b("ui-icon"),i=b("Fields"),l=b("FieldsProvider"),d=b("StackContent"),u=b("ui-button"),g=b("StackFooter"),S=b("Stack"),C=b("node-view-wrapper"),y=j("tooltip");return c(),f(C,{class:A(["bts-pin",{"bts-pin-selected":s.selected||n.withinSelection,"border-red-500":n.hasError}])},{default:h(()=>[t[2]||(t[2]=m("div",{class:"bts-pin-handle","data-drag-handle":""},[m("svg",{viewBox:"0 0 8 17",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},[m("circle",{cx:"1.641",cy:"8.5",r:"1.25"}),m("circle",{cx:"1.641",cy:"4",r:"1.25"}),m("circle",{cx:"1.641",cy:"13",r:"1.25"}),m("circle",{cx:"6.359",cy:"8.5",r:"1.25"}),m("circle",{cx:"6.359",cy:"4",r:"1.25"}),m("circle",{cx:"6.359",cy:"13",r:"1.25"})])],-1)),n.isInvalid?(c(),p("div",oe,[B(_(a,{name:"alert-warning-exclamation-mark",class:"text-red-500"},null,512),[[y,"Invalid Pin"]])])):v("",!0),n.isUnknown?(c(),p("div",ae,[B(_(a,{name:"alert-warning-exclamation-mark"},null,512),[[y,"Unknown Pin"]])])):v("",!0),!n.isInvalid&&!n.isUnknown?(c(),f(S,{key:2,title:n.display,size:"narrow",inset:"",class:"absolute","wrap-slot":!1,open:o.panelActive,"onUpdate:open":t[1]||(t[1]=P=>o.panelActive=P)},{trigger:h(()=>[B((c(),p("div",le,[n.icon.svg?(c(),f(a,{key:0,name:n.icon.svg,class:"text-gray-80"},null,8,["name"])):v("",!0),n.icon.html?(c(),p("div",{key:1,innerHTML:n.icon.html,class:"text-gray-80"},null,8,ce)):v("",!0),n.previewText?(c(),p("div",{key:2,class:"bts-pin-preview",innerHTML:n.previewText},null,8,de)):v("",!0)])),[[y,n.display]])]),default:h(()=>[o.panelActive?(c(),f(d,{key:0},{default:h(()=>[_(l,{fields:n.fields,"field-path-prefix":n.fieldPathPrefix,"meta-path-prefix":n.metaPathPrefix},{default:h(()=>[_(i)]),_:1},8,["fields","field-path-prefix","meta-path-prefix"])]),_:1})):v("",!0),_(g,null,{end:h(()=>[_(u,{onClick:t[0]||(t[0]=P=>o.panelActive=!1),variant:"primary"},{default:h(()=>[T(L(e.__("Close")),1)]),_:1})]),_:1})]),_:1},8,["title","open"])):v("",!0),o.initializing?(c(),p("div",ue,[_(l,{fields:n.fields,"field-path-prefix":n.fieldPathPrefix,"meta-path-prefix":n.metaPathPrefix},{default:h(()=>[_(i)]),_:1},8,["fields","field-path-prefix","meta-path-prefix"])])):v("",!0)]),_:1},8,["class"])}const he=O(ie,[["render",pe]]),be=e=>{const{VueNodeViewRenderer:t,NodeViewWrapper:s}=e.vue3,{Plugin:r,PluginKey:o}=e.pm.state,{Decoration:n,DecorationSet:a}=e.pm.view,{Slice:i,Fragment:l}=e.pm.model,{Node:d}=e.core;return d.create({name:"btsPin",group:"inline",inline:!0,selectable:!0,draggable:!0,defining:!1,addOptions(){return{bard:{}}},addAttributes(){return{id:{default:null},values:{default:null}}},addNodeView(){return t(he)},parseHTML(){return[{tag:"bts-pin",getAttrs:u=>JSON.parse(u.innerHTML)}]},renderHTML({HTMLAttributes:u}){return["bts-pin",{},JSON.stringify(u)]},addCommands(){return{btsInsertPin:u=>({chain:g})=>g().focus().insertContent({type:"btsPin",attrs:u}).run()}},addProseMirrorPlugins(){const u=this.options.bard,g=this.type,S={bard:u,...R.methods};return[new r({key:new o("btsPinSelectionDecorator"),props:{decorations(C){const{from:y,to:P}=C.selection,x=[];return C.doc.nodesBetween(y,P,(k,w)=>{k.type===g&&x.push(n.node(w,w+k.nodeSize,{},{withinSelection:!0}))}),a.create(C.doc,x)}}}),new r({key:new o("btsPinPastedTransformer"),props:{transformPasted:C=>{if(JSON.stringify(C.content.toJSON()).indexOf("btsPin")===-1)return C;const{content:y}=C.content,P=w=>w.type===g?w.type.create(S.pastePin(w.attrs)):w.copy(w.content),x=w=>{let F=[];return w.forEach(K=>{let E=P(K);E.content&&(E=E.copy(x(E.content))),F.push(E)}),l.fromArray(F)},k=x(y);return new i(k,C.openStart,C.openEnd)}}})]}})},me=e=>{const{Extension:t}=e.core;return t.create({name:"btsCore",addOptions(){return{bard:{},attr:null,stylesExts:[]}},addGlobalAttributes(){const{attr:s,stylesExts:r}=this.options;return[{types:r,attributes:{[s]:{parseHTML:o=>o.getAttribute("data-bts-style"),renderHTML:o=>({"data-bts-style":o[s]})}}}]},addCommands(){const{attr:s,store:r,styles:o}=this.options;return{btsToggleHeading:n=>({commands:a})=>a.toggleNode("heading","paragraph",n),btsToggleParagraph:n=>({commands:a,editor:i})=>i.isActive("paragraph",n)?a.resetAttributes("paragraph",s):a.toggleNode("paragraph","paragraph",n),btsToggleLink:n=>({commands:a,editor:i})=>i.isActive("link",n)?a.resetAttributes("link",s):a.updateAttributes("link",n),btsToggleList:(n,a)=>({commands:i,editor:l,chain:d})=>l.isActive(a,n)?i.toggleList(a,"listItem"):l.isActive(a)?i.updateAttributes(a,n):d().toggleList(a,"listItem").updateAttributes(a,n).run(),btsToggleBulletList:n=>({commands:a})=>a.btsToggleList(n,"bulletList"),btsToggleOrderedList:n=>({commands:a})=>a.btsToggleList(n,"orderedList"),btsActiveStylesFetch:()=>({editor:n})=>Object.values(o).filter(a=>n.isActive(a.ext,{[s]:a[r]})).map(a=>a.key)}},onUpdate(){this.options.bard.events.emit("bts-update")},onSelectionUpdate(){this.options.bard.events.emit("bts-update")}})},fe=e=>{const{Extension:t}=e.core;return t.create({name:"btsOverrides",addOptions(){return{bard:{},stylesExts:[],stylesMenuOptions:{}}},onCreate(){const{bard:s,stylesExts:r,stylesMenuOptions:o,attr:n,store:a}=this.options,i=Object.entries(this.options.styles).filter(([l,d])=>d.type==="heading").map(([l,d])=>d[a]);if(s.buttons.forEach(l=>{const d=l.args||{};["h1","h2","h3","h4","h5","h6"].includes(l.name)&&r.includes("heading")&&(l.active=u=>u.isActive("heading",{...d,[n]:null})||i.some(g=>u.isActive("heading",{...d,[n]:g}))),["unorderedlist","orderedlist"].includes(l.name)&&(l.args={...d,[n]:null}),l.name==="unorderedlist"&&r.includes("bulletList")&&(l.command=(u,g)=>u.chain().focus().btsToggleBulletList(g).run()),l.name==="orderedlist"&&r.includes("orderedList")&&(l.command=(u,g)=>u.chain().focus().btsToggleOrderedList(g).run())}),s.buttons.find(l=>l.name==="bts_styles")){const l=(s.config.bts_styles||[]).filter(d=>Object.keys(o).includes(d));s.buttons.forEach(d=>{l.includes(d.name)&&(d.visible=()=>!1)})}}})},ge=e=>{const{Plugin:t,PluginKey:s}=e.pm.state,{Decoration:r,DecorationSet:o}=e.pm.view,{Extension:n}=e.core;return n.create({name:"btsDefaults",addOptions(){return{bard:{},store:null,defaultsCpExts:{}}},addProseMirrorPlugins(){const{bard:a,defaultsCpExts:i}=this.options,l=a.config.bts_defaults||"standard",d=i[l];return d===void 0||!d.length?[]:[new t({key:new s("btsDefaults"),props:{attributes:{"data-bts-defaults":l},decorations(u){const g=[];return u.doc.descendants((S,C)=>{S.type.name==="btsDiv"&&g.push(r.node(C,C+S.nodeSize,{"data-bts-defaults":l}))}),o.create(u.doc,g)}}})]}})},M=e=>e.replaceAll("_","-").replaceAll(/(.)(?=[A-Z])/g,"$1-").toLowerCase(),ve=e=>{const{Extension:t}=e.core;return t.create({name:"btsAttributes",addOptions(){return{attributesExts:{},attributes:{}}},addGlobalAttributes(){const{attributes:s}=this.options,r={true:(n,a)=>({rendered:!0}),false:(n,a)=>({rendered:!1}),class:(n,a)=>({parseHTML:i=>i.getAttribute(`data-bts-attribute-${M(n)}`),renderHTML:i=>({[`data-bts-attribute-${M(n)}`]:i[n]})}),style:(n,a)=>({parseHTML:i=>i.style[M(n)],renderHTML:i=>i[n]!==void 0&&i[n]!==null?{style:`${M(n)}: ${i[n]}`,[`data-bts-attribute-${M(n)}`]:i[n]}:null})},o=Object.entries(s).reduce((n,[a,i])=>{const l=i.ext;return n[l]={...n[l]||{},...i.attrs},n},{});return Object.entries(o).map(([n,a])=>({types:[n],attributes:Object.fromEntries(Object.entries(a).filter(([i,l])=>l.extra).map(([i,l])=>[i,{default:typeof l.default<"u"?l.default:null,...typeof l.rendered<"u"?r[l.rendered.toString()](i,l):r.true()}]))}))},addCommands(){const{attributesExts:s}=this.options;return{btsAttributesFetch:()=>({state:r})=>{const{from:o,to:n}=r.selection,a=[];return r.doc.nodesBetween(o,o+1,i=>{s.includes(i.type.name)?a.push({kind:"node",type:i.type.name,attrs:{...i.attrs}}):i.type.name==="text"&&i.marks.forEach(l=>{s.includes(l.type.name)&&a.push({kind:"mark",type:l.type.name,attrs:{...l.attrs}})})}),{info:{from:o,to:n},items:a.reverse()}},btsAttributesApply:({info:r,items:o})=>({state:n,chain:a})=>{const{from:i,to:l}=n.selection;if(i!==r.from||l!==r.to)return;let d=a().focus();return o.forEach(u=>{u.kind==="mark"&&(d=d.extendMarkRange(u.type)),d=d.updateAttributes(u.type,u.attrs)}),d.setTextSelection({from:i,to:l}).run()}}}})},{ToolbarButtonMixin:V}=__STATAMIC__.bard,Ce={props:{item:Object,config:{},bard:{},editor:{},btsOptions:{}},computed:{active(){if(this.item.hasOwnProperty("active"))return this.item.active(this.editor,this.item.args);const e=this.item.hasOwnProperty("activeName")?"activeName":"name",t=this.item[e];return this.editor.isActive(t,this.item.args)},visible(){return this.item.hasOwnProperty("btsMenuVisible")?this.item.btsMenuVisible(this.editor,this.item.args):!0},previewType(){return this.item.btsStyle?.type||Object.values(this.btsOptions.types).find(e=>e.button===this.item.name).name},previewStyle(){return this.item.btsStyle?.[this.btsOptions.store]}},methods:{click(){this.item.command(this.editor,this.item.args),this.$emit("picked")}}},ye=["data-bts-type","data-bts-style"];function xe(e,t,s,r,o,n){return n.visible?(c(),p("button",{key:0,class:A(["bts-styles-item",{active:n.active}]),onClick:t[0]||(t[0]=(...a)=>n.click&&n.click(...a))},[(c(),f(re(n.previewType==="ordered_list"?"ol":"div"),null,{default:h(()=>[m("div",{class:"bts-preview","data-bts-type":n.previewType,"data-bts-style":n.previewStyle},L(s.item.text),9,ye)]),_:1}))],2)):v("",!0)}const we=O(Ce,[["render",xe]]),_e={components:{StylesItem:we},props:{config:{},bard:{},editor:{},btsOptions:{},items:[]},created(){this.bard.events.on("bts-update",this.close)},beforeUnmount(){this.bard.events.off("bts-update",this.close)},methods:{close(){this.$emit("close")}},computed:{previewDefaults(){return this.bard.config.bts_defaults||"standard"}}},ke=["data-bts-defaults"],Pe={key:0,class:"bts-styles-items"},Le={key:1,class:"bts-empty"};function Se(e,t,s,r,o,n){const a=b("StylesItem");return c(),p("div",{class:"bts-styles","data-bts-defaults":n.previewDefaults},[s.items.length?(c(),p("div",Pe,[(c(!0),p($,null,I(s.items,i=>(c(),f(a,{key:i.name,item:i,config:s.config,bard:s.bard,editor:s.editor,btsOptions:s.btsOptions,onPicked:t[0]||(t[0]=l=>e.$emit("picked"))},null,8,["item","config","bard","editor","btsOptions"]))),128))])):(c(),p("div",Le,[...t[1]||(t[1]=[m("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"w-12 h-12"},[m("path",{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",style:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},stroke:"currentColor"})],-1)])]))],8,ke)}const Ae=O(_e,[["render",Se]]),Oe={mixins:[V],components:{StylesMenu:Ae,Button:D,Popover:z},data(){return{panelActive:!1,activeItem:null}},created(){this.type==="text"&&(this.updateActiveItem(),this.bard.events.on("bts-update",this.updateActiveItem))},beforeUnmount(){this.type==="text"&&this.bard.events.off("bts-update",this.updateActiveItem)},computed:{items(){const e=this.bard.buttons,t=(this.config.bts_styles||[]).filter(s=>Object.keys(this.button.btsOptions.stylesMenuOptions).includes(s));return e.filter(s=>typeof s=="object"&&t.includes(s.name))},type(){return this.config.bts_styles_button??"icon"}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&this.togglePanel()},updateActiveItem(){this.activeItem=this.items.find(e=>{if(e.hasOwnProperty("active"))return e.active(this.editor,e.args);const t=e.hasOwnProperty("activeName")?"activeName":"name",s=e[t];return this.editor.isActive(s,e.args)})}}},Me=["innerHTML"],Te={key:1};function $e(e,t,s,r,o,n){const a=b("Button"),i=b("StylesMenu"),l=b("popover"),d=j("tooltip");return c(),f(l,{ref:"popover",align:"start",onClosed:n.closePanel,inset:"",class:"!w-max"},{trigger:h(()=>[B((c(),f(a,{class:A({"bts-styles-button-icon":n.type==="icon","bts-styles-button-text":n.type==="text"}),size:"sm","aria-label":e.button.text,onClick:n.togglePanel},{default:h(()=>[n.type==="icon"?(c(),p("div",{key:0,class:"flex items-center",innerHTML:e.button.html},null,8,Me)):v("",!0),n.type==="text"?(c(),p("span",Te,L(o.activeItem?o.activeItem.text:e.button.text),1)):v("",!0)]),_:1},8,["class","aria-label","onClick"])),[[d,n.type==="icon"?e.button.text:void 0]])]),default:h(()=>[o.panelActive?(c(),f(i,{key:0,config:e.config,bard:e.bard,editor:e.editor,btsOptions:e.button.btsOptions,items:n.items,onClose:n.closePanel,onPicked:n.closePanel},null,8,["config","bard","editor","btsOptions","items","onClose","onPicked"])):v("",!0)]),_:1},8,["onClosed"])}const Be=O(Oe,[["render",$e]]),Ee={components:{StackContent:G,StackFooter:q},props:{config:{},bard:{},editor:{},btsOptions:{}},data(){const{info:e,items:t}=this.editor.commands.btsAttributesFetch(),s=this.editor.commands.btsActiveStylesFetch();return{activeItem:0,info:e,items:[...t,...t],activeStyles:s}},created(){this.bard.events.on("bts-update",this.close)},beforeUnmount(){this.bard.events.off("bts-update",this.close)},computed:{hasAttrs(){return this.items.some(e=>Object.values(this.attrs(e)).length>0)}},methods:{display(e){return this.btsOptions.types.getByItem(e).display},attrs(e){const t=this.btsOptions.attributes[this.btsOptions.types.getByItem(e).name]?.attrs||{};return Object.fromEntries(Object.entries(t).filter(([s,r])=>r.styles.length?r.styles.some(o=>this.activeStyles.includes(o)):!0))},apply(){this.editor.commands.btsAttributesApply({info:this.info,items:this.items}),this.$emit("applied")},close(){this.$emit("close")},toBoolean(e,t){return t.values?.true!==void 0?e===t.values.true:!!e},fromBoolean(e,t){return e?t.values?.true!==void 0?t.values.true:!0:t.values?.false!==void 0?t.values.false:t.rendered?null:!1},selectOptions(e){return Object.entries(e).map(([t,s])=>({label:s,value:t}))}}},He={key:0},Ie={class:"mb-3"},je=["onClick"],De={key:0,class:"pt-6 pb-3 flex flex-col gap-3"},Re={key:1,class:"bts-empty"};function Ve(e,t,s,r,o,n){const a=b("ui-checkbox"),i=b("ui-field"),l=b("ui-label"),d=b("ui-select"),u=b("ui-input"),g=b("StackContent"),S=b("ui-button"),C=b("StackFooter");return c(),p($,null,[_(g,{class:"space-y-5"},{default:h(()=>[n.hasAttrs?(c(),p("div",He,[(c(!0),p($,null,I(o.items,(y,P)=>(c(),p("div",Ie,[m("div",{class:A(["px-4 py-2 title-case bg-gray-100 dark:bg-gray-800 rounded-lg font-medium text-gray-700 dark:text-white antialiased flex justify-between items-center cursor-pointer",{"text-gray-700":o.activeItem!==P}]),onClick:x=>o.activeItem=P},[T(L(e.__(n.display(y)))+" ",1),(c(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:A(["w-4 h-4 -mr-1",{"rotate-90":o.activeItem===P}])},[...t[0]||(t[0]=[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"},null,-1)])],2))],10,je),o.activeItem===P?(c(),p("div",De,[(c(!0),p($,null,I(n.attrs(y),(x,k)=>(c(),p($,null,[x.field==="toggle"?(c(),f(i,{key:0},{default:h(()=>[_(a,{label:x.display||k,"model-value":n.toBoolean(y.attrs[k],x),"onUpdate:modelValue":w=>y.attrs[k]=n.fromBoolean(w,x)},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024)):x.field==="select"?(c(),f(i,{key:1},{default:h(()=>[_(l,null,{default:h(()=>[T(L(x.display||k),1)]),_:2},1024),_(d,{modelValue:y.attrs[k],"onUpdate:modelValue":w=>y.attrs[k]=w,clearable:x.clearable,options:n.selectOptions(x.options)},null,8,["modelValue","onUpdate:modelValue","clearable","options"])]),_:2},1024)):(c(),f(i,{key:2},{default:h(()=>[_(l,null,{default:h(()=>[T(L(x.display||k),1)]),_:2},1024),_(u,{modelValue:y.attrs[k],"onUpdate:modelValue":w=>y.attrs[k]=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))],64))),256))])):v("",!0)]))),256))])):(c(),p("div",Re,[...t[1]||(t[1]=[m("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"w-12 h-12"},[m("path",{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",style:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},stroke:"currentColor"})],-1)])]))]),_:1}),n.hasAttrs?(c(),f(C,{key:0},{end:h(()=>[_(S,{onClick:n.close,variant:"ghost"},{default:h(()=>[T(L(e.__("Cancel")),1)]),_:1},8,["onClick"]),_(S,{onClick:n.apply,variant:"primary"},{default:h(()=>[T(L(e.__("Apply")),1)]),_:1},8,["onClick"])]),_:1})):v("",!0)],64)}const Fe=O(Ee,[["render",Ve]]),Ne={mixins:[V],components:{AttributesPanel:Fe,Button:D,Stack:U},data(){return{panelActive:!1}},methods:{closePanel(){this.panelActive=!1,this.editor.commands.focus()}}},Ze=["innerHTML"];function ze(e,t,s,r,o,n){const a=b("Button"),i=b("AttributesPanel"),l=b("Stack"),d=j("tooltip");return c(),f(l,{title:e.__("Attributes"),size:"narrow",inset:"","wrap-slot":!1,open:o.panelActive,"onUpdate:open":t[0]||(t[0]=u=>o.panelActive=u)},{trigger:h(()=>[B((c(),f(a,{class:A(["px-2!",{group:e.variant==="floating"}]),variant:e.variant==="floating"?"subtle":"ghost",size:"sm","aria-label":e.button.text},{default:h(()=>[m("div",{class:"flex items-center",innerHTML:e.button.html},null,8,Ze)]),_:1},8,["class","variant","aria-label"])),[[d,e.button.text]])]),default:h(()=>[o.panelActive?(c(),f(i,{key:0,config:e.config,bard:e.bard,editor:e.editor,btsOptions:e.button.btsOptions,onApplied:n.closePanel,onClose:n.closePanel},null,8,["config","bard","editor","btsOptions","onApplied","onClose"])):v("",!0)]),_:1},8,["title","open"])}const Ue=O(Ne,[["render",ze]]),qe={components:{Icon:Y},mixins:[R],props:{config:{},bard:{},editor:{},btsOptions:{},items:[]},data(){return{selectionIndex:0}},created(){this.bard.events.on("bts-update",this.close)},beforeUnmount(){this.bard.events.off("bts-update",this.close)},methods:{addPin(e){const t=uniqid(),s={...this.bard.meta.btsPins.defaults[e],type:e},r=this.bard.meta.btsPins.new[e];this.updatePinMeta(t,r),this.$nextTick(()=>{this.editor.commands.btsInsertPin({id:t,values:s})})},close(){this.$emit("close")}}},Ge={class:"bts-pins"},Je={key:0,class:"bts-pins-items"},Ke=["onMouseover","title"],We=["onClick"],Qe={class:"flex items-center justify-center"},Xe=["innerHTML"],Ye={class:"flex-1"},et={class:"w-52 line-clamp-2 text-sm text-gray-800 dark:text-dark-175"},tt={key:0,class:"w-52 truncate text-2xs leading-tight text-gray-500 dark:text-dark-175"},st={key:1,class:"bts-empty"};function nt(e,t,s,r,o,n){const a=b("ui-icon");return c(),p("div",Ge,[s.items.length?(c(),p("div",Je,[(c(!0),p($,null,I(s.items,(i,l)=>(c(),p("div",{key:i.handle,class:A(["cursor-pointer rounded-md",{"bg-gray-100 dark:bg-gray-900":o.selectionIndex===l}]),onMouseover:d=>o.selectionIndex=l,title:e.__(i.instructions)},[m("div",{onClick:d=>n.addPin(i.handle),class:"group flex rounded-md p-2 gap-3"},[m("div",Qe,[i.icon.svg?(c(),f(a,{key:0,name:i.icon.svg},null,8,["name"])):v("",!0),i.icon.html?(c(),p("div",{key:1,innerHTML:i.icon.html},null,8,Xe)):v("",!0)]),m("div",Ye,[m("div",et,L(e.__(i.display||i.handle)),1),i.instructions?(c(),p("div",tt,L(e.__(i.instructions)),1)):v("",!0)])],8,We)],42,Ke))),128))])):(c(),p("div",st,[...t[0]||(t[0]=[m("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"w-12 h-12"},[m("path",{d:"M23.168.832.809 23.191M21 12c0 4.937-4.063 9-9 9s-9-4.063-9-9 4.063-9 9-9 9 4.063 9 9Z",style:{fill:"none","fill-rule":"nonzero","stroke-width":"1.5px"},stroke:"currentColor"})],-1)])]))])}const rt=O(qe,[["render",nt]]),it={components:{PinsMenu:rt,Button:D,Popover:z},mixins:[V],data(){return{panelActive:!1}},computed:{items(){const e=Object.values(this.button.btsOptions.pins),t=(this.config.bts_pins||[]).filter(s=>Object.keys(this.button.btsOptions.pinsMenuOptions).includes(s));return e.filter(s=>t.includes(s.handle))}},methods:{togglePanel(){this.panelActive=!this.panelActive,this.panelActive||this.editor.commands.focus()},closePanel(){this.panelActive&&this.togglePanel()}}},ot=["innerHTML"];function at(e,t,s,r,o,n){const a=b("Button"),i=b("PinsMenu"),l=b("popover"),d=j("tooltip");return c(),f(l,{ref:"popover",align:"start",onClosed:n.closePanel,inset:"",class:"!w-max"},{trigger:h(()=>[B((c(),f(a,{class:A(["px-2!",{group:e.variant==="floating"}]),variant:e.variant==="floating"?"subtle":"ghost",size:"sm","aria-label":e.button.text,onClick:n.togglePanel},{default:h(()=>[m("div",{class:"flex items-center",innerHTML:e.button.html},null,8,ot)]),_:1},8,["class","variant","aria-label","onClick"])),[[d,e.button.text]])]),default:h(()=>[o.panelActive?(c(),f(i,{key:0,config:e.config,bard:e.bard,editor:e.editor,btsOptions:e.button.btsOptions,items:n.items,onClose:n.closePanel,onPicked:n.closePanel},null,8,["config","bard","editor","btsOptions","items","onClose","onPicked"])):v("",!0)]),_:1},8,["onClosed"])}const lt=O(it,[["render",at]]);let N=0;const Z={letter:(e,t)=>{const s={heading:"H",paragraph:"P",btsSpan:"T"}[t]??"S";return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="bts-icon-letter">
                ${{H:'<path d="M2,6.594L6.857,6.594L6.857,1.429C6.857,0.956 7.241,0.571 7.714,0.571C8.187,0.571 8.571,0.956 8.571,1.429L8.571,14.571C8.571,15.044 8.187,15.429 7.714,15.429C7.241,15.429 6.857,15.044 6.857,14.571L6.857,8.309L2,8.309L2,14.571C2,15.044 1.616,15.429 1.143,15.429C0.67,15.429 0.286,15.044 0.286,14.571L0.286,1.429C0.286,0.956 0.67,0.571 1.143,0.571C1.616,0.571 2,0.956 2,1.429L2,6.594Z" />',P:'<path d="M1.153,0.666C0.672,0.666 0.275,1.063 0.275,1.544L0.275,14.565C0.275,15.045 0.672,15.443 1.174,15.443C1.654,15.443 2.052,15.045 2.052,14.565L2.052,9.674C2.699,9.737 3.078,9.764 3.894,9.764C5.586,9.764 6.489,9.325 7.409,8.427C8.308,7.528 8.768,6.441 8.768,5.166C8.768,3.85 8.35,2.763 7.514,1.906C6.657,1.049 5.67,0.631 3.747,0.631C3.058,0.631 2.428,0.645 1.153,0.666ZM2.052,2.338C2.971,2.317 3.35,2.303 3.914,2.303C6.172,2.303 6.887,3.369 6.887,5.145C6.887,6.985 5.984,8.092 3.831,8.092C3.204,8.092 2.846,8.044 2.052,7.981L2.052,2.338Z" />',T:'<path d="M9.492,2.338C9.931,2.338 10.307,1.941 10.307,1.502C10.307,1.063 9.931,0.666 9.492,0.666L1.104,0.666C0.665,0.666 0.289,1.063 0.289,1.502C0.289,1.941 0.665,2.338 1.104,2.338L4.41,2.338L4.41,14.565C4.41,15.045 4.807,15.443 5.308,15.443C5.789,15.443 6.186,15.045 6.186,14.565L6.186,2.338L9.492,2.338Z" />',S:'<path d="M4.081,15.505C5.274,15.505 6.265,15.129 7.073,14.398C7.862,13.666 8.266,12.726 8.266,11.534C8.266,6.539 1.989,7.898 1.989,4.282C1.989,2.965 2.888,2.129 4.301,2.129C5.017,2.129 5.715,2.359 6.357,2.798C6.522,2.903 6.669,2.944 6.779,2.944C7.018,2.944 7.22,2.819 7.385,2.547C7.477,2.443 7.514,2.296 7.514,2.108C7.514,1.816 7.422,1.586 7.22,1.44C6.321,0.792 5.311,0.457 4.21,0.457C3.017,0.457 2.08,0.813 1.383,1.544C0.685,2.276 0.337,3.195 0.337,4.282C0.337,9.131 6.614,7.981 6.614,11.555C6.614,12.976 5.513,13.833 4.1,13.833C3.347,13.833 2.466,13.415 1.456,12.558C1.328,12.454 1.199,12.412 1.034,12.412C0.796,12.412 0.612,12.517 0.465,12.726C0.355,12.872 0.3,13.06 0.3,13.248C0.3,13.499 0.373,13.687 0.52,13.833C1.677,14.941 2.87,15.505 4.081,15.505Z" />'}[s]}
                <text text-anchor="middle" x="12.75" y="14.5" style="font-size: 10px; stroke-width: 1px; stroke: currentColor">${e}</text>
            </svg>
        `},square:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <rect width="15" height="15" x="0.5" y="0.5" rx="3" stroke-width="1" stroke="currentColor" fill="none" />
                <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${e}</text>
            </svg>
        `,"square-solid":e=>{const t=`bts-mask-${N++}`;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <mask id="${t}">
                    <rect width="16" height="16" fill="white" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${e}</text>
                </mask>
                <rect width="15" height="15" x="0.5" y="0.5" rx="3" stroke-width="1" stroke="currentColor" mask="url(#${t})" />
            </svg>
        `},circle:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" fill="none" />
                <text text-anchor="middle" x="8" y="12" style="font-size: 11px;">${e}</text>
            </svg>
        `,"circle-solid":e=>{const t=`bts-mask-${N++}`;return`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <mask id="${t}">
                    <rect width="16" height="16" fill="white" />
                    <text text-anchor="middle" x="8" y="12" style="font-size: 11px;" fill="black">${e}</text>
                </mask>
                <circle cx="8" cy="8" r="7.5" stroke-width="1" stroke="currentColor" mask="url(#${t})" />
            </svg>
        `},"bullet-list":e=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2.333,1C2.882,1 3.333,1.451 3.333,2L3.333,3.333C3.333,3.882 2.882,4.333 2.333,4.333L1,4.333C0.451,4.333 0,3.882 0,3.333L0,2C-0,1.451 0.451,1 1,1L2.333,1ZM2.333,6.333C2.882,6.333 3.333,6.785 3.333,7.333L3.333,8.667C3.333,9.215 2.882,9.667 2.333,9.667L1,9.667C0.451,9.667 0,9.215 0,8.667L0,7.333C-0,6.785 0.451,6.333 1,6.333L2.333,6.333ZM2.333,11.667C2.882,11.667 3.333,12.118 3.333,12.667L3.333,14C3.333,14.549 2.882,15 2.333,15L1,15C0.451,15 0,14.549 0,14L0,12.667C-0,12.118 0.451,11.667 1,11.667L2.333,11.667Z" />
                <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${e}</text>
            </svg>
        `,"ordered-list":e=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M1.473,11.5C0.873,11.5 0.343,11.907 0.187,12.487C0.175,12.529 0.169,12.573 0.169,12.617C0.169,12.891 0.395,13.117 0.67,13.117C0.896,13.117 1.095,12.965 1.153,12.747C1.192,12.602 1.324,12.501 1.473,12.5C1.656,12.5 1.807,12.65 1.807,12.833C1.807,13.016 1.656,13.167 1.473,13.167C1.199,13.167 0.973,13.392 0.973,13.667C0.973,13.941 1.199,14.167 1.473,14.167C1.656,14.167 1.807,14.317 1.807,14.5C1.809,14.514 1.809,14.529 1.809,14.543C1.809,14.728 1.658,14.879 1.473,14.879C1.305,14.879 1.162,14.753 1.14,14.587C1.09,14.358 0.886,14.194 0.652,14.194C0.377,14.194 0.152,14.42 0.152,14.694C0.152,14.751 0.161,14.807 0.18,14.86C0.345,15.427 0.869,15.82 1.46,15.82C2.187,15.82 2.786,15.226 2.793,14.5C2.795,14.236 2.716,13.978 2.567,13.76C2.533,13.702 2.533,13.631 2.567,13.573C2.716,13.356 2.795,13.097 2.793,12.833C2.793,12.107 2.2,11.507 1.473,11.5ZM2.833,7.167C2.833,6.435 2.231,5.833 1.5,5.833C0.769,5.833 0.167,6.435 0.167,7.167C0.17,7.44 0.394,7.663 0.667,7.667C0.94,7.663 1.163,7.44 1.167,7.167C1.167,6.984 1.317,6.833 1.5,6.833C1.683,6.833 1.833,6.984 1.833,7.167C1.834,7.322 1.779,7.473 1.68,7.593L0.273,9.333C0.156,9.483 0.133,9.687 0.213,9.86C0.297,10.034 0.474,10.145 0.667,10.147L2.333,10.147C2.608,10.147 2.833,9.921 2.833,9.647C2.833,9.372 2.608,9.147 2.333,9.147L2.053,9.147C1.991,9.146 1.934,9.109 1.907,9.053C1.87,8.999 1.87,8.928 1.907,8.873L2.447,8.207C2.686,7.912 2.822,7.546 2.833,7.167ZM2.667,3.5L2.5,3.5C2.409,3.5 2.333,3.425 2.333,3.333L2.333,1.08C2.33,0.578 1.916,0.167 1.413,0.167L1,0.167C0.726,0.167 0.5,0.392 0.5,0.667C0.5,0.941 0.726,1.167 1,1.167L1.167,1.167C1.258,1.167 1.333,1.242 1.333,1.333L1.333,3.333C1.333,3.425 1.258,3.5 1.167,3.5L1,3.5C0.726,3.5 0.5,3.726 0.5,4C0.5,4.274 0.726,4.5 1,4.5L2.667,4.5C2.941,4.5 3.167,4.274 3.167,4C3.167,3.726 2.941,3.5 2.667,3.5Z" />
                <text text-anchor="middle" x="11" y="12" style="font-size: 11px;">${e}</text>
            </svg>
        `,link:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M10.031,7.51C9.534,8.211 9.615,9.178 10.223,9.786L10.562,10.125L10.126,10.562L9.786,10.222C9.178,9.614 8.211,9.533 7.51,10.031L7.3,10.18C6.802,10.534 6.365,10.967 6.007,11.463C5.419,12.28 5.51,13.413 6.222,14.125L7.351,15.254C8.063,15.966 9.196,16.057 10.013,15.469C10.509,15.111 10.943,14.674 11.298,14.175L11.461,13.945C11.951,13.256 11.87,12.305 11.272,11.707L10.915,11.35L11.351,10.914L11.709,11.271C12.306,11.869 13.257,11.949 13.947,11.46L14.177,11.296C14.675,10.942 15.112,10.508 15.47,10.012C16.058,9.195 15.967,8.062 15.255,7.35L14.126,6.221C13.414,5.51 12.281,5.419 11.464,6.007C10.968,6.364 10.534,6.801 10.179,7.3L10.031,7.51L10.031,7.51ZM12.141,10.125L12.499,10.483C12.713,10.696 13.053,10.725 13.3,10.55L13.53,10.386C13.929,10.103 14.278,9.756 14.564,9.359C14.833,8.985 14.791,8.466 14.466,8.141L13.336,7.011C13.01,6.686 12.491,6.644 12.117,6.913C11.721,7.199 11.373,7.548 11.09,7.947L10.941,8.156C10.757,8.415 10.787,8.772 11.012,8.996L11.351,9.335L11.729,8.957C11.835,8.848 11.98,8.787 12.131,8.787C12.438,8.787 12.69,9.039 12.69,9.345C12.69,9.496 12.628,9.641 12.519,9.746L12.141,10.125ZM9.336,11.351L8.964,11.723C8.859,11.828 8.8,11.97 8.8,12.118C8.8,12.424 9.053,12.676 9.359,12.676C9.507,12.676 9.65,12.617 9.754,12.512L10.126,12.141L10.483,12.498C10.697,12.712 10.725,13.053 10.55,13.299L10.386,13.53C10.103,13.929 9.756,14.278 9.36,14.563C8.986,14.833 8.467,14.791 8.141,14.465L7.012,13.336C6.686,13.011 6.644,12.492 6.913,12.118C7.199,11.721 7.548,11.373 7.947,11.09L8.157,10.941C8.415,10.758 8.772,10.788 8.996,11.013L9.336,11.352L9.336,11.351Z" style="fill-rule:evenodd" />
                <text text-anchor="middle" x="5" y="8" style="font-size: 11px;">${e}</text>
            </svg>
        `,symbol:e=>`
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <text text-anchor="middle" x="8" y="16" style="font-size: 23px;">${e}</text>
            </svg>
        `},J=e=>e.icon?Z.hasOwnProperty(e.icon)?{html:Z[e.icon](e.ident,e.ext)}:e.icon.match(/<svg/)?{html:e.icon}:e.icon.match(/\//)?{svg:e.icon}:{svg:e.icon}:{svg:null},ct=e=>(e.icon||(e.ext==="link"?e.icon="link":e.ext==="bulletList"?e.icon="bullet-list":e.ext==="orderedList"?e.icon="ordered-list":e.ext==="btsDiv"?e.icon="square":e.icon="letter"),J(e)),dt=e=>J(e),ut={styles:`
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="16" viewBox="0 0 22 16" fill="currentColor" style="width: 22px;">
            <path d="M11.755,14.91C11.924,15.311 12.198,15.5 12.598,15.5C13.125,15.5 13.462,15.079 13.462,14.594C13.462,14.488 13.441,14.363 13.399,14.236L7.774,1.216C7.584,0.732 7.247,0.5 6.762,0.5C6.278,0.5 5.941,0.732 5.73,1.216L0.084,14.299C0.021,14.468 0,14.594 0,14.679C0,15.121 0.316,15.5 0.843,15.5C1.222,15.5 1.496,15.311 1.643,14.91L3.329,10.887L10.049,10.887L11.755,14.91ZM4.045,9.201L6.699,2.902L9.354,9.201L4.045,9.201ZM13.883,12.571C13.883,14.363 15.042,15.5 16.791,15.5C18.076,15.5 19.088,15.037 19.824,14.13L19.824,14.762C19.824,15.162 20.183,15.5 20.625,15.5C21.068,15.5 21.426,15.163 21.426,14.762L21.426,9.538C21.426,6.946 20.393,5.662 17.781,5.662C16.959,5.662 16.074,5.851 15.169,6.23C14.895,6.336 14.747,6.567 14.747,6.904C14.747,7.01 14.768,7.094 14.811,7.199C14.937,7.473 15.147,7.621 15.463,7.621C15.572,7.621 15.679,7.599 15.779,7.557C16.432,7.304 17.064,7.179 17.676,7.179C19.424,7.179 19.824,8.147 19.824,10.17C19.255,9.77 18.476,9.559 17.465,9.559C15.358,9.559 13.883,10.696 13.883,12.571ZM19.824,12.762C19.129,13.583 18.329,13.983 17.38,13.983C16.306,13.983 15.674,13.414 15.674,12.488C15.674,11.476 16.58,10.929 17.696,10.929C18.518,10.929 19.235,11.139 19.824,11.561L19.824,12.762Z" />
        </svg>
    `,attributes:`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M10.194 2.313 11.782.724A2.468 2.468 0 0 1 13.529 0 2.482 2.482 0 0 1 16 2.471c0 .655-.26 1.284-.724 1.747l-9.759 9.759a4.936 4.936 0 0 1-2.083 1.241l-2.527.753a.703.703 0 0 1-.7-.178.703.703 0 0 1-.178-.7l.753-2.527a4.936 4.936 0 0 1 1.241-2.083l8.171-8.17Zm1.498.498 1.497 1.498 1.089-1.089a1.058 1.058 0 1 0-1.498-1.498l-1.088 1.089Zm.499 2.496L10.694 3.81l-7.672 7.671a3.528 3.528 0 0 0-.887 1.488l-.38 1.276 1.276-.38a3.528 3.528 0 0 0 1.488-.887l7.672-7.671Z"/>
        </svg>
    `,pins:`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M14.068 1.932a6.604 6.604 0 0 1 0 9.335l-2.801 2.801a6.604 6.604 0 0 1-9.335 0 6.604 6.604 0 0 1 0-9.335l2.801-2.801a6.604 6.604 0 0 1 9.335 0ZM7.39 7.39H4.534a.612.612 0 1 0 0 1.224H7.39v2.855a.612.612 0 1 0 1.224 0V8.614h2.855a.613.613 0 0 0 0-1.224H8.614V4.534a.613.613 0 0 0-1.224 0V7.39Z"/>
        </svg>
    `,hidden:`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M3.875 2.97A8.32 8.32 0 0 1 8 1.876a8.34 8.34 0 0 1 7.973 5.94.63.63 0 0 1 0 .365 8.327 8.327 0 0 1-2.771 4.116l1.832 1.831a.643.643 0 0 1 .194.46c0 .351-.289.64-.64.64a.636.636 0 0 1-.459-.195L5.997 6.901l-2.67-2.669-2.36-2.361a.64.64 0 1 1 .905-.905L3.875 2.97Zm2.626 2.626c.447-.278.966-.43 1.5-.43A2.863 2.863 0 0 1 10.834 8c0 .534-.151 1.053-.429 1.499l1.886 1.886a7.052 7.052 0 0 0 2.399-3.387 7.058 7.058 0 0 0-6.691-4.842c-1.105 0-2.194.26-3.18.758l1.682 1.682Zm2.954 2.953c.065-.174.1-.36.1-.549 0-.852-.702-1.554-1.554-1.554-.19 0-.375.035-.549.1l2.003 2.003ZM1.648 4.824a.642.642 0 0 1 .483-.22.638.638 0 0 1 .493 1.048A7.048 7.048 0 0 0 1.31 8c1.171 3.567 4.998 5.602 8.61 4.579a.643.643 0 0 1 .814.617.64.64 0 0 1-.466.615C5.918 15.043 1.319 12.515.027 8.182a.63.63 0 0 1 0-.365 8.324 8.324 0 0 1 1.621-2.993Z"/>
        </svg>
    `,paragraph:`
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.631.629a.883.883 0 0 0-.878.878v13.021c0 .48.397.878.9.878a.885.885 0 0 0 .878-.878V9.637c.646.063 1.026.09 1.841.09 1.692 0 2.596-.439 3.515-1.337.9-.899 1.36-1.986 1.36-3.261 0-1.316-.419-2.403-1.254-3.26C10.136 1.012 9.148.594 7.225.594c-.689 0-1.319.014-2.594.035Zm.9 1.672c.918-.021 1.298-.035 1.862-.035 2.257 0 2.972 1.066 2.972 2.842 0 1.84-.903 2.947-3.055 2.947-.628 0-.986-.048-1.779-.111V2.301Z" style="fill-rule:nonzero"/>
        </svg>
    `},H=e=>ut[e];class pt{constructor(t){t.types=this.bootTypeManager(t.types),t.pins=this.bootPinsIcons(t.pins),this.bootExtensions(t).bootStyleButtons(t).bootStylesButton(t).bootAttributesButton(t).bootPinsButton(t).bootHiddenButton(t).bootParagraphButton(t).bootCss(t)}bootTypeManager(t){return t.getByItem=function(s){return Object.values(this).find(function(r){if(r.wildcard)return!1;const o=Array.isArray(r.parameters)?{}:r.parameters,n=Object.fromEntries(Object.entries(s.attrs).filter(([a])=>o.hasOwnProperty(a)));return r.extension===s.type&&JSON.stringify(n)===JSON.stringify(o)})},t}bootPinsIcons(t){return Object.fromEntries(Object.entries(t).map(([s,r])=>[s,{...r,icon:dt(r)}]))}bootExtensions(t){return Statamic.$bard.addExtension(({tiptap:s,bard:r})=>me(s).configure({...t,bard:r})),Statamic.$bard.addExtension(({tiptap:s,bard:r})=>ge(s).configure({...t,bard:r})),Statamic.$bard.addExtension(({tiptap:s,bard:r})=>fe(s).configure({...t,bard:r})),Statamic.$bard.addExtension(({tiptap:s})=>W(s)),Statamic.$bard.addExtension(({tiptap:s})=>Q(s)),Statamic.$bard.addExtension(({tiptap:s})=>X(s)),t.pro&&(Statamic.$bard.addExtension(({tiptap:s})=>ve(s).configure(t)),Statamic.$bard.addExtension(({tiptap:s,bard:r})=>be(s).configure({...t,bard:r}))),this}bootStyleButtons(t){return Statamic.$bard.buttons((s,r)=>{Object.entries(t.styles).forEach(([o,n])=>{const a=t.types[n.type],i={name:o,text:n.name,args:{[t.attr]:n[t.store],...a.parameters},active:(l,d)=>l.isActive(a.extension,d),visible:a.active_visible?l=>l.isActive(a.extension):()=>!0,btsMenuVisible:a.active_visible?l=>l.isActive(a.extension):()=>!0,command:(l,d)=>l.chain().focus()[a.command](d).run(),btsStyle:n,...ct(n)};s.splice(s.indexOf(o),0,r(i))})}),this}bootStylesButton(t){return t.pro?(Statamic.$bard.buttons((s,r)=>{s.splice(s.indexOf("bts_styles"),0,r({name:"bts_styles",text:__("Style"),component:Be,html:H("styles"),btsOptions:t}))}),this):this}bootAttributesButton(t){return t.pro?(Statamic.$bard.buttons((s,r)=>{s.splice(s.indexOf("bts_attributes"),0,r({name:"bts_attributes",text:__("Attributes"),component:Ue,html:H("attributes"),btsOptions:t}))}),this):this}bootPinsButton(t){return t.pro?(Statamic.$bard.buttons((s,r)=>{s.splice(s.indexOf("bts_pins"),0,r({name:"bts_pins",text:__("Add Pin"),component:lt,html:H("pins"),btsOptions:t}))}),this):this}bootHiddenButton(t){return Statamic.$bard.buttons((s,r)=>{s.splice(s.indexOf("bts_hidden"),0,r({name:"bts_hidden",text:__("Hidden"),command:o=>o.chain().focus().btsToggleHidden().run(),activeName:"btsHidden",html:H("hidden")}))}),this}bootParagraphButton(t){const{attr:s}=t;return Statamic.$bard.buttons((r,o)=>{r.splice(r.indexOf("bts_paragraph"),0,o({name:"bts_paragraph",text:__("Paragraph"),command:n=>n.chain().focus().btsToggleParagraph({[s]:null}).run(),active:n=>n.isActive("paragraph",{[s]:null}),html:H("paragraph")}))}),this}bootCss(t){const s=[...this.gatherDefaultsCss(t),...this.gatherStylesCss(t),...this.gatherAttributesCss(t)],r=document.createElement("style");return r.appendChild(document.createTextNode(s.join(" "))),document.body.appendChild(r),this}gatherDefaultsCss(t){const s=[],r=".bard-content";return Object.entries(t.defaults).forEach(([o,n])=>{Object.entries(n.dflts).forEach(([a,i])=>{const l=t.types[i.type].selector;i.cp_css&&s.push(...this.parseCss([`.bts-styles[data-bts-defaults="${o}"] .bts-preview[data-bts-type="${i.type}"]:not([data-bts-style])`,`${r}[data-bts-defaults="${o}"] > ${l}:not([data-bts-style]):not(.is-editor-empty)`],i.cp_css)),i.cp_badge&&s.push(...this.parseCss([`${r}[data-bts-defaults="${o}"] > ${l}:not([data-bts-style]):not(.is-editor-empty)::before`],{"&":{content:`"${__(t.types[i.type].display)}"`}}))})}),s}gatherStylesCss(t){const s=[],r=".bard-content";return Object.entries(t.styles).forEach(([o,n])=>{const a=t.types[n.type].selector;n.cp_css&&s.push(...this.parseCss([`.bts-preview[data-bts-style="${n[t.store]}"]`,`${r} ${a}[data-bts-style="${n[t.store]}"]`],n.cp_css)),n.cp_badge&&s.push(...this.parseCss([`${r} ${a}[data-bts-style="${n[t.store]}"]::before`],{"&":{content:`"${n.name}"`}}))}),s}gatherAttributesCss(t){const s=[],r=".bard-content",o=Object.entries(t.attributes).reduce((n,[,a])=>{const i=a.type;return n[i]={...n[i]||{},...a.attrs},n},{});return Object.entries(o).forEach(([n,a])=>{Object.entries(a).forEach(([i,l])=>{const d=t.types[l.type].selector;l.cp_css&&Object.entries(l.cp_css).forEach(([u,g])=>{u==="true"&&l.values?.true!==void 0&&(u=l.values.true),s.push(...this.parseCss([`.bts-preview[data-bts-attribute-${M(i)}="${u}"]`,`${r} ${d}[data-bts-attribute-${M(i)}="${u}"]`],g))})})}),s}parseCss(t,s){return s===void 0?[]:(typeof s=="string"&&(s={"&":s}),Object.entries(s).map(([r,o])=>{const n=t.map(i=>r.includes("&")?r.replace("&",i):`${i} ${r}`).join(", "),a=typeof o=="object"?Object.entries(o).map(([i,l])=>`${i}: ${l};`).join(""):o;return`${n} { ${a} }`}))}}Statamic.booting(()=>{new pt(Statamic.$config.get("bardTexstyle"))});
